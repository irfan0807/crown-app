/*! For license information please see main.a4a4b355.js.LICENSE.txt */
!function(){var e={110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),m=0;m<o.length;++m){var y=o[m];if(!a[y]&&(!r||!r[y])&&(!v||!v[y])&&(!u||!u[y])){var g=h(n,y);try{c(t,y,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case v:case s:return e;default:return t}}case i:return t}}}function x(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return x(e)||w(e)===l},t.isConcurrentMode=x,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===y)},t.typeOf=w},309:function(e,t,n){"use strict";e.exports=n(746)},151:function(e,t,n){var r=n(878);e.exports=d,e.exports.parse=a,e.exports.compile=function(e,t){return u(a(e,t),t)},e.exports.tokensToFunction=u,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,r=[],a=0,o=0,u="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var f=n[0],h=n[1],d=n.index;if(u+=e.slice(o,d),o=d+f.length,h)u+=h[1];else{var p=e[o],v=n[2],m=n[3],y=n[4],g=n[5],k=n[6],b=n[7];u&&(r.push(u),u="");var w=null!=v&&null!=p&&p!==v,x="+"===k||"*"===k,_="?"===k||"*"===k,I=n[2]||l,E=y||g;r.push({name:m||a++,prefix:v||"",delimiter:I,optional:_,repeat:x,partial:w,asterisk:!!b,pattern:E?c(E):b?".*":"[^"+s(I)+"]+?"})}}return o<e.length&&(u+=e.substr(o)),u&&r.push(u),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function u(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",f(t)));return function(t,i){for(var a="",u=t||{},s=(i||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var f,h=u[l.name];if(null==h){if(l.optional){l.partial&&(a+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(f=s(h[d]),!n[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");a+=(0===d?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):s(h),!n[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');a+=l.prefix+f}}else a+=l}return a}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function f(e){return e&&e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,a=!1!==n.end,o="",u=0;u<e.length;u++){var c=e[u];if("string"===typeof c)o+=s(c);else{var h=s(c.prefix),d="(?:"+c.pattern+")";t.push(c),c.repeat&&(d+="(?:"+h+d+")*"),o+=d=c.optional?c.partial?h+"("+d+")?":"(?:"+h+"("+d+"))?":h+"("+d+")"}}var p=s(n.delimiter||"/"),v=o.slice(-p.length)===p;return i||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":i&&v?"":"(?="+p+"|$)",l(new RegExp("^"+o,f(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(d(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",f(n)),t)}(e,t,n):function(e,t,n){return h(a(e,n),t,n)}(e,t,n)}},878:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function j(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case E:return"Profiler";case I:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){X(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ie=null;function Ee(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Se(e){_e?Ie?Ie.push(e):Ie=[e]:_e=e}function Te(){if(_e){var e=_e,t=Ie;if(Ie=_e=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Ne=!1;function Pe(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==_e||null!==Ie)&&(Ae(),Te())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(le){Oe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,Ve=null,je={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(je,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Be(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,_t,It,Et,St=!1,Tt=[],Ct=null,At=null,Nt=null,Pt=new Map,Dt=new Map,Ot=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Et(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function jt(){St=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==At&&Ut(At)&&(At=null),null!==Nt&&Ut(Nt)&&(Nt=null),Pt.forEach(Vt),Dt.forEach(Vt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==At&&zt(At,e),null!==Nt&&zt(Nt,e),Pt.forEach(t),Dt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){if(Kt){var i=$t(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Dt.set(a,Mt(Dt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=$t(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function En(){return In}var Sn=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Sn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Nn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(Pn),On=[9,13,27,32],Rn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Rn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function jn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Se(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Qn(e){Ur(e,0)}function $n(e){if(W(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Wn=Hn=null)}function nr(e){if("value"===e.propertyName&&$n(Wn)){var t=[];Gn(t,Wn,e,we(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Wn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Ir={};function Er(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return _r[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Sr=Er("animationend"),Tr=Er("animationiteration"),Cr=Er("animationstart"),Ar=Er("transitionend"),Nr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Nr.set(e,t),s(t,[e])}for(var Or=0;Or<Pr.length;Or++){var Rr=Pr[Or];Dr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Dr(Sr,"onAnimationEnd"),Dr(Tr,"onAnimationIteration"),Dr(Cr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,jr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Gt;break;case 4:i=Ht;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Pe((function(){var r=a,i=we(n),o=[];e:{var u=Nr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=An;break;case Sr:case Tr:case Cr:s=yn;break;case Ar:s=Nn;break;case"scroll":s=hn;break;case"wheel":s=Dn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=De(p,h))&&l.push(Gr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Wr(d))p++;for(d=0,v=h;v;v=Wr(v))d++;for(;0<p-d;)l=Wr(l),p--;for(;0<d-p;)h=Wr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Wr(l),h=Wr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Yn;else if(Kn(u))if(Xn)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Gn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?bi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Rn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?jn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(y=Hr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=zn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Rn&&jn(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=De(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=De(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=De(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=De(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],_i=-1;function Ii(e){return{current:e}}function Ei(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Si(e,t){_i++,xi[_i]=e.current,e.current=t}var Ti={},Ci=Ii(Ti),Ai=Ii(!1),Ni=Ti;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ei(Ai),Ei(Ci)}function Ri(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Si(Ci,t),Si(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ni=Ci.current,Si(Ci,e),Si(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ai),Ei(Ci),Si(Ci,e)):Ei(Ai),Si(Ai,n)}var Ui=null,Vi=!1,ji=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!ji&&null!==Ui){ji=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),We(Ze,Bi),i}finally{kt=t,ji=!1}}return null}var qi=[],Ki=0,Gi=null,Hi=0,Wi=[],Qi=0,$i=null,Yi=1,Xi="";function Ji(e,t){qi[Ki++]=Hi,qi[Ki++]=Gi,Gi=e,Hi=t}function Zi(e,t,n){Wi[Qi++]=Yi,Wi[Qi++]=Xi,Wi[Qi++]=$i,$i=e;var r=Yi;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else Yi=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Hi=qi[--Ki],qi[Ki]=null;for(;e===$i;)$i=Wi[--Qi],Wi[Qi]=null,Xi=Wi[--Qi],Wi[Qi]=null,Yi=Wi[--Qi],Wi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Yi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ii(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function xa(e){var t=ya.current;Ei(ya),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Sa=null;function Ta(e){null===Sa?Sa=[e]:Sa.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Aa(e,r)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Da(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ra(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cs)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Aa(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Aa(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Na=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ms|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Va=(new r.Component).refs;function ja(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Oa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ra(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Oa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ra(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Oa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ra(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Di(t)?Ni:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Va,Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Di(t)?Ni:Ci.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ja(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&za.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Va&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function $a(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===D&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case x:return(t=Uc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Wa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case D:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Wa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Wa(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),ia&&Ji(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),ia&&Ji(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Lc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Rc(o.type,o.key,o.props,null,r.mode,s)).ref=Ha(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case D:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Wa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ya=$a(!0),Xa=$a(!1),Ja={},Za=Ii(Ja),eo=Ii(Ja),to=Ii(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Si(to,t),Si(eo,e),Si(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Za),Si(Za,t)}function io(){Ei(Za),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Si(eo,e),Si(Za,n))}function oo(e){eo.current===e&&(Ei(Za),Ei(eo))}var uo=Ii(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,bo=0,wo=0;function xo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==bo;return bo=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Ms|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Ms|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Do(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Vo(9,Ro.bind(null,n,r,i,t),void 0,null),null===As)throw Error(a(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ro(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Aa(e,1);null!==t&&nc(t,e,1,-1)}function Uo(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jo(){return To().memoizedState}function zo(e,t,n,r){var i=So();vo.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=Vo(t,n,a,r))}vo.flags|=e,i.memoizedState=Vo(1|t,n,a,r)}function qo(e,t){return zo(8390656,8,e,t)}function Ko(e,t){return Bo(2048,8,e,t)}function Go(e,t){return Bo(4,2,e,t)}function Ho(e,t){return Bo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Wo.bind(null,t,e),n)}function $o(){}function Yo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Ms|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){nc(n,e,r,ec()),au(n,t,r)}}function nu(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(nc(n,e,r,i=ec()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ea,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:Ea,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=So();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:Uo,useDebugValue:$o,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=So();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===As)throw Error(a(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Ro.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=So(),t=As.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:Xo,useReducer:Ao,useRef:jo,useState:function(){return Ao(Co)},useDebugValue:$o,useDeferredValue:function(e){return Jo(To(),mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Do,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:Xo,useReducer:No,useRef:jo,useState:function(){return No(Co)},useDebugValue:$o,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Do,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ks||(Ks=!0,Gs=r),hu(0,t)},n}function vu(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Ra(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Xa(t,null,n,r):Ya(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=Eo(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function _u(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Dc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Ku(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ku(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Tu(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Os,Ds),Ds|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Os,Ds),Ds|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Os,Ds),Ds|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Os,Ds),Ds|=r;return wu(e,t,i,n),t.child}function Su(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Di(n)?Ni:Ci.current;return a=Pi(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=Eo(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Cu(e,t,n,r,i){if(Di(n)){var a=!0;Mi(t)}else a=!1;if(Ia(t,i),null===t.stateNode)qu(e,t),qa(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Pi(t,c=Di(n)?Ni:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Na=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ai.current||Na?("function"===typeof l&&(ja(t,n,l,r),s=t.memoizedState),(u=Na||Ba(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Da(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ea(s):s=Pi(t,s=Di(n)?Ni:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Na=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ai.current||Na?("function"===typeof d&&(ja(t,n,d,r),p=t.memoizedState),(c=Na||Ba(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Au(e,t,n,r,a,i)}function Au(e,t,n,r,i,a){Su(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ku(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Nu(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),ro(e,t.containerInfo)}function Pu(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Du,Ou,Ru,Lu={dehydrated:null,treeContext:null,retryLane:0};function Mu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Mc(s,i,0,null),e=Lc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Mu(n),t.memoizedState=Lu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Vu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,u),t.child.memoizedState=Mu(u),t.memoizedState=Lu,o);if(0===(1&t.mode))return Vu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Vu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=As)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Aa(e,i),nc(r,e,i,-1))}return vc(),Vu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Wi[Qi++]=Yi,Wi[Qi++]=Xi,Wi[Qi++]=$i,Yi=e.id,Xi=e.overflow,$i=t),t=Uu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Oc(r,u):(u=Lc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Mu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Lu,i}return e=(u=e.child).sibling,i=Oc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){return null!==r&&pa(r),Ya(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ju(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function zu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Bu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ju(e,n,t);else if(19===e.tag)ju(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zu(t,!0,n,null,a);break;case"together":zu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ku(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ms|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Di(t.type)&&Oi(),Hu(t),null;case 3:return r=t.stateNode,io(),Ei(Ai),Ei(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ou(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":Y(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Du(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Ru(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Hu(t),null;case 13:if(Ei(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Rs&&(Rs=3):vc())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),null===e&&Br(t.stateNode.containerInfo),Hu(t),null;case 10:return xa(t.type._context),Hu(t),null;case 19:if(Ei(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Gu(o,!1);else{if(0!==Rs||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Gu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Bs&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*Xe()-o.renderingStartTime>Bs&&1073741824!==n&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=uo.current,Si(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ds)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qu(e,t){switch(ta(t),t.tag){case 1:return Di(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ai),Ei(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Du=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ou=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ru=function(e,t,n,r){n!==r&&(t.flags|=4)};var $u=!1,Yu=!1,Xu="function"===typeof WeakSet?WeakSet:Set,Ju=null;function Zu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&es(t,n,a)}i=i.next}while(i!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function as(e){var t=e.alternate;null!==t&&(e.alternate=null,as(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function os(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ls=null,fs=!1;function hs(e,t,n){for(n=n.child;null!==n;)ds(e,t,n),n=n.sibling}function ds(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Yu||Zu(n,t);case 6:var r=ls,i=fs;ls=null,hs(e,t,n),fs=i,null!==(ls=r)&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ls.removeChild(n.stateNode));break;case 18:null!==ls&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),Bt(e)):si(ls,n.stateNode));break;case 4:r=ls,i=fs,ls=n.stateNode.containerInfo,fs=!0,hs(e,t,n),ls=r,fs=i;break;case 0:case 11:case 14:case 15:if(!Yu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&es(n,t,o),i=i.next}while(i!==r)}hs(e,t,n);break;case 1:if(!Yu&&(Zu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ic(n,t,u)}hs(e,t,n);break;case 21:hs(e,t,n);break;case 22:1&n.mode?(Yu=(r=Yu)||null!==n.memoizedState,hs(e,t,n),Yu=r):hs(e,t,n);break;default:hs(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xu),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:ls=s.stateNode,fs=!1;break e;case 3:case 4:ls=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===ls)throw Error(a(160));ds(o,u,i),ls=null,fs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ic(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ms(t,e),t=t.sibling}function ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(t,e),ys(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(m){Ic(e,e.return,m)}try{ns(5,e,e.return)}catch(m){Ic(e,e.return,m)}}break;case 1:vs(t,e),ys(e),512&r&&null!==n&&Zu(n,n.return);break;case 5:if(vs(t,e),ys(e),512&r&&null!==n&&Zu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ic(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&X(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ic(e,e.return,m)}}break;case 6:if(vs(t,e),ys(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ic(e,e.return,m)}}break;case 3:if(vs(t,e),ys(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Ic(e,e.return,m)}break;case 4:default:vs(t,e),ys(e);break;case 13:vs(t,e),ys(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zs=Xe())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Yu=(l=Yu)||f,vs(t,e),Yu=l):vs(t,e),ys(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Ju=e,f=e.child;null!==f;){for(h=Ju=f;null!==Ju;){switch(p=(d=Ju).child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:Zu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ic(r,n,m)}}break;case 5:Zu(d,d.return);break;case 22:if(null!==d.memoizedState){ws(h);continue}}null!==p?(p.return=d,Ju=p):ws(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){Ic(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Ic(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vs(t,e),ys(e),4&r&&ps(e);case 21:}}function ys(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(os(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cs(e,us(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ss(e,us(e),o);break;default:throw Error(a(161))}}catch(u){Ic(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gs(e,t,n){Ju=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Ju;){var i=Ju,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$u;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Yu;u=$u;var c=Yu;if($u=o,(Yu=s)&&!c)for(Ju=i;null!==Ju;)s=(o=Ju).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Ju=s):xs(i);for(;null!==a;)Ju=a,ks(a,t,n),a=a.sibling;Ju=i,$u=u,Yu=c}bs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Ju=a):bs(e)}}function bs(e){for(;null!==Ju;){var t=Ju;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yu||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}Yu||512&t.flags&&is(t)}catch(d){Ic(t,t.return,d)}}if(t===e){Ju=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ju=n;break}Ju=t.return}}function ws(e){for(;null!==Ju;){var t=Ju;if(t===e){Ju=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ju=n;break}Ju=t.return}}function xs(e){for(;null!==Ju;){var t=Ju;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){Ic(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ic(t,i,s)}}var a=t.return;try{is(t)}catch(s){Ic(t,a,s)}break;case 5:var o=t.return;try{is(t)}catch(s){Ic(t,o,s)}}}catch(s){Ic(t,t.return,s)}if(t===e){Ju=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Ju=u;break}Ju=t.return}}var _s,Is=Math.ceil,Es=b.ReactCurrentDispatcher,Ss=b.ReactCurrentOwner,Ts=b.ReactCurrentBatchConfig,Cs=0,As=null,Ns=null,Ps=0,Ds=0,Os=Ii(0),Rs=0,Ls=null,Ms=0,Fs=0,Us=0,Vs=null,js=null,zs=0,Bs=1/0,qs=null,Ks=!1,Gs=null,Hs=null,Ws=!1,Qs=null,$s=0,Ys=0,Xs=null,Js=-1,Zs=0;function ec(){return 0!==(6&Cs)?Xe():-1!==Js?Js:Js=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cs)&&0!==Ps?Ps&-Ps:null!==va.transition?(0===Zs&&(Zs=vt()),Zs):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Ys)throw Ys=0,Xs=null,Error(a(185));yt(e,n,r),0!==(2&Cs)&&e===As||(e===As&&(0===(2&Cs)&&(Fs|=n),4===Rs&&uc(e,Ps)),rc(e,r),1===n&&0===Cs&&0===(1&t.mode)&&(Bs=Xe()+500,Vi&&Bi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===As?Ps:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,zi(e)}(sc.bind(null,e)):zi(sc.bind(null,e)),oi((function(){0===(6&Cs)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Js=-1,Zs=0,0!==(6&Cs))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===As?Ps:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Cs;Cs|=2;var o=pc();for(As===e&&Ps===t||(qs=null,Bs=Xe()+500,hc(e,t));;)try{gc();break}catch(s){dc(e,s)}wa(),Es.current=o,Cs=i,null!==Ns?t=0:(As=null,Ps=0,t=Rs)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ls,hc(e,0),uc(e,r),rc(e,Xe()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Ls,hc(e,0),uc(e,r),rc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,js,qs);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=zs+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,js,qs),t);break}wc(e,js,qs);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Is(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,js,qs),r);break}wc(e,js,qs);break;default:throw Error(a(329))}}}return rc(e,Xe()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=js,js=n,null!==t&&oc(t)),e}function oc(e){null===js?js=e:js.push.apply(js,e)}function uc(e,t){for(t&=~Us,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Cs))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ls,hc(e,0),uc(e,t),rc(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,js,qs),rc(e,Xe()),null}function cc(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&(Bs=Xe()+500,Vi&&Bi())}}function lc(e){null!==Qs&&0===Qs.tag&&0===(6&Cs)&&xc();var t=Cs;Cs|=1;var n=Ts.transition,r=kt;try{if(Ts.transition=null,kt=1,e)return e()}finally{kt=r,Ts.transition=n,0===(6&(Cs=t))&&Bi()}}function fc(){Ds=Os.current,Ei(Os)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ns)for(n=Ns.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Ei(Ai),Ei(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(uo);break;case 10:xa(r.type._context);break;case 22:case 23:fc()}n=n.return}if(As=e,Ns=e=Oc(e.current,null),Ps=Ds=t,Rs=0,Ls=null,Us=Fs=Ms=0,js=Vs=null,null!==Sa){for(t=0;t<Sa.length;t++)if(null!==(r=(n=Sa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Sa=null}return e}function dc(e,t){for(;;){var n=Ns;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,bo=0,Ss.current=null,null===n||null===n.return){Rs=1,Ls=t,Ns=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ps,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Rs&&(Rs=2),null===Vs?Vs=[o]:Vs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hs||!Hs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,Ns===n&&null!==n&&(Ns=n=n.return);continue}break}}function pc(){var e=Es.current;return Es.current=ou,null===e?ou:e}function vc(){0!==Rs&&3!==Rs&&2!==Rs||(Rs=4),null===As||0===(268435455&Ms)&&0===(268435455&Fs)||uc(As,Ps)}function mc(e,t){var n=Cs;Cs|=2;var r=pc();for(As===e&&Ps===t||(qs=null,hc(e,t));;)try{yc();break}catch(i){dc(e,i)}if(wa(),Cs=n,Es.current=r,null!==Ns)throw Error(a(261));return As=null,Ps=0,Rs}function yc(){for(;null!==Ns;)kc(Ns)}function gc(){for(;null!==Ns&&!$e();)kc(Ns)}function kc(e){var t=_s(e.alternate,e,Ds);e.memoizedProps=e.pendingProps,null===t?bc(e):Ns=t,Ss.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wu(n,t,Ds)))return void(Ns=n)}else{if(null!==(n=Qu(n,t)))return n.flags&=32767,void(Ns=n);if(null===e)return Rs=6,void(Ns=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ns=t);Ns=t=e}while(null!==t);0===Rs&&(Rs=5)}function wc(e,t,n){var r=kt,i=Ts.transition;try{Ts.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Qs);if(0!==(6&Cs))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===As&&(Ns=As=null,Ps=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ws||(Ws=!0,Ac(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ts.transition,Ts.transition=null;var u=kt;kt=1;var s=Cs;Cs|=4,Ss.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Ju=t;null!==Ju;)if(e=(t=Ju).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ju=e;else for(;null!==Ju;){t=Ju;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ic(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Ju=e;break}Ju=t.return}v=ts,ts=!1}(e,n),ms(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,gs(n,e,i),Ye(),Cs=s,kt=u,Ts.transition=o}else e.current=n;if(Ws&&(Ws=!1,Qs=e,$s=i),o=e.pendingLanes,0===o&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ks)throw Ks=!1,e=Gs,Gs=null,e;0!==(1&$s)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Xs?Ys++:(Ys=0,Xs=e):Ys=0,Bi()}(e,t,n,r)}finally{Ts.transition=i,kt=r}return null}function xc(){if(null!==Qs){var e=bt($s),t=Ts.transition,n=kt;try{if(Ts.transition=null,kt=16>e?16:e,null===Qs)var r=!1;else{if(e=Qs,Qs=null,$s=0,0!==(6&Cs))throw Error(a(331));var i=Cs;for(Cs|=4,Ju=e.current;null!==Ju;){var o=Ju,u=o.child;if(0!==(16&Ju.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Ju=l;null!==Ju;){var f=Ju;switch(f.tag){case 0:case 11:case 15:ns(8,f,o)}var h=f.child;if(null!==h)h.return=f,Ju=h;else for(;null!==Ju;){var d=(f=Ju).sibling,p=f.return;if(as(f),f===l){Ju=null;break}if(null!==d){d.return=p,Ju=d;break}Ju=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Ju=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Ju=u;else e:for(;null!==Ju;){if(0!==(2048&(o=Ju).flags))switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Ju=g;break e}Ju=o.return}}var k=e.current;for(Ju=k;null!==Ju;){var b=(u=Ju).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Ju=b;else e:for(u=k;null!==Ju;){if(0!==(2048&(s=Ju).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(x){Ic(s,s.return,x)}if(s===u){Ju=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Ju=w;break e}Ju=s.return}}if(Cs=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Ts.transition=t}}return!1}function _c(e,t,n){e=Ra(e,t=pu(0,t=lu(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Ic(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=Ra(t,e=vu(t,e=lu(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,As===e&&(Ps&n)===n&&(4===Rs||3===Rs&&(130023424&Ps)===Ps&&500>Xe()-zs?hc(e,0):Us|=n),rc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Aa(e,t))&&(yt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Sc(e,n)}function Ac(e,t){return We(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Nc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Dc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Lc(n.children,i,o,t);case I:u=8,i|=8;break;case E:return(e=Pc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case A:return(e=Pc(13,n,t,i)).elementType=A,e.lanes=o,e;case N:return(e=Pc(19,n,t,i)).elementType=N,e.lanes=o,e;case O:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case T:u=9;break e;case C:u=11;break e;case P:u=14;break e;case D:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function zc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Bc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Di(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=jc(n,r,!0,e,0,a,0,u,s)).context=Bc(null),n=e.current,(a=Oa(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Ra(n,a,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function Kc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ra(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}_s=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Nu(t),da();break;case 5:ao(t);break;case 1:Di(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fu(e,t,n):(Si(uo,1&uo.current),null!==(e=Ku(e,t,n))?e.sibling:null);Si(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return Ku(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qu(e,t),e=t.pendingProps;var i=Pi(t,Ci.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Pa(t),i.updater=za,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Au(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=_u(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Nu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Da(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pu(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Pu(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ku(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Su(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Si(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ai.current){t=Ku(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Oa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_a(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),_a(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Ea(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),_u(e,t,r,i=ma(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),qu(e,t),t.tag=1,Di(r)?(e=!0,Mi(t)):e=!1,Ia(t,n),qa(t,r,i),Ga(t,r,i,n),Au(null,t,r,!0,e,n);case 19:return Bu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Gc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Gc(s);u.call(e)}}var s=jc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),lc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Gc(o)}Yc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},Yc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Kc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,Xe()),0===(6&Cs)&&(Bs=Xe()+500,Bi()))}break;case 13:lc((function(){var t=Aa(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Wc(e,1)}},xt=function(e){if(13===e.tag){var t=Aa(e,134217728);if(null!==t)nc(t,e,134217728,ec());Wc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),n=Aa(e,t);if(null!==n)nc(n,e,t,ec());Wc(e,t)}},It=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));W(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ae=lc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Se,Te,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return zc(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},372:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case u:case o:case h:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case v:case p:case s:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference"),t.isContextConsumer=function(e){return y(e)===c}},441:function(e,t,n){"use strict";e.exports=n(372)},195:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case v:case s:return e;default:return t}}case i:return t}}}function x(e){return w(e)===f}},228:function(e,t,n){"use strict";n(195)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=A(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=A(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},O={transition:null},R={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:O,ReactCurrentOwner:_};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},896:function(e,t,n){!function(e){"use strict";function t(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function r(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function i(e,t,n){i.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function a(e,t){a.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function o(e,t){o.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function u(e,t,n){u.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function s(e,t,n){var r=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,r),e}function c(e){var t="undefined"==typeof e?"undefined":N(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function l(e,t,n,r,f,h,d){d=d||[];var p=(f=f||[]).slice(0);if("undefined"!=typeof h){if(r){if("function"==typeof r&&r(p,h))return;if("object"===("undefined"==typeof r?"undefined":N(r))){if(r.prefilter&&r.prefilter(p,h))return;if(r.normalize){var v=r.normalize(p,h,e,t);v&&(e=v[0],t=v[1])}}}p.push(h)}"regexp"===c(e)&&"regexp"===c(t)&&(e=e.toString(),t=t.toString());var m="undefined"==typeof e?"undefined":N(e),y="undefined"==typeof t?"undefined":N(t),g="undefined"!==m||d&&d[d.length-1].lhs&&d[d.length-1].lhs.hasOwnProperty(h),k="undefined"!==y||d&&d[d.length-1].rhs&&d[d.length-1].rhs.hasOwnProperty(h);if(!g&&k)n(new a(p,t));else if(!k&&g)n(new o(p,e));else if(c(e)!==c(t))n(new i(p,e,t));else if("date"===c(e)&&e-t!==0)n(new i(p,e,t));else if("object"===m&&null!==e&&null!==t)if(d.filter((function(t){return t.lhs===e})).length)e!==t&&n(new i(p,e,t));else{if(d.push({lhs:e,rhs:t}),Array.isArray(e)){var b;for(e.length,b=0;b<e.length;b++)b>=t.length?n(new u(p,b,new o(void 0,e[b]))):l(e[b],t[b],n,r,p,b,d);for(;b<t.length;)n(new u(p,b,new a(void 0,t[b++])))}else{var w=Object.keys(e),x=Object.keys(t);w.forEach((function(i,a){var o=x.indexOf(i);o>=0?(l(e[i],t[i],n,r,p,i,d),x=s(x,o)):l(e[i],void 0,n,r,p,i,d)})),x.forEach((function(e){l(void 0,t[e],n,r,p,e,d)}))}d.length=d.length-1}else e!==t&&("number"===m&&isNaN(e)&&isNaN(t)||n(new i(p,e,t)))}function f(e,t,n,r){return r=r||[],l(e,t,(function(e){e&&r.push(e)}),n),r.length?r:void 0}function h(e,t,n){if(n.path&&n.path.length){var r,i=e[t],a=n.path.length-1;for(r=0;r<a;r++)i=i[n.path[r]];switch(n.kind){case"A":h(i[n.path[r]],n.index,n.item);break;case"D":delete i[n.path[r]];break;case"E":case"N":i[n.path[r]]=n.rhs}}else switch(n.kind){case"A":h(e[t],n.index,n.item);break;case"D":e=s(e,t);break;case"E":case"N":e[t]=n.rhs}return e}function d(e,t,n){if(e&&t&&n&&n.kind){for(var r=e,i=-1,a=n.path?n.path.length-1:0;++i<a;)"undefined"==typeof r[n.path[i]]&&(r[n.path[i]]="number"==typeof n.path[i]?[]:{}),r=r[n.path[i]];switch(n.kind){case"A":h(n.path?r[n.path[i]]:r,n.index,n.item);break;case"D":delete r[n.path[i]];break;case"E":case"N":r[n.path[i]]=n.rhs}}}function p(e,t,n){if(n.path&&n.path.length){var r,i=e[t],a=n.path.length-1;for(r=0;r<a;r++)i=i[n.path[r]];switch(n.kind){case"A":p(i[n.path[r]],n.index,n.item);break;case"D":case"E":i[n.path[r]]=n.lhs;break;case"N":delete i[n.path[r]]}}else switch(n.kind){case"A":p(e[t],n.index,n.item);break;case"D":case"E":e[t]=n.lhs;break;case"N":e=s(e,t)}return e}function v(e,t,n){if(e&&t&&n&&n.kind){var r,i,a=e;for(i=n.path.length-1,r=0;r<i;r++)"undefined"==typeof a[n.path[r]]&&(a[n.path[r]]={}),a=a[n.path[r]];switch(n.kind){case"A":p(a[n.path[r]],n.index,n.item);break;case"D":case"E":a[n.path[r]]=n.lhs;break;case"N":delete a[n.path[r]]}}}function m(e,t,n){e&&t&&l(e,t,(function(r){n&&!n(e,t,r)||d(e,t,r)}))}function y(e){return"color: "+O[e].color+"; font-weight: bold"}function g(e){var t=e.kind,n=e.path,r=e.lhs,i=e.rhs,a=e.index,o=e.item;switch(t){case"E":return[n.join("."),r,"\u2192",i];case"N":return[n.join("."),i];case"D":return[n.join(".")];case"A":return[n.join(".")+"["+a+"]",o];default:return[]}}function k(e,t,n,r){var i=f(e,t);try{r?n.groupCollapsed("diff"):n.group("diff")}catch(e){n.log("diff")}i?i.forEach((function(e){var t=e.kind,r=g(e);n.log.apply(n,["%c "+O[t].text,y(t)].concat(P(r)))})):n.log("\u2014\u2014 no diff \u2014\u2014");try{n.groupEnd()}catch(e){n.log("\u2014\u2014 diff end \u2014\u2014 ")}}function b(e,t,n,r){switch("undefined"==typeof e?"undefined":N(e)){case"object":return"function"==typeof e[r]?e[r].apply(e,P(n)):e[r];case"function":return e(t);default:return e}}function w(e){var t=e.timestamp,n=e.duration;return function(e,r,i){var a=["action"];return a.push("%c"+String(e.type)),t&&a.push("%c@ "+r),n&&a.push("%c(in "+i.toFixed(2)+" ms)"),a.join(" ")}}function x(e,t){var n=t.logger,r=t.actionTransformer,i=t.titleFormatter,a=void 0===i?w(t):i,o=t.collapsed,u=t.colors,s=t.level,c=t.diff,l="undefined"==typeof t.titleFormatter;e.forEach((function(i,f){var h=i.started,d=i.startedTime,p=i.action,v=i.prevState,m=i.error,y=i.took,g=i.nextState,w=e[f+1];w&&(g=w.prevState,y=w.started-h);var x=r(p),_="function"==typeof o?o((function(){return g}),p,i):o,I=C(d),E=u.title?"color: "+u.title(x)+";":"",S=["color: gray; font-weight: lighter;"];S.push(E),t.timestamp&&S.push("color: gray; font-weight: lighter;"),t.duration&&S.push("color: gray; font-weight: lighter;");var T=a(x,I,y);try{_?u.title&&l?n.groupCollapsed.apply(n,["%c "+T].concat(S)):n.groupCollapsed(T):u.title&&l?n.group.apply(n,["%c "+T].concat(S)):n.group(T)}catch(e){n.log(T)}var A=b(s,x,[v],"prevState"),N=b(s,x,[x],"action"),P=b(s,x,[m,v],"error"),D=b(s,x,[g],"nextState");if(A)if(u.prevState){var O="color: "+u.prevState(v)+"; font-weight: bold";n[A]("%c prev state",O,v)}else n[A]("prev state",v);if(N)if(u.action){var R="color: "+u.action(x)+"; font-weight: bold";n[N]("%c action    ",R,x)}else n[N]("action    ",x);if(m&&P)if(u.error){var L="color: "+u.error(m,v)+"; font-weight: bold;";n[P]("%c error     ",L,m)}else n[P]("error     ",m);if(D)if(u.nextState){var M="color: "+u.nextState(g)+"; font-weight: bold";n[D]("%c next state",M,g)}else n[D]("next state",g);c&&k(v,g,n,_);try{n.groupEnd()}catch(e){n.log("\u2014\u2014 log end \u2014\u2014")}}))}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},R,e),n=t.logger,r=t.stateTransformer,i=t.errorTransformer,a=t.predicate,o=t.logErrors,u=t.diffPredicate;if("undefined"==typeof n)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(e){return function(t){return e(t)}}};var s=[];return function(e){var n=e.getState;return function(e){return function(c){if("function"==typeof a&&!a(n,c))return e(c);var l={};s.push(l),l.started=A.now(),l.startedTime=new Date,l.prevState=r(n()),l.action=c;var f=void 0;if(o)try{f=e(c)}catch(e){l.error=i(e)}else f=e(c);l.took=A.now()-l.started,l.nextState=r(n());var h=t.diff&&"function"==typeof u?u(n,c):t.diff;if(x(s,Object.assign({},t,{diff:h})),s.length=0,l.error)throw l.error;return f}}}}var I,E,S=function(e,t){return new Array(t+1).join(e)},T=function(e,t){return S("0",t-e.toString().length)+e},C=function(e){return T(e.getHours(),2)+":"+T(e.getMinutes(),2)+":"+T(e.getSeconds(),2)+"."+T(e.getMilliseconds(),3)},A="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},D=[];I="object"===("undefined"==typeof n.g?"undefined":N(n.g))&&n.g?n.g:"undefined"!=typeof window?window:{},(E=I.DeepDiff)&&D.push((function(){"undefined"!=typeof E&&I.DeepDiff===f&&(I.DeepDiff=E,E=void 0)})),t(i,r),t(a,r),t(o,r),t(u,r),Object.defineProperties(f,{diff:{value:f,enumerable:!0},observableDiff:{value:l,enumerable:!0},applyDiff:{value:m,enumerable:!0},applyChange:{value:d,enumerable:!0},revertChange:{value:v,enumerable:!0},isConflict:{value:function(){return"undefined"!=typeof E},enumerable:!0},noConflict:{value:function(){return D&&(D.forEach((function(e){e()})),D=null),f},enumerable:!0}});var O={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},R={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,n=e.getState;return"function"==typeof t||"function"==typeof n?_()({dispatch:t,getState:n}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};e.defaults=R,e.createLogger=_,e.logger=L,e.default=L,Object.defineProperty(e,"__esModule",{value:!0})}(t)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,O(x);else{var t=r(l);null!==t&&R(w,t.startTime-e)}}function x(e,n){v=!1,m&&(m=!1,g(S),S=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&R(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,I=!1,E=null,S=-1,T=5,C=-1;function A(){return!(t.unstable_now()-C<T)}function N(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?_():(I=!1,E=null)}}else I=!1}if("function"===typeof k)_=function(){k(N)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,D=P.port2;P.port1.onmessage=N,_=function(){D.postMessage(null)}}else _=function(){y(N,0)};function O(e){E=e,I||(I=!0,_())}function R(e,n){S=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(S),S=-1):m=!0,R(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,O(x))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},561:function(e,t,n){"use strict";var r=n(791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,u=r.useLayoutEffect,s=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return u((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),o((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),s(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},595:function(e,t,n){"use strict";var r=n(791),i=n(248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,u=r.useRef,s=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var f=u(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=c((function(){function e(e){if(!s){if(s=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return u=t}return u=e}if(t=u,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,u=n)}var o,u,s=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var d=o(e,f[0],f[1]);return s((function(){h.hasValue=!0,h.value=d}),[d]),l(d),d}},248:function(e,t,n){"use strict";e.exports=n(561)},327:function(e,t,n){"use strict";e.exports=n(595)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Mn},SDK_VERSION:function(){return Kr},_DEFAULT_ENTRY_NAME:function(){return Pr},_addComponent:function(){return Lr},_addOrOverwriteComponent:function(){return Mr},_apps:function(){return Or},_clearComponents:function(){return jr},_components:function(){return Rr},_getProvider:function(){return Ur},_registerComponent:function(){return Fr},_removeServiceInstance:function(){return Vr},deleteApp:function(){return Qr},getApp:function(){return Hr},getApps:function(){return Wr},initializeApp:function(){return Gr},onLog:function(){return Xr},registerVersion:function(){return Yr},setLogLevel:function(){return Jr}});var t=n(791),r=n(250);function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function u(e){return"/"===e.charAt(0)}function s(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var c=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],a=e&&u(e),o=t&&u(t),c=a||o;if(e&&u(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var l=i[i.length-1];n="."===l||".."===l||""===l}else n=!1;for(var f=0,h=i.length;h>=0;h--){var d=i[h];"."===d?s(i,h):".."===d?(s(i,h),f++):f&&(s(i,h),f--)}if(!c)for(;f--;f)i.unshift("..");!c||""===i[0]||i[0]&&u(i[0])||i.unshift("");var p=i.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p};function l(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var f=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));if("object"===typeof t||"object"===typeof n){var r=l(t),i=l(n);return r!==t||i!==n?e(r,i):Object.keys(Object.assign({},t,n)).every((function(r){return e(t[r],n[r])}))}return!1},h="Invariant failed";function d(e,t){if(!e)throw new Error(h)}function p(e){return"/"===e.charAt(0)?e:"/"+e}function v(e){return"/"===e.charAt(0)?e.substr(1):e}function m(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function y(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function g(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function k(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=o({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(a){throw a instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):a}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=c(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function b(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof r?r(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var w=!("undefined"===typeof window||!window.document||!window.document.createElement);function x(e,t){t(window.confirm(e))}var _="popstate",I="hashchange";function E(){try{return window.history.state||{}}catch(e){return{}}}function S(e){void 0===e&&(e={}),w||d(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,a=i.forceRefresh,u=void 0!==a&&a,s=i.getUserConfirmation,c=void 0===s?x:s,l=i.keyLength,f=void 0===l?6:l,h=e.basename?y(p(e.basename)):"";function v(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname+i.search+i.hash;return h&&(a=m(a,h)),k(a,r,n)}function S(){return Math.random().toString(36).substr(2,f)}var T=b();function C(e){o(j,e),j.length=t.length,T.notifyListeners(j.location,j.action)}function A(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||D(v(e.state))}function N(){D(v(E()))}var P=!1;function D(e){if(P)P=!1,C();else{T.confirmTransitionTo(e,"POP",c,(function(t){t?C({action:"POP",location:e}):function(e){var t=j.location,n=R.indexOf(t.key);-1===n&&(n=0);var r=R.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(P=!0,M(i))}(e)}))}}var O=v(E()),R=[O.key];function L(e){return h+g(e)}function M(e){t.go(e)}var F=0;function U(e){1===(F+=e)&&1===e?(window.addEventListener(_,A),r&&window.addEventListener(I,N)):0===F&&(window.removeEventListener(_,A),r&&window.removeEventListener(I,N))}var V=!1;var j={length:t.length,action:"POP",location:O,createHref:L,push:function(e,r){var i="PUSH",a=k(e,r,S(),j.location);T.confirmTransitionTo(a,i,c,(function(e){if(e){var r=L(a),o=a.key,s=a.state;if(n)if(t.pushState({key:o,state:s},null,r),u)window.location.href=r;else{var c=R.indexOf(j.location.key),l=R.slice(0,c+1);l.push(a.key),R=l,C({action:i,location:a})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",a=k(e,r,S(),j.location);T.confirmTransitionTo(a,i,c,(function(e){if(e){var r=L(a),o=a.key,s=a.state;if(n)if(t.replaceState({key:o,state:s},null,r),u)window.location.replace(r);else{var c=R.indexOf(j.location.key);-1!==c&&(R[c]=a.key),C({action:i,location:a})}else window.location.replace(r)}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);var t=T.setPrompt(e);return V||(U(1),V=!0),function(){return V&&(V=!1,U(-1)),t()}},listen:function(e){var t=T.appendListener(e);return U(1),function(){U(-1),t()}}};return j}var T="hashchange",C={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+v(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:v,decodePath:p},slash:{encodePath:p,decodePath:p}};function A(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function N(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function P(e){window.location.replace(A(window.location.href)+"#"+e)}function D(e){void 0===e&&{},w||d(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?x:r,a=n.hashType,u=void 0===a?"slash":a,s=e.basename?y(p(e.basename)):"",c=C[u],l=c.encodePath,f=c.decodePath;function h(){var e=f(N());return s&&m(e,s),k(e)}var v=b();function _(e){o(j,e),j.length=t.length,v.notifyListeners(j.location,j.action)}var I=!1,E=null;function S(){var e=N(),t=l(e);if(e!==t)P(t);else{var n=h(),r=j.location;if(!I&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(r,n))return;if(E===g(n))return;null,function(e){if(I)!1,_();else{var t="POP";v.confirmTransitionTo(e,t,i,(function(n){n?_({action:t,location:e}):function(e){var t=j.location,n=L.lastIndexOf(g(t));-1===n&&0;var r=L.lastIndexOf(g(e));-1===r&&0;var i=n-r;i&&(!0,M(i))}(e)}))}}(n)}}var D=N(),O=l(D);D!==O&&P(O);var R=h(),L=[g(R)];function M(e){t.go(e)}var F=0;function U(e){1===(F+=e)&&1===e?window.addEventListener(T,S):0===F&&window.removeEventListener(T,S)}var V=!1;var j={length:t.length,action:"POP",location:R,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&A(window.location.href),n+"#"+l(s+g(e))},push:function(e,t){var n="PUSH",r=k(e,void 0,void 0,j.location);v.confirmTransitionTo(r,n,i,(function(e){if(e){var t=g(r),i=l(s+t);if(N()!==i){t,function(e){window.location.hash=e}(i);var a=L.lastIndexOf(g(j.location)),o=L.slice(0,a+1);o.push(t),o,_({action:n,location:r})}else _()}}))},replace:function(e,t){var n="REPLACE",r=k(e,void 0,void 0,j.location);v.confirmTransitionTo(r,n,i,(function(e){if(e){var t=g(r),i=l(s+t);N()!==i&&(t,P(i));var a=L.indexOf(g(j.location));-1!==a&&(L[a]=t),_({action:n,location:r})}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&!1;var t=v.setPrompt(e);return V||(U(1),!0),function(){return V&&(!1,U(-1)),t()}},listen:function(e){var t=v.appendListener(e);return U(1),function(){U(-1),t()}}};return j}function O(e,t,n){return Math.min(Math.max(e,t),n)}function R(e){void 0===e&&{};var t=e,n=t.getUserConfirmation,r=t.initialEntries,i=void 0===r?["/"]:r,a=t.initialIndex,u=void 0===a?0:a,s=t.keyLength,c=void 0===s?6:s,l=b();function f(e){o(y,e),y.length=y.entries.length,l.notifyListeners(y.location,y.action)}function h(){return Math.random().toString(36).substr(2,c)}var d=O(u,0,i.length-1),p=i.map((function(e){return k(e,void 0,"string"===typeof e?h():e.key||h())})),v=g;function m(e){var t=O(y.index+e,0,y.entries.length-1),r=y.entries[t];l.confirmTransitionTo(r,"POP",n,(function(e){e?f({action:"POP",location:r,index:t}):f()}))}var y={length:p.length,action:"POP",location:p[d],index:d,entries:p,createHref:v,push:function(e,t){var r="PUSH",i=k(e,t,h(),y.location);l.confirmTransitionTo(i,r,n,(function(e){if(e){var t=y.index+1,n=y.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),f({action:r,location:i,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",i=k(e,t,h(),y.location);l.confirmTransitionTo(i,r,n,(function(e){e&&(y.entries[y.index]=i,f({action:r,location:i}))}))},go:m,goBack:function(){m(-1)},goForward:function(){m(1)},canGo:function(e){var t=y.index+e;return t>=0&&t<y.entries.length},block:function(e){return void 0===e&&!1,l.setPrompt(e)},listen:function(e){return l.appendListener(e)}};return y}var L=n(7),M=n.n(L),F=1073741823,U="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};function V(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var j=t.createContext||function(e,n){var r,i,o="__create-react-context-"+function(){var e="__global_unique_id__";return U[e]=(U[e]||0)+1}()+"__",u=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).emitter=V(t.props.value),t}a(t,e);var r=t.prototype;return r.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var t,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,i)?(t="function"===typeof n?n(r,i):F,0!==(t|=0)&&this.emitter.set(e.value,t)):t=0}},r.render=function(){return this.props.children},t}(t.Component);u.childContextTypes=((r={})[o]=M().object.isRequired,r);var s=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}a(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?F:t},r.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?F:e},r.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},r.getValue=function(){return this.context[o]?this.context[o].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(t.Component);return s.contextTypes=((i={})[o]=M().object,i),{Provider:u,Consumer:s}},z=j,B=n(151),q=n.n(B);n(228);function K(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var G=n(110),H=n.n(G),W=function(e){var t=z();return t.displayName=e,t},Q=W("Router-History"),$=function(e){var t=z();return t.displayName=e,t},Y=$("Router"),X=function(e){function n(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}a(n,e),n.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var r=n.prototype;return r.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&this.unlisten()},r.render=function(){return t.createElement(Y.Provider,{value:{history:this.props.history,location:this.state.location,match:n.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},t.createElement(Q.Provider,{children:this.props.children||null,value:this.props.history}))},n}(t.Component);t.Component;var J=function(e){function t(){return e.apply(this,arguments)||this}a(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(t.Component);var Z={},ee=0;function te(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(Z[e])return Z[e];var t=q().compile(e);return ee<1e4&&(Z[e]=t,ee++),t}(e)(t,{pretty:!0})}function ne(e){var n=e.computedMatch,r=e.to,i=e.push,a=void 0!==i&&i;return t.createElement(Y.Consumer,null,(function(e){e||d(!1);var i=e.history,u=e.staticContext,s=a?i.push:i.replace,c=k(n?"string"===typeof r?te(r,n.params):o({},r,{pathname:te(r.pathname,n.params)}):r);return u?(s(c),null):t.createElement(J,{onMount:function(){s(c)},onUpdate:function(e,t){var n=k(t.to);(function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&f(e.state,t.state)})(n,o({},c,{key:n.key}))||s(c)},to:r})}))}var re={},ie=0;function ae(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,a=void 0!==i&&i,o=n.strict,u=void 0!==o&&o,s=n.sensitive,c=void 0!==s&&s;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=re[n]||(re[n]={});if(r[e])return r[e];var i=[],a={regexp:q()(e,i,t),keys:i};return ie<1e4&&(r[e]=a,ie++),a}(n,{end:a,strict:u,sensitive:c}),i=r.regexp,o=r.keys,s=i.exec(e);if(!s)return null;var l=s[0],f=s.slice(1),h=e===l;return a&&!h?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:h,params:o.reduce((function(e,t,n){return e[t.name]=f[n],e}),{})}}),null)}var oe=function(e){function n(){return e.apply(this,arguments)||this}return a(n,e),n.prototype.render=function(){var e=this;return t.createElement(Y.Consumer,null,(function(n){n||d(!1);var r=e.props.location||n.location,i=o({},n,{location:r,match:e.props.computedMatch?e.props.computedMatch:e.props.path?ae(r.pathname,e.props):n.match}),a=e.props,u=a.children,s=a.component,c=a.render;return Array.isArray(u)&&0===u.length&&(u=null),t.createElement(Y.Provider,{value:i},i.match?u?"function"===typeof u?u(i):u:s?t.createElement(s,i):c?c(i):null:"function"===typeof u?u(i):null)}))},n}(t.Component);function ue(e){return"/"===e.charAt(0)?e:"/"+e}function se(e,t){if(!e)return t;var n=ue(e);return 0!==t.pathname.indexOf(n)?t:o({},t,{pathname:t.pathname.substr(n.length)})}function ce(e){return"string"===typeof e?e:g(e)}function le(e){return function(){d(!1)}}function fe(){}t.Component;var he=function(e){function n(){return e.apply(this,arguments)||this}return a(n,e),n.prototype.render=function(){var e=this;return t.createElement(Y.Consumer,null,(function(n){n||d(!1);var r,i,a=e.props.location||n.location;return t.Children.forEach(e.props.children,(function(e){if(null==i&&t.isValidElement(e)){r=e;var u=e.props.path||e.props.from;i=u?ae(a.pathname,o({},e.props,{path:u})):n.match}})),i?t.cloneElement(r,{location:a,computedMatch:i}):null}))},n}(t.Component);t.useContext;var de=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=S(t.props),t}return a(n,e),n.prototype.render=function(){return t.createElement(X,{history:this.history,children:this.props.children})},n}(t.Component);t.Component;var pe=function(e,t){return"function"===typeof e?e(t):e},ve=function(e,t){return"string"===typeof e?k(e,null,null,t):e},me=function(e){return e},ye=t.forwardRef;"undefined"===typeof ye&&(ye=me);var ge=ye((function(e,n){var r=e.innerRef,i=e.navigate,a=e.onClick,u=K(e,["innerRef","navigate","onClick"]),s=u.target,c=o({},u,{onClick:function(e){try{a&&a(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||s&&"_self"!==s||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return c.ref=me!==ye&&n||r,t.createElement("a",c)}));var ke=ye((function(e,n){var r=e.component,i=void 0===r?ge:r,a=e.replace,u=e.to,s=e.innerRef,c=K(e,["component","replace","to","innerRef"]);return t.createElement(Y.Consumer,null,(function(e){e||d(!1);var r=e.history,l=ve(pe(u,e.location),e.location),f=l?r.createHref(l):"",h=o({},c,{href:f,navigate:function(){var t=pe(u,e.location);(a?r.replace:r.push)(t)}});return me!==ye?h.ref=n||s:h.innerRef=s,t.createElement(i,h)}))})),be=function(e){return e},we=t.forwardRef;"undefined"===typeof we&&(we=be);we((function(e,n){var r=e["aria-current"],i=void 0===r?"page":r,a=e.activeClassName,u=void 0===a?"active":a,s=e.activeStyle,c=e.className,l=e.exact,f=e.isActive,h=e.location,p=e.sensitive,v=e.strict,m=e.style,y=e.to,g=e.innerRef,k=K(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return t.createElement(Y.Consumer,null,(function(e){e||d(!1);var r=h||e.location,a=ve(pe(y,r),r),b=a.pathname,w=b&&b.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),x=w?ae(r.pathname,{path:w,exact:l,sensitive:p,strict:v}):null,_=!!(f?f(x,r):x),I=_?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(c,u):c,E=_?o({},m,{},s):m,S=o({"aria-current":_&&i||null,className:I,style:E,to:a},k);return be!==we?S.ref=n||g:S.innerRef=g,t.createElement(ke,S)}))}));function xe(e){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function _e(){_e=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(C){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),u=new E(i||[]);return r(o,"_invoke",{value:w(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,a,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(S([])));y&&y!==t&&n.call(y,a)&&(v=y);var g=p.prototype=h.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==xe(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=x(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function S(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=p,r(g,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},k(b.prototype),s(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(g),s(g,u,"Generator"),s(g,a,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=S,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function Ie(e){var t=function(e,t){if("object"!==xe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==xe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===xe(t)?t:String(t)}function Ee(e,t,n){return(t=Ie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){Ee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ce(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function Ae(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Ce(a,r,i,o,u,"next",e)}function u(e){Ce(a,r,i,o,u,"throw",e)}o(void 0)}))}}function Ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ie(r.key),r)}}function De(e,t,n){return t&&Pe(e.prototype,t),n&&Pe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Oe(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}function Re(e){return Re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Re(e)}function Le(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fe(e,t){if(t&&("object"===xe(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Me(e)}function Ue(e){var t=Le();return function(){var n,r=Re(e);if(t){var i=Re(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Fe(this,n)}}var Ve=n(248),je=n(327),ze=n(164);var Be=function(e){e()},qe=function(){return Be},Ke=(0,t.createContext)(null);var Ge=function(){throw new Error("uSES not initialized!")};function He(e){if(Array.isArray(e))return e}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qe(e,t){if(e){if("string"===typeof e)return We(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?We(e,t):void 0}}function $e(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ye(e,t){return He(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||Qe(e,t)||$e()}function Xe(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Je(e){return function(e){if(Array.isArray(e))return We(e)}(e)||Xe(e)||Qe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ze=n(441),et=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function tt(e,t,n,r,i){var a,o,u,s,c,l=i.areStatesEqual,f=i.areOwnPropsEqual,h=i.areStatePropsEqual,d=!1;function p(i,d){var p=!f(d,o),v=!l(i,a,d,o);return a=i,o=d,p&&v?(u=e(a,o),t.dependsOnOwnProps&&(s=t(r,o)),c=n(u,s,o)):p?(e.dependsOnOwnProps&&(u=e(a,o)),t.dependsOnOwnProps&&(s=t(r,o)),c=n(u,s,o)):v?function(){var t=e(a,o),r=!h(t,u);return u=t,r&&(c=n(u,s,o)),c}():c}return function(i,l){return d?p(i,l):(u=e(a=i,o=l),s=t(r,o),c=n(u,s,o),d=!0,c)}}function nt(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,a=K(t,et);return tt(n(e,a),r(e,a),i(e,a),e,a)}function rt(e){return function(t){var n=e(t);function r(){return n}return r.dependsOnOwnProps=!1,r}}function it(e){return e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function at(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e,void 0)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=it(e);var i=r(t,n);return"function"===typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=it(i),i=r(t,n)),i},r}}function ot(e,t){return function(n,r){throw new Error("Invalid value of type ".concat(typeof e," for ").concat(t," argument when connecting component ").concat(r.wrappedComponentName,"."))}}function ut(e){return e&&"object"===typeof e?rt((function(t){return function(e,t){var n={},r=function(){var r=e[i];"function"===typeof r&&(n[i]=function(){return t(r.apply(void 0,arguments))})};for(var i in e)r();return n}(e,t)})):e?"function"===typeof e?at(e):ot(e,"mapDispatchToProps"):rt((function(e){return{dispatch:e}}))}function st(e){return e?"function"===typeof e?at(e):ot(e,"mapStateToProps"):rt((function(){return{}}))}function ct(e,t,n){return o({},n,e,t)}function lt(e){return e?"function"===typeof e?function(e){return function(t,n){n.displayName;var r,i=n.areMergedPropsEqual,a=!1;return function(t,n,o){var u=e(t,n,o);return a?i(u,r)||(r=u):(a=!0,r=u),r}}}(e):ot(e,"mergeProps"):function(){return ct}}var ft={notify:function(){},get:function(){return[]}};function ht(e,t){var n,r=ft;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=qe(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=ft)},getListeners:function(){return r}};return o}var dt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?t.useLayoutEffect:t.useEffect;function pt(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function vt(e,t){if(pt(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!pt(e[n[i]],t[n[i]]))return!1;return!0}var mt=["reactReduxForwardedRef"],yt=Ge,gt=[null,null];function kt(e,t,n){dt((function(){return e.apply(void 0,Je(t))}),n)}function bt(e,t,n,r,i,a){e.current=r,n.current=!1,i.current&&(i.current=null,a())}function wt(e,t,n,r,i,a,o,u,s,c,l){if(!e)return function(){};var f=!1,h=null,d=function(){if(!f&&u.current){var e,n,d=t.getState();try{e=r(d,i.current)}catch(p){n=p,h=p}n||(h=null),e===a.current?o.current||c():(a.current=e,s.current=e,o.current=!0,l())}};n.onStateChange=d,n.trySubscribe(),d();return function(){if(f=!0,n.tryUnsubscribe(),n.onStateChange=null,h)throw h}}function xt(e,t){return e===t}var _t=function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(i.pure,i.areStatesEqual),u=void 0===a?xt:a,s=i.areOwnPropsEqual,c=void 0===s?vt:s,l=i.areStatePropsEqual,f=void 0===l?vt:l,h=i.areMergedPropsEqual,d=void 0===h?vt:h,p=i.forwardRef,v=void 0!==p&&p,m=i.context,y=void 0===m?Ke:m,g=y,k=st(e),b=ut(n),w=lt(r),x=Boolean(e),_=function(e){var n=e.displayName||e.name||"Component",r="Connect(".concat(n,")"),i={shouldHandleStateChanges:x,displayName:r,wrappedComponentName:n,WrappedComponent:e,initMapStateToProps:k,initMapDispatchToProps:b,initMergeProps:w,areStatesEqual:u,areStatePropsEqual:f,areOwnPropsEqual:c,areMergedPropsEqual:d};function a(n){var r=(0,t.useMemo)((function(){var e=n.reactReduxForwardedRef,t=K(n,mt);return[n.context,e,t]}),[n]),a=Ye(r,3),u=a[0],s=a[1],c=a[2],l=(0,t.useMemo)((function(){return u&&u.Consumer&&(0,Ze.isContextConsumer)(t.createElement(u.Consumer,null))?u:g}),[u,g]),f=(0,t.useContext)(l),h=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch),d=Boolean(f)&&Boolean(f.store);var p=h?n.store:f.store,v=d?f.getServerState:p.getState,m=(0,t.useMemo)((function(){return nt(p.dispatch,i)}),[p]),y=(0,t.useMemo)((function(){if(!x)return gt;var e=ht(p,h?void 0:f.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[p,h,f]),k=Ye(y,2),b=k[0],w=k[1],_=(0,t.useMemo)((function(){return h?f:o({},f,{subscription:b})}),[h,f,b]),I=(0,t.useRef)(),E=(0,t.useRef)(c),S=(0,t.useRef)(),T=(0,t.useRef)(!1),C=((0,t.useRef)(!1),(0,t.useRef)(!1)),A=(0,t.useRef)();dt((function(){return C.current=!0,function(){C.current=!1}}),[]);var N,P=(0,t.useMemo)((function(){return function(){return S.current&&c===E.current?S.current:m(p.getState(),c)}}),[p,c]),D=(0,t.useMemo)((function(){return function(e){return b?wt(x,p,b,m,E,I,T,C,S,w,e):function(){}}}),[b]);kt(bt,[E,I,T,c,S,w]);try{N=yt(D,P,v?function(){return m(v(),c)}:P)}catch(R){throw A.current&&(R.message+="\nThe error may be correlated with this previous error:\n".concat(A.current.stack,"\n\n")),R}dt((function(){A.current=void 0,S.current=void 0,I.current=N}));var O=(0,t.useMemo)((function(){return t.createElement(e,o({},N,{ref:s}))}),[s,e,N]);return(0,t.useMemo)((function(){return x?t.createElement(l.Provider,{value:_},O):O}),[l,O,_])}var s=t.memo(a);if(s.WrappedComponent=e,s.displayName=a.displayName=r,v){var l=t.forwardRef((function(e,n){return t.createElement(s,o({},e,{reactReduxForwardedRef:n}))}));return l.displayName=r,l.WrappedComponent=e,H()(l,e)}return H()(s,e)};return _};var It=function(e){var n=e.store,r=e.context,i=e.children,a=e.serverState,o=(0,t.useMemo)((function(){var e=ht(n);return{store:n,subscription:e,getServerState:a?function(){return a}:void 0}}),[n,a]),u=(0,t.useMemo)((function(){return n.getState()}),[n]);dt((function(){var e=o.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),u!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[o,u]);var s=r||Ke;return t.createElement(s.Provider,{value:o},i)};var Et;!function(e){e}(je.useSyncExternalStoreWithSelector),function(e){yt=e}(Ve.useSyncExternalStore),Et=ze.unstable_batchedUpdates,Be=Et;var St=n(184),Tt=function(e){var t=e.title,n=e.imageUrl,r=e.size;return(0,St.jsxs)("div",{className:"".concat(r," menu-item"),children:[(0,St.jsx)("div",{className:"background-image",style:{backgroundImage:"url(".concat(n,")")}}),(0,St.jsxs)("div",{className:"content",children:[(0,St.jsx)("h1",{className:"title",children:t.toUpperCase()}),(0,St.jsx)("span",{className:"subtitle",children:"SHOP NOW"})]})]})},Ct=[{title:"hats",imageUrl:"https://i.ibb.co/cvpntL1/hats.png",id:1,linkUrl:"shop/hats"},{title:"jackets",imageUrl:"https://i.ibb.co/px2tCc3/jackets.png",id:2,linkUrl:"shop/jackets"},{title:"sneakers",imageUrl:"https://i.ibb.co/0jqHpnp/sneakers.png",id:3,linkUrl:"shop/sneakers"},{title:"womens",imageUrl:"https://i.ibb.co/GCCdy8t/womens.png",size:"large",id:4,linkUrl:"shop/womens"},{title:"mens",imageUrl:"https://i.ibb.co/R70vBrQ/men.png",size:"large",id:5,linkUrl:"shop/mens"}],At=function(){var e=Ye((0,t.useState)([]),2),n=e[0],r=e[1];return(0,t.useEffect)((function(){r(Ct)}),[]),(0,St.jsx)("div",{className:"directory-Menu",children:n.map((function(e){return(0,St.jsx)(Tt,{title:e.title,imageUrl:e.imageUrl,size:e.size},e.title)}))})},Nt=function(){return(0,St.jsx)("div",{className:"homepage",children:(0,St.jsx)(At,{})})};function Pt(e,t){if(null==e)return{};var n,r,i=K(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Dt,Ot,Rt=[{id:1,title:"Hats",routeName:"hats",items:[{id:1,name:"Brown Brim",imageUrl:"https://i.ibb.co/ZYW3VTp/brown-brim.png",price:25},{id:2,name:"Blue Beanie",imageUrl:"https://i.ibb.co/ypkgK0X/blue-beanie.png",price:18},{id:3,name:"Brown Cowboy",imageUrl:"https://i.ibb.co/QdJwgmp/brown-cowboy.png",price:35},{id:4,name:"Grey Brim",imageUrl:"https://i.ibb.co/RjBLWxB/grey-brim.png",price:25},{id:5,name:"Green Beanie",imageUrl:"https://i.ibb.co/YTjW3vF/green-beanie.png",price:18},{id:6,name:"Palm Tree Cap",imageUrl:"https://i.ibb.co/rKBDvJX/palm-tree-cap.png",price:14},{id:7,name:"Red Beanie",imageUrl:"https://i.ibb.co/bLB646Z/red-beanie.png",price:18},{id:8,name:"Wolf Cap",imageUrl:"https://i.ibb.co/1f2nWMM/wolf-cap.png",price:14},{id:9,name:"Blue Snapback",imageUrl:"https://i.ibb.co/X2VJP2W/blue-snapback.png",price:16}]},{id:2,title:"Sneakers",routeName:"sneakers",items:[{id:1,name:"Adidas NMD",imageUrl:"https://i.ibb.co/0s3pdnc/adidas-nmd.png",price:220},{id:2,name:"Adidas Yeezy",imageUrl:"https://i.ibb.co/dJbG1cT/yeezy.png",price:280},{id:3,name:"Black Converse",imageUrl:"https://i.ibb.co/bPmVXyP/black-converse.png",price:110},{id:4,name:"Nike White AirForce",imageUrl:"https://i.ibb.co/1RcFPk0/white-nike-high-tops.png",price:160},{id:5,name:"Nike Red High Tops",imageUrl:"https://i.ibb.co/QcvzydB/nikes-red.png",price:160},{id:6,name:"Nike Brown High Tops",imageUrl:"https://i.ibb.co/fMTV342/nike-brown.png",price:160},{id:7,name:"Air Jordan Limited",imageUrl:"https://i.ibb.co/w4k6Ws9/nike-funky.png",price:190},{id:8,name:"Timberlands",imageUrl:"https://i.ibb.co/Mhh6wBg/timberlands.png",price:200}]},{id:3,title:"Jackets",routeName:"jackets",items:[{id:1,name:"Black Jean Shearling",imageUrl:"https://i.ibb.co/XzcwL5s/black-shearling.png",price:125},{id:2,name:"Blue Jean Jacket",imageUrl:"https://i.ibb.co/mJS6vz0/blue-jean-jacket.png",price:90},{id:3,name:"Grey Jean Jacket",imageUrl:"https://i.ibb.co/N71k1ML/grey-jean-jacket.png",price:90},{id:4,name:"Brown Shearling",imageUrl:"https://i.ibb.co/s96FpdP/brown-shearling.png",price:165},{id:5,name:"Tan Trench",imageUrl:"https://i.ibb.co/M6hHc3F/brown-trench.png",price:185}]},{id:4,title:"Womens",routeName:"womens",items:[{id:1,name:"Blue Tanktop",imageUrl:"https://i.ibb.co/7CQVJNm/blue-tank.png",price:25},{id:2,name:"Floral Blouse",imageUrl:"https://i.ibb.co/4W2DGKm/floral-blouse.png",price:20},{id:3,name:"Floral Dress",imageUrl:"https://i.ibb.co/KV18Ysr/floral-skirt.png",price:80},{id:4,name:"Red Dots Dress",imageUrl:"https://i.ibb.co/N3BN1bh/red-polka-dot-dress.png",price:80},{id:5,name:"Striped Sweater",imageUrl:"https://i.ibb.co/KmSkMbH/striped-sweater.png",price:45},{id:6,name:"Yellow Track Suit",imageUrl:"https://i.ibb.co/v1cvwNf/yellow-track-suit.png",price:135},{id:7,name:"White Blouse",imageUrl:"https://i.ibb.co/qBcrsJg/white-vest.png",price:20}]},{id:5,title:"Mens",routeName:"mens",items:[{id:1,name:"Camo Down Vest",imageUrl:"https://i.ibb.co/xJS0T3Y/camo-vest.png",price:325},{id:2,name:"Floral T-shirt",imageUrl:"https://i.ibb.co/qMQ75QZ/floral-shirt.png",price:20},{id:3,name:"Black & White Longsleeve",imageUrl:"https://i.ibb.co/55z32tw/long-sleeve.png",price:25},{id:4,name:"Pink T-shirt",imageUrl:"https://i.ibb.co/RvwnBL8/pink-shirt.png",price:25},{id:5,name:"Jean Long Sleeve",imageUrl:"https://i.ibb.co/VpW4x5t/roll-up-jean-shirt.png",price:40},{id:6,name:"Burgundy T-shirt",imageUrl:"https://i.ibb.co/mh3VM1f/polka-dot-shirt.png",price:25}]}],Lt={TOGGLE_CART_HIDDEN:"TOGGLE_CART_HIDDEN",ADD_ITEM:"ADD_ITEM"},Mt=["children","inverted","isGoogleSignIn"],Ft=function(e){var t=e.children,n=e.inverted,r=e.isGoogleSignIn,i=Pt(e,Mt);return(0,St.jsx)("button",Te(Te({className:"".concat(n?"inverted":""," ").concat(r?"isGoogleSignIn":""," custom-button")},i),{},{children:t}))},Ut=_t(null,(function(e){return{addItem:function(t){return e(function(e){return{type:Lt.ADD_ITEM,payload:e}}(t))}}}))((function(e){var t=e.item,n=e.addItem,r=t.id,i=t.name,a=t.price,o=t.imageUrl;return(0,St.jsxs)("div",{className:"collection-item",children:[(0,St.jsx)("div",{className:"image",style:{backgroundImage:"url(".concat(o,")")}}),(0,St.jsxs)("div",{className:"colletion-footer",children:[(0,St.jsx)("span",{className:"name",children:i}),(0,St.jsxs)("span",{className:"price",children:["$","".concat(a)]})]},r),(0,St.jsx)(Ft,{onClick:function(){return n(i,a,o)},inverted:!0,children:"Add to Cart"})]})})),Vt=function(e){var t=e.title,n=e.items;return(0,St.jsxs)("div",{className:"collection-preview",children:[(0,St.jsx)("h1",{className:"title",children:t}),(0,St.jsx)("div",{className:"preview",children:n.filter((function(e,t){return t<4})).map((function(e){return(0,St.jsx)(Ut,{item:e},e.id)}))})]})},jt=["id"],zt=function(){console.log(Rt);var e=Ye((0,t.useState)([]),2),n=e[0],r=e[1];return(0,t.useEffect)((function(){r(Rt)}),[]),(0,St.jsx)(St.Fragment,{children:(0,St.jsx)("div",{className:"shop-page",children:n.map((function(e){var t=e.id,n=Pt(e,jt);return(0,St.jsx)(Vt,Te({},n),t)}))})})},Bt=["title","titleId"];function qt(){return qt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qt.apply(this,arguments)}function Kt(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Gt(e,n){var r=e.title,i=e.titleId,a=Kt(e,Bt);return t.createElement("svg",qt({width:"50px",height:"39px",viewBox:"0 0 50 39",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:n,"aria-labelledby":i},a),void 0===r?t.createElement("title",{id:i},"Group"):r?t.createElement("title",{id:i},r):null,Dt||(Dt=t.createElement("desc",null,"Created with Sketch.")),Ot||(Ot=t.createElement("g",{id:"WiP",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},t.createElement("g",{id:"Artboard",transform:"translate(-90.000000, -38.000000)"},t.createElement("g",{id:"Group",transform:"translate(90.000000, 38.000000)"},t.createElement("polygon",{id:"Rectangle",fill:"#808282",points:"3 14 25 26.5 47 14 40.855176 39 9.08421785 39"}),t.createElement("polygon",{id:"Triangle",fillOpacity:.262838724,fill:"#101A1A",points:"25 8 40 39 10 39"}),t.createElement("circle",{id:"Oval",fill:"#5E6363",cx:2,cy:9,r:2}),t.createElement("circle",{id:"Oval",fill:"#5E6363",cx:25,cy:2,r:2}),t.createElement("circle",{id:"Oval",fill:"#5E6363",cx:48,cy:9,r:2}))))))}var Ht,Wt,Qt,$t,Yt,Xt,Jt,Zt,en,tn,nn,rn,an,on,un,sn=t.forwardRef(Gt),cn=(n.p,["title","titleId"]);function ln(){return ln=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ln.apply(this,arguments)}function fn(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function hn(e,n){var r=e.title,i=e.titleId,a=fn(e,cn);return t.createElement("svg",ln({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 407.453 407.453",style:{enableBackground:"new 0 0 407.453 407.453"},xmlSpace:"preserve",ref:n,"aria-labelledby":i},a),r?t.createElement("title",{id:i},r):null,t.createElement("g",null,t.createElement("path",{style:{fill:"#010002"},d:"M255.099,116.515c4.487,0,8.129-3.633,8.129-8.129c0-4.495-3.642-8.129-8.129-8.129H143.486 c-4.487,0-8.129,3.633-8.129,8.129c0,4.495,3.642,8.129,8.129,8.129H255.099z"}),t.createElement("path",{style:{fill:"#010002"},d:"M367.062,100.258H311.69c-4.487,0-8.129,3.633-8.129,8.129c0,4.495,3.642,8.129,8.129,8.129h47.243 v274.681H48.519V116.515h44.536c4.487,0,8.129-3.633,8.129-8.129c0-4.495-3.642-8.129-8.129-8.129H40.391 c-4.487,0-8.129,3.633-8.129,8.129v290.938c0,4.495,3.642,8.129,8.129,8.129h326.671c4.487,0,8.129-3.633,8.129-8.129V108.386 C375.191,103.891,371.557,100.258,367.062,100.258z"}),t.createElement("path",{style:{fill:"#010002"},d:"M282.59,134.796c4.487,0,8.129-3.633,8.129-8.129V67.394C290.718,30.238,250.604,0,201.101,0 c-49.308,0-89.414,30.238-89.414,67.394v59.274c0,4.495,3.642,8.129,8.129,8.129s8.129-3.633,8.129-8.129V67.394 c0-28.198,32.823-51.137,73.36-51.137c40.334,0,73.157,22.939,73.157,51.137v59.274 C274.461,131.163,278.095,134.796,282.59,134.796z"}),t.createElement("path",{style:{fill:"#010002"},d:"M98.892,147.566c0,11.526,9.389,20.907,20.923,20.907c11.534,0,20.923-9.38,20.923-20.907 c0-4.495-3.642-8.129-8.129-8.129s-8.129,3.633-8.129,8.129c0,2.561-2.089,4.65-4.666,4.65c-2.569,0-4.666-2.089-4.666-4.65 c0-4.495-3.642-8.129-8.129-8.129S98.892,143.071,98.892,147.566z"}),t.createElement("path",{style:{fill:"#010002"},d:"M282.59,168.473c11.534,0,20.923-9.38,20.923-20.907c0-4.495-3.642-8.129-8.129-8.129 c-4.487,0-8.129,3.633-8.129,8.129c0,2.561-2.089,4.65-4.666,4.65c-2.577,0-4.666-2.089-4.666-4.65 c0-4.495-3.642-8.129-8.129-8.129c-4.487,0-8.129,3.633-8.129,8.129C261.667,159.092,271.055,168.473,282.59,168.473z"})),Ht||(Ht=t.createElement("g",null)),Wt||(Wt=t.createElement("g",null)),Qt||(Qt=t.createElement("g",null)),$t||($t=t.createElement("g",null)),Yt||(Yt=t.createElement("g",null)),Xt||(Xt=t.createElement("g",null)),Jt||(Jt=t.createElement("g",null)),Zt||(Zt=t.createElement("g",null)),en||(en=t.createElement("g",null)),tn||(tn=t.createElement("g",null)),nn||(nn=t.createElement("g",null)),rn||(rn=t.createElement("g",null)),an||(an=t.createElement("g",null)),on||(on=t.createElement("g",null)),un||(un=t.createElement("g",null)))}var dn=t.forwardRef(hn),pn=(n.p,_t(null,(function(e){return{toggleCartHidden:function(){return e({type:Lt.TOGGLE_CART_HIDDEN})}}}))((function(e){var t=e.toggleCartHidden;return(0,St.jsxs)("div",{className:"cart-icon",onClick:t,children:[(0,St.jsx)(dn,{className:"shopping-icon"}),(0,St.jsx)("span",{className:"item-count",children:"0"})]})})));function vn(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Qe(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function mn(e,t,n){return mn=Le()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&i(a,n.prototype),a},mn.apply(null,arguments)}function yn(e){var t="function"===typeof Map?new Map:void 0;return yn=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return mn(e,arguments,Re(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),i(n,e)},yn(e)}var gn=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},kn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(gn(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new bn;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},bn=function(e){Oe(n,e);var t=Ue(n);function n(){var e;return Ne(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return De(n)}(yn(Error)),wn=function(e){return function(e){var t=gn(e);return kn.encodeByteArray(t,!0)}(e).replace(/\./g,"")},xn=function(e){try{return kn.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function _n(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&In(n)&&(e[n]=_n(e[n],t[n]));return e}function In(e){return"__proto__"!==e}var En=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},Sn=function(){try{return En()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&xn(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Tn=function(){var e;return null===(e=Sn())||void 0===e?void 0:e.config},Cn=function(){function e(){var t=this;Ne(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return De(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function An(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[wn(JSON.stringify({alg:"none",type:"JWT"})),wn(JSON.stringify(a)),""].join(".")}function Nn(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Pn(){var e,t=null===(e=Sn())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function Dn(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function On(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Rn(){var e=Nn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Ln(){try{return"object"===typeof indexedDB}catch(e){return!1}}var Mn=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i){var a;return Ne(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(Me(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(Me(a),Fn.prototype.create),a}return De(n)}(yn(Error)),Fn=function(){function e(t,n,r){Ne(this,e),this.service=t,this.serviceName=n,this.errors=r}return De(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Un(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Mn(n,a,t);return o}}]),e}();function Un(e,t){return e.replace(Vn,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Vn=/\{\$([^}]+)}/g;function jn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function zn(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Bn(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(qn(u)&&qn(s)){if(!Bn(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function qn(e){return null!==e&&"object"===typeof e}function Kn(e){for(var t=[],n=function(){var e=Ye(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Gn(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=Ye(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Hn(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Wn(e,t){var n=new Qn(e,t);return n.subscribe.bind(n)}var Qn=function(){function e(t,n){var r=this;Ne(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return De(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=vn(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=$n),void 0===r.error&&(r.error=$n),void 0===r.complete&&(r.complete=$n);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function $n(){}function Yn(e){return e&&e._delegate?e._delegate:e}var Xn=function(){function e(t,n,r){Ne(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return De(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Jn="[DEFAULT]",Zn=function(){function e(t,n){Ne(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return De(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Cn;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Jn})}catch(s){}var t,n=vn(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=Ye(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Ae(_e().mark((function e(){var t;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Je(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Je(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=vn(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=Ye(i.value,2),s=u[0],c=u[1],l=this.normalizeInstanceIdentifier(s);r===l&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=vn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(MS){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Jn?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(MS){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn;return this.component?this.component.multipleInstances?e:Jn:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var er,tr,nr=function(){function e(t){Ne(this,e),this.name=t,this.providers=new Map}return De(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Zn(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),rr=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(tr||(tr={}));var ir={debug:tr.DEBUG,verbose:tr.VERBOSE,info:tr.INFO,warn:tr.WARN,error:tr.ERROR,silent:tr.SILENT},ar=tr.INFO,or=(Ee(er={},tr.DEBUG,"log"),Ee(er,tr.VERBOSE,"log"),Ee(er,tr.INFO,"info"),Ee(er,tr.WARN,"warn"),Ee(er,tr.ERROR,"error"),er),ur=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=or[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},sr=function(){function e(t){Ne(this,e),this.name=t,this._logLevel=ar,this._logHandler=ur,this._userLogHandler=null,rr.push(this)}return De(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in tr))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?ir[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,tr.DEBUG].concat(t)),this._logHandler.apply(this,[this,tr.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,tr.VERBOSE].concat(t)),this._logHandler.apply(this,[this,tr.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,tr.INFO].concat(t)),this._logHandler.apply(this,[this,tr.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,tr.WARN].concat(t)),this._logHandler.apply(this,[this,tr.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,tr.ERROR].concat(t)),this._logHandler.apply(this,[this,tr.ERROR].concat(t))}}]),e}();var cr,lr;var fr=new WeakMap,hr=new WeakMap,dr=new WeakMap,pr=new WeakMap,vr=new WeakMap;var mr={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return hr.get(e);if("objectStoreNames"===t)return e.objectStoreNames||dr.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return kr(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function yr(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(lr||(lr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(br(this),n),kr(fr.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return kr(e.apply(br(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[br(this),t].concat(r));return dr.set(a,t.sort?t.sort():[t]),kr(a)}}function gr(e){return"function"===typeof e?yr(e):(e instanceof IDBTransaction&&function(e){if(!hr.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));hr.set(e,t)}}(e),t=e,(cr||(cr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,mr):e);var t}function kr(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(kr(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&fr.set(t,e)})).catch((function(){})),vr.set(t,e),t}(e);if(pr.has(e))return pr.get(e);var t=gr(e);return t!==e&&(pr.set(e,t),vr.set(t,e)),t}var br=function(e){return vr.get(e)};var wr,xr,_r=["get","getKey","getAll","getAllKeys","count"],Ir=["put","add","delete","clear"],Er=new Map;function Sr(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Er.get(t))return Er.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Ir.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||_r.includes(n))){var a=function(){var e=Ae(_e().mark((function e(t){var a,o,u,s,c,l,f=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Er.set(t,a),a}}}mr=function(e){return Te(Te({},e),{},{get:function(t,n,r){return Sr(t,n)||e.get(t,n,r)},has:function(t,n){return!!Sr(t,n)||e.has(t,n)}})}(mr);var Tr=function(){function e(t){Ne(this,e),this.container=t}return De(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Cr="@firebase/app",Ar="0.9.9",Nr=new sr("@firebase/app"),Pr="[DEFAULT]",Dr=(Ee(wr={},Cr,"fire-core"),Ee(wr,"@firebase/app-compat","fire-core-compat"),Ee(wr,"@firebase/analytics","fire-analytics"),Ee(wr,"@firebase/analytics-compat","fire-analytics-compat"),Ee(wr,"@firebase/app-check","fire-app-check"),Ee(wr,"@firebase/app-check-compat","fire-app-check-compat"),Ee(wr,"@firebase/auth","fire-auth"),Ee(wr,"@firebase/auth-compat","fire-auth-compat"),Ee(wr,"@firebase/database","fire-rtdb"),Ee(wr,"@firebase/database-compat","fire-rtdb-compat"),Ee(wr,"@firebase/functions","fire-fn"),Ee(wr,"@firebase/functions-compat","fire-fn-compat"),Ee(wr,"@firebase/installations","fire-iid"),Ee(wr,"@firebase/installations-compat","fire-iid-compat"),Ee(wr,"@firebase/messaging","fire-fcm"),Ee(wr,"@firebase/messaging-compat","fire-fcm-compat"),Ee(wr,"@firebase/performance","fire-perf"),Ee(wr,"@firebase/performance-compat","fire-perf-compat"),Ee(wr,"@firebase/remote-config","fire-rc"),Ee(wr,"@firebase/remote-config-compat","fire-rc-compat"),Ee(wr,"@firebase/storage","fire-gcs"),Ee(wr,"@firebase/storage-compat","fire-gcs-compat"),Ee(wr,"@firebase/firestore","fire-fst"),Ee(wr,"@firebase/firestore-compat","fire-fst-compat"),Ee(wr,"fire-js","fire-js"),Ee(wr,"firebase","fire-js-all"),wr),Or=new Map,Rr=new Map;function Lr(e,t){try{e.container.addComponent(t)}catch(n){Nr.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Mr(e,t){e.container.addOrOverwriteComponent(t)}function Fr(e){var t=e.name;if(Rr.has(t))return Nr.debug("There were multiple attempts to register component ".concat(t,".")),!1;Rr.set(t,e);var n,r=vn(Or.values());try{for(r.s();!(n=r.n()).done;){Lr(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Ur(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Vr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pr;Ur(e,t).clearInstance(n)}function jr(){Rr.clear()}var zr=(Ee(xr={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Ee(xr,"bad-app-name","Illegal App name: '{$appName}"),Ee(xr,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Ee(xr,"app-deleted","Firebase App named '{$appName}' already deleted"),Ee(xr,"no-options","Need to provide options, when not being deployed to hosting via source."),Ee(xr,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Ee(xr,"invalid-log-argument","First argument to `onLog` must be null or a function."),Ee(xr,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),Ee(xr,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),Ee(xr,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),Ee(xr,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),xr),Br=new Fn("app","Firebase",zr),qr=function(){function e(t,n,r){var i=this;Ne(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xn("app",(function(){return i}),"PUBLIC"))}return De(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Br.create("app-deleted",{appName:this._name})}}]),e}(),Kr="9.21.0";function Gr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){var r=t;t={name:r}}var i=Object.assign({name:Pr,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!==typeof a||!a)throw Br.create("bad-app-name",{appName:String(a)});if(n||(n=Tn()),!n)throw Br.create("no-options");var o=Or.get(a);if(o){if(Bn(n,o.options)&&Bn(i,o.config))return o;throw Br.create("duplicate-app",{appName:a})}var u,s=new nr(a),c=vn(Rr.values());try{for(c.s();!(u=c.n()).done;){var l=u.value;s.addComponent(l)}}catch(h){c.e(h)}finally{c.f()}var f=new qr(n,i,s);return Or.set(a,f),f}function Hr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pr,t=Or.get(e);if(!t&&e===Pr)return Gr();if(!t)throw Br.create("no-app",{appName:e});return t}function Wr(){return Array.from(Or.values())}function Qr(e){return $r.apply(this,arguments)}function $r(){return $r=Ae(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Or.has(n)){e.next=6;break}return Or.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),$r.apply(this,arguments)}function Yr(e,t,n){var r,i=null!==(r=Dr[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Nr.warn(u.join(" "))}Fr(new Xn("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Xr(e,t){if(null!==e&&"function"!==typeof e)throw Br.create("invalid-log-argument");!function(e,t){var n,r=vn(rr);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=ir[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:tr[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Jr(e){var t;t=e,rr.forEach((function(e){e.setLogLevel(t)}))}var Zr="firebase-heartbeat-store",ei=null;function ti(){return ei||(ei=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=kr(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(kr(u.result),e.oldVersion,e.newVersion,kr(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Zr)}}).catch((function(e){throw Br.create("idb-open",{originalErrorMessage:e.message})}))),ei}function ni(e){return ri.apply(this,arguments)}function ri(){return ri=Ae(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ti();case 3:return n=e.sent,e.abrupt("return",n.transaction(Zr).objectStore(Zr).get(oi(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof Mn?Nr.warn(e.t0.message):(r=Br.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Nr.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),ri.apply(this,arguments)}function ii(e,t){return ai.apply(this,arguments)}function ai(){return ai=Ae(_e().mark((function e(t,n){var r,i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ti();case 3:return r=e.sent,i=r.transaction(Zr,"readwrite"),a=i.objectStore(Zr),e.next=8,a.put(n,oi(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof Mn?Nr.warn(e.t0.message):(o=Br.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Nr.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),ai.apply(this,arguments)}function oi(e){return"".concat(e.name,"!").concat(e.options.appId)}var ui=function(){function e(t){var n=this;Ne(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new hi(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return De(e,[{key:"triggerHeartbeat",value:function(){var e=Ae(_e().mark((function e(){var t,n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=si(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Ae(_e().mark((function e(){var t,n,r,i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=si(),n=ci(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=wn(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function si(){return(new Date).toISOString().substring(0,10)}function ci(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=vn(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),di(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),di(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var li,fi,hi=function(){function e(t){Ne(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return De(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Ae(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ln()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Ae(_e().mark((function e(){var t;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,ni(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Ae(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ii(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Ae(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ii(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(Je(r.heartbeats),Je(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function di(e){return wn(JSON.stringify({version:2,heartbeats:e})).length}li="",Fr(new Xn("platform-logger",(function(e){return new Tr(e)}),"PRIVATE")),Fr(new Xn("heartbeat",(function(e){return new ui(e)}),"PRIVATE")),Yr(Cr,Ar,li),Yr(Cr,Ar,"esm2017"),Yr("fire-js","");var pi=function(){function e(t,n){var r=this;Ne(this,e),this._delegate=t,this.firebase=n,Lr(t,new Xn("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return De(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Qr(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pr;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pr;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Lr(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Mr(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),vi=(Ee(fi={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Ee(fi,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),fi),mi=new Fn("app-compat","Firebase",vi);var yi=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Gr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(jn(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Yr,setLogLevel:Jr,onLog:Xr,apps:null,SDK_VERSION:Kr,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Fr(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw mi.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&_n(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!jn(n,e=e||Pr))throw mi.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(pi);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){_n(n,e)},createSubscribe:Wn,ErrorFactory:Fn,deepExtend:_n}),n}(),gi=new sr("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){gi.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var ki=self.firebase.SDK_VERSION;ki&&ki.indexOf("LITE")>=0&&gi.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var bi=yi;!function(e){Yr("@firebase/app-compat","0.2.9",e)}();function wi(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Re(e)););return e}function xi(){return xi="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=wi(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},xi.apply(this,arguments)}bi.registerVersion("firebase","9.21.0","app-compat");function _i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Ii;Object.create;var Ei="facebook.com",Si="github.com",Ti="google.com",Ci="password",Ai="twitter.com",Ni="EMAIL_SIGNIN",Pi="PASSWORD_RESET",Di="RECOVER_EMAIL",Oi="REVERT_SECOND_FACTOR_ADDITION",Ri="VERIFY_AND_CHANGE_EMAIL",Li="VERIFY_EMAIL";function Mi(){return Ee({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Fi=function(){var e;return Ee(e={},"admin-restricted-operation","This operation is restricted to administrators only."),Ee(e,"argument-error",""),Ee(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Ee(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Ee(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Ee(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Ee(e,"cordova-not-ready","Cordova framework is not ready."),Ee(e,"cors-unsupported","This browser is not supported."),Ee(e,"credential-already-in-use","This credential is already associated with a different user account."),Ee(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Ee(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Ee(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Ee(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Ee(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Ee(e,"email-already-in-use","The email address is already in use by another account."),Ee(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Ee(e,"expired-action-code","The action code has expired."),Ee(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Ee(e,"internal-error","An internal AuthError has occurred."),Ee(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Ee(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Ee(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Ee(e,"invalid-auth-event","An internal AuthError has occurred."),Ee(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Ee(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Ee(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Ee(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Ee(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Ee(e,"invalid-email","The email address is badly formatted."),Ee(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Ee(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Ee(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Ee(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Ee(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Ee(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Ee(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Ee(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Ee(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Ee(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Ee(e,"wrong-password","The password is invalid or the user does not have a password."),Ee(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Ee(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Ee(e,"invalid-provider-id","The specified provider ID is invalid."),Ee(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Ee(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Ee(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Ee(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Ee(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),Ee(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Ee(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Ee(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Ee(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Ee(e,"missing-continue-uri","A continue URL must be provided in the request."),Ee(e,"missing-iframe-start","An internal AuthError has occurred."),Ee(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Ee(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Ee(e,"missing-password","A non-empty password must be provided"),Ee(e,"missing-multi-factor-info","No second factor identifier is provided."),Ee(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Ee(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Ee(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Ee(e,"app-deleted","This instance of FirebaseApp has been deleted."),Ee(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Ee(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Ee(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Ee(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Ee(e,"no-auth-event","An internal AuthError has occurred."),Ee(e,"no-such-provider","User was not linked to an account with the given provider."),Ee(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Ee(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Ee(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Ee(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Ee(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Ee(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Ee(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Ee(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Ee(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Ee(e,"rejected-credential","The request contains malformed or mismatching credentials."),Ee(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Ee(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Ee(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Ee(e,"timeout","The operation has timed out."),Ee(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Ee(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Ee(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Ee(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Ee(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Ee(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Ee(e,"unverified-email","The operation requires a verified email."),Ee(e,"user-cancelled","The user did not grant your application the permissions it requested."),Ee(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Ee(e,"user-disabled","The user account has been disabled by an administrator."),Ee(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Ee(e,"user-signed-out",""),Ee(e,"weak-password","The password must be 6 characters long or more."),Ee(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Ee(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),Ee(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),Ee(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),Ee(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),Ee(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),Ee(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),Ee(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),Ee(e,"invalid-req-type","Invalid request parameters."),Ee(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),e},Ui=Mi,Vi=new Fn("auth","Firebase",Mi()),ji=new sr("@firebase/auth");function zi(e){if(ji.logLevel<=tr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ji.warn.apply(ji,["Auth (".concat(Kr,"): ").concat(e)].concat(n))}}function Bi(e){if(ji.logLevel<=tr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ji.error.apply(ji,["Auth (".concat(Kr,"): ").concat(e)].concat(n))}}function qi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Wi.apply(void 0,[e].concat(n))}function Ki(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Wi.apply(void 0,[e].concat(n))}function Gi(e,t,n){var r=Object.assign(Object.assign({},Ui()),Ee({},t,n));return new Fn("auth","Firebase",r).create(t,{appName:e.name})}function Hi(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&qi(e,"argument-error"),Gi(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Wi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Je(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Je(o)))}return Vi.create.apply(Vi,[e].concat(n))}function Qi(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Wi.apply(void 0,[t].concat(r))}}function $i(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Bi(t),new Error(t)}function Yi(e,t){e||$i(t)}function Xi(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ji(){return"http:"===Zi()||"https:"===Zi()}function Zi(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var ea=function(){function e(t,n){Ne(this,e),this.shortDelay=t,this.longDelay=n,Yi(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nn())||On()}return De(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Ji()||Dn()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function ta(e,t){Yi(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var na=function(){function e(){Ne(this,e)}return De(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void $i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void $i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void $i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),ra=(Ee(Ii={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Ee(Ii,"MISSING_CUSTOM_TOKEN","internal-error"),Ee(Ii,"INVALID_IDENTIFIER","invalid-email"),Ee(Ii,"MISSING_CONTINUE_URI","internal-error"),Ee(Ii,"INVALID_PASSWORD","wrong-password"),Ee(Ii,"MISSING_PASSWORD","missing-password"),Ee(Ii,"EMAIL_EXISTS","email-already-in-use"),Ee(Ii,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Ee(Ii,"INVALID_IDP_RESPONSE","invalid-credential"),Ee(Ii,"INVALID_PENDING_TOKEN","invalid-credential"),Ee(Ii,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Ee(Ii,"MISSING_REQ_TYPE","internal-error"),Ee(Ii,"EMAIL_NOT_FOUND","user-not-found"),Ee(Ii,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Ee(Ii,"EXPIRED_OOB_CODE","expired-action-code"),Ee(Ii,"INVALID_OOB_CODE","invalid-action-code"),Ee(Ii,"MISSING_OOB_CODE","internal-error"),Ee(Ii,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Ee(Ii,"INVALID_ID_TOKEN","invalid-user-token"),Ee(Ii,"TOKEN_EXPIRED","user-token-expired"),Ee(Ii,"USER_NOT_FOUND","user-token-expired"),Ee(Ii,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Ee(Ii,"INVALID_CODE","invalid-verification-code"),Ee(Ii,"INVALID_SESSION_INFO","invalid-verification-id"),Ee(Ii,"INVALID_TEMPORARY_PROOF","invalid-credential"),Ee(Ii,"MISSING_SESSION_INFO","missing-verification-id"),Ee(Ii,"SESSION_EXPIRED","code-expired"),Ee(Ii,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Ee(Ii,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Ee(Ii,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Ee(Ii,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Ee(Ii,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Ee(Ii,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Ee(Ii,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Ee(Ii,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Ee(Ii,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Ee(Ii,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Ee(Ii,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Ee(Ii,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),Ee(Ii,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),Ee(Ii,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),Ee(Ii,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),Ee(Ii,"MISSING_CLIENT_TYPE","missing-client-type"),Ee(Ii,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),Ee(Ii,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),Ee(Ii,"INVALID_REQ_TYPE","invalid-req-type"),Ii),ia=new ea(3e4,6e4);function aa(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function oa(e,t,n,r){return ua.apply(this,arguments)}function ua(){return ua=Ae(_e().mark((function e(t,n,r,i){var a,o=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",sa(t,a,Ae(_e().mark((function e(){var a,o,u,s;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Kn(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",na.fetch()(ha(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),ua.apply(this,arguments)}function sa(e,t,n){return ca.apply(this,arguments)}function ca(){return ca=Ae(_e().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},ra),n),e.prev=2,a=new da(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw pa(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=Ye(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw pa(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw pa(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw pa(t,"user-disabled",u);case 29:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=34;break}throw Gi(t,d,h);case 34:qi(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Mn)){e.next=41;break}throw e.t0;case 41:qi(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),ca.apply(this,arguments)}function la(e,t,n,r){return fa.apply(this,arguments)}function fa(){return fa=Ae(_e().mark((function e(t,n,r,i){var a,o,u=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,oa(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&qi(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),fa.apply(this,arguments)}function ha(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?ta(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var da=function(){function e(t){var n=this;Ne(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Ki(n.auth,"network-request-failed"))}),ia.get())}))}return De(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function pa(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Ki(e,t,r);return i.customData._tokenResponse=n,i}function va(e,t){return ma.apply(this,arguments)}function ma(){return ma=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oa(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),ma.apply(this,arguments)}function ya(e,t){return ga.apply(this,arguments)}function ga(){return ga=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oa(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),ga.apply(this,arguments)}function ka(e,t){return ba.apply(this,arguments)}function ba(){return ba=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oa(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),ba.apply(this,arguments)}function wa(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function xa(){return xa=Ae(_e().mark((function e(t){var n,r,i,a,o,u,s=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=Yn(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Qi((a=Ia(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:wa(_a(a.auth_time)),issuedAtTime:wa(_a(a.iat)),expirationTime:wa(_a(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),xa.apply(this,arguments)}function _a(e){return 1e3*Number(e)}function Ia(e){var t=Ye(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Bi("JWT malformed, contained fewer than 3 sections"),null;try{var a=xn(r);return a?JSON.parse(a):(Bi("Failed to decode base64 JWT payload"),null)}catch(o){return Bi("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function Ea(e,t){return Sa.apply(this,arguments)}function Sa(){return Sa=Ae(_e().mark((function e(t,n){var r=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Mn&&Ta(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Sa.apply(this,arguments)}function Ta(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Ca=function(){function e(t){Ne(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return De(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Ae(_e().mark((function t(){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Ae(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Aa=function(){function e(t,n){Ne(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return De(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=wa(this.lastLoginAt),this.creationTime=wa(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Na(e){return Pa.apply(this,arguments)}function Pa(){return Pa=Ae(_e().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Ea(t,ka(r,{idToken:i}));case 6:Qi(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Ra(o.providerUserInfo):[],s=Oa(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Aa(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Pa.apply(this,arguments)}function Da(){return(Da=Ae(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Yn(t),e.next=3,Na(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oa(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Je(n),Je(t))}function Ra(e){return e.map((function(e){var t=e.providerId,n=_i(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function La(e,t){return Ma.apply(this,arguments)}function Ma(){return Ma=Ae(_e().mark((function e(t,n){var r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sa(t,{},Ae(_e().mark((function e(){var r,i,a,o,u,s;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kn({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=ha(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",na.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Ma.apply(this,arguments)}var Fa=function(){function e(){Ne(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return De(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Qi(e.idToken,"internal-error"),Qi("undefined"!==typeof e.idToken,"internal-error"),Qi("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Ia(e);return Qi(t,"internal-error"),Qi("undefined"!==typeof t.exp,"internal-error"),Qi("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Ae(_e().mark((function e(t){var n,r=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Qi(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Ae(_e().mark((function e(t,n){var r,i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,La(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return $i("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Qi("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Qi("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Qi("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Ua(e,t){Qi("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Va=function(){function e(t){Ne(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=_i(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ca(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?Je(a.providerData):[],this.metadata=new Aa(a.createdAt||void 0,a.lastLoginAt||void 0)}return De(e,[{key:"getIdToken",value:function(){var e=Ae(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ea(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Qi(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return xa.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Da.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Qi(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){Qi(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Ae(_e().mark((function e(t){var n,r,i=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Na(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Ae(_e().mark((function e(){var t;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Ea(this,va(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;Qi(k&&_,t,"internal-error");var I=Fa.fromJSON(this.name,_);Qi("string"===typeof k,t,"internal-error"),Ua(f,t.name),Ua(h,t.name),Qi("boolean"===typeof b,t,"internal-error"),Qi("boolean"===typeof w,t,"internal-error"),Ua(d,t.name),Ua(p,t.name),Ua(v,t.name),Ua(m,t.name),Ua(y,t.name),Ua(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(E.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=Ae(_e().mark((function t(n,r){var i,a,o,u=arguments;return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Fa).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Na(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),ja=new Map;function za(e){Yi(e instanceof Function,"Expected a class definition");var t=ja.get(e);return t?(Yi(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ja.set(e,t),t)}var Ba=function(){function e(){Ne(this,e),this.type="NONE",this.storage={}}return De(e,[{key:"_isAvailable",value:function(){var e=Ae(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ae(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Ba.type="NONE";var qa=Ba;function Ka(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Ga=function(){function e(t,n,r){Ne(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Ka(this.userKey,a.apiKey,o),this.fullPersistenceKey=Ka("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return De(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Ae(_e().mark((function e(){var t;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Va._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Ae(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Ae(_e().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(za(qa),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||za(qa),u=Ka(i,n.config.apiKey,n.name),s=null,c=vn(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=Va._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Ha(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ya(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Wa(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ja(t))return"Blackberry";if(Za(t))return"Webos";if(Qa(t))return"Safari";if((t.includes("chrome/")||$a(t))&&!t.includes("edge/"))return"Chrome";if(Xa(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Wa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn();return/firefox\//i.test(e)}function Qa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function $a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn();return/crios\//i.test(e)}function Ya(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn();return/iemobile/i.test(e)}function Xa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn();return/android/i.test(e)}function Ja(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn();return/blackberry/i.test(e)}function Za(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn();return/webos/i.test(e)}function eo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function to(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn();return eo(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function no(){return Rn()&&10===document.documentMode}function ro(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn();return eo(e)||Xa(e)||Za(e)||Ja(e)||/windows phone/i.test(e)||Ya(e)}function io(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ha(Nn());break;case"Worker":t="".concat(Ha(Nn()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Kr,"/").concat(r)}function ao(e){return oo.apply(this,arguments)}function oo(){return oo=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oa(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),oo.apply(this,arguments)}function uo(e,t){return so.apply(this,arguments)}function so(){return so=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oa(t,"GET","/v2/recaptchaConfig",aa(t,n)));case 1:case"end":return e.stop()}}),e)}))),so.apply(this,arguments)}function co(e){return void 0!==e&&void 0!==e.getResponse}function lo(e){return void 0!==e&&void 0!==e.enterprise}var fo=De((function e(t){if(Ne(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function ho(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Ki("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function po(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var vo="https://www.google.com/recaptcha/enterprise.js?render=",mo="NO_RECAPTCHA",yo=function(){function e(t){Ne(this,e),this.type="recaptcha-enterprise",this.auth=xo(t)}return De(e,[{key:"verify",value:function(){var e=Ae(_e().mark((function e(){var t,n,r,i,a,o=this,u=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;lo(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n(mo)}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=Ae(_e().mark((function e(n,r){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:uo(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new fo(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=u.length>0&&void 0!==u[0]?u[0]:"verify",n=u.length>1&&void 0!==u[1]&&u[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&lo(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));ho(vo+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function go(e,t,n){return ko.apply(this,arguments)}function ko(){return ko=Ae(_e().mark((function e(t,n,r){var i,a,o,u,s=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>3&&void 0!==s[3]&&s[3],a=new yo(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return u=Object.assign({},n),i?Object.assign(u,{captchaResp:o}):Object.assign(u,{captchaResponse:o}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",u);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),ko.apply(this,arguments)}var bo=function(){function e(t){Ne(this,e),this.auth=t,this.queue=[]}return De(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Ae(_e().mark((function e(t){var n,r,i,a,o,u,s;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=vn(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=vn(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),wo=function(){function e(t,n,r,i){Ne(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _o(this),this.idTokenSubscription=new _o(this),this.beforeStateQueue=new bo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vi,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return De(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=za(t)),this._initializationPromise=this.queue(Ae(_e().mark((function r(){var i,a;return _e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Ga.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Ae(_e().mark((function e(){var t;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Ae(_e().mark((function e(t){var n,r,i,a,o,u,s;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Qi(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Ae(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Na(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Ae(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Ae(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Yn(t):null)&&Qi(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Ae(_e().mark((function e(t){var n,r=this,i=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Qi(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Ae(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Ae(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Ae(_e().mark((function n(){return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(za(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"initializeRecaptchaConfig",value:function(){var e=Ae(_e().mark((function e(){var t,n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uo(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"});case 2:t=e.sent,n=new fo(t),null==this.tenantId?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new yo(this).verify();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Fn("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Ae(_e().mark((function e(t,n){var r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Ae(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Qi(n=t&&za(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Ga.create(this,[za(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Ae(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Ae(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Ae(_e().mark((function e(t){var n=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Ae(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Qi(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Qi(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=io(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Ae(_e().mark((function e(){var t,n,r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ee({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=Ae(_e().mark((function e(){var t,n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&zi("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function xo(e){return Yn(e)}var _o=function(){function e(t){var n=this;Ne(this,e),this.auth=t,this.observer=null,this.addObserver=Wn((function(e){return n.observer=e}))}return De(e,[{key:"next",get:function(){return Qi(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Io(e,t,n){var r=xo(e);Qi(r._canInitEmulator,r,"emulator-config-failed"),Qi(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Eo(t),o=function(e){var t=Eo(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:So(r.substr(a.length+1))}}var o=Ye(r.split(":"),2);return{host:o[0],port:So(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Eo(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function So(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var To=function(){function e(t,n){Ne(this,e),this.providerId=t,this.signInMethod=n}return De(e,[{key:"toJSON",value:function(){return $i("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return $i("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return $i("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return $i("not implemented")}}]),e}();function Co(e,t){return Ao.apply(this,arguments)}function Ao(){return Ao=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oa(t,"POST","/v1/accounts:resetPassword",aa(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ao.apply(this,arguments)}function No(e,t){return Po.apply(this,arguments)}function Po(){return Po=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oa(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Po.apply(this,arguments)}function Do(e,t){return Oo.apply(this,arguments)}function Oo(){return Oo=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oa(t,"POST","/v1/accounts:update",aa(t,n)));case 1:case"end":return e.stop()}}),e)}))),Oo.apply(this,arguments)}function Ro(e,t){return Lo.apply(this,arguments)}function Lo(){return Lo=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",la(t,"POST","/v1/accounts:signInWithPassword",aa(t,n)));case 1:case"end":return e.stop()}}),e)}))),Lo.apply(this,arguments)}function Mo(e,t){return Fo.apply(this,arguments)}function Fo(){return Fo=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oa(t,"POST","/v1/accounts:sendOobCode",aa(t,n)));case 1:case"end":return e.stop()}}),e)}))),Fo.apply(this,arguments)}function Uo(e,t){return Vo.apply(this,arguments)}function Vo(){return Vo=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mo(t,n));case 1:case"end":return e.stop()}}),e)}))),Vo.apply(this,arguments)}function jo(e,t){return zo.apply(this,arguments)}function zo(){return zo=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mo(t,n));case 1:case"end":return e.stop()}}),e)}))),zo.apply(this,arguments)}function Bo(e,t){return qo.apply(this,arguments)}function qo(){return qo=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mo(t,n));case 1:case"end":return e.stop()}}),e)}))),qo.apply(this,arguments)}function Ko(e,t){return Go.apply(this,arguments)}function Go(){return Go=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mo(t,n));case 1:case"end":return e.stop()}}),e)}))),Go.apply(this,arguments)}function Ho(e,t){return Wo.apply(this,arguments)}function Wo(){return Wo=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",la(t,"POST","/v1/accounts:signInWithEmailLink",aa(t,n)));case 1:case"end":return e.stop()}}),e)}))),Wo.apply(this,arguments)}function Qo(e,t){return $o.apply(this,arguments)}function $o(){return $o=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",la(t,"POST","/v1/accounts:signInWithEmailLink",aa(t,n)));case 1:case"end":return e.stop()}}),e)}))),$o.apply(this,arguments)}var Yo=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Ne(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return De(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Ae(_e().mark((function e(t){var n,r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,go(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",Ro(t,i));case 11:return e.abrupt("return",Ro(t,r).catch(function(){var e=Ae(_e().mark((function e(n){var i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,go(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",Ro(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",Ho(t,{email:this._email,oobCode:this._password}));case 13:qi(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",No(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Qo(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:qi(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(To);function Xo(e,t){return Jo.apply(this,arguments)}function Jo(){return Jo=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",la(t,"POST","/v1/accounts:signInWithIdp",aa(t,n)));case 1:case"end":return e.stop()}}),e)}))),Jo.apply(this,arguments)}var Zo=function(e){Oe(n,e);var t=Ue(n);function n(){var e;return Ne(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return De(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Xo(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Xo(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Xo(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Kn(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):qi("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=_i(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(To);function eu(e,t){return tu.apply(this,arguments)}function tu(){return tu=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oa(t,"POST","/v1/accounts:sendVerificationCode",aa(t,n)));case 1:case"end":return e.stop()}}),e)}))),tu.apply(this,arguments)}function nu(){return nu=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",la(t,"POST","/v1/accounts:signInWithPhoneNumber",aa(t,n)));case 1:case"end":return e.stop()}}),e)}))),nu.apply(this,arguments)}function ru(){return ru=Ae(_e().mark((function e(t,n){var r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,la(t,"POST","/v1/accounts:signInWithPhoneNumber",aa(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw pa(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),ru.apply(this,arguments)}var iu=Ee({},"USER_NOT_FOUND","user-not-found");function au(){return au=Ae(_e().mark((function e(t,n){var r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",la(t,"POST","/v1/accounts:signInWithPhoneNumber",aa(t,r),iu));case 2:case"end":return e.stop()}}),e)}))),au.apply(this,arguments)}var ou=function(e){Oe(n,e);var t=Ue(n);function n(e){var r;return Ne(this,n),(r=t.call(this,"phone","phone")).params=e,r}return De(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return nu.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return ru.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return au.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(To);var uu=function(){function e(t){var n,r,i,a,o,u;Ne(this,e);var s=Gn(Hn(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Qi(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return De(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Gn(Hn(e)).link,n=t?Gn(Hn(t)).deep_link_id:null,r=Gn(Hn(e)).deep_link_id;return(r?Gn(Hn(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(MS){return null}}}]),e}();var su=function(){function e(){Ne(this,e),this.providerId=e.PROVIDER_ID}return De(e,null,[{key:"credential",value:function(e,t){return Yo._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=uu.parseLink(t);return Qi(n,"argument-error"),Yo._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();su.PROVIDER_ID="password",su.EMAIL_PASSWORD_SIGN_IN_METHOD="password",su.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var cu=function(){function e(t){Ne(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return De(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),lu=function(e){Oe(n,e);var t=Ue(n);function n(){var e;return Ne(this,n),(e=t.apply(this,arguments)).scopes=[],e}return De(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Je(this.scopes)}}]),n}(cu),fu=function(e){Oe(n,e);var t=Ue(n);function n(){return Ne(this,n),t.apply(this,arguments)}return De(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Qi(e.idToken||e.accessToken,"argument-error"),Zo._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Qi("providerId"in t&&"signInMethod"in t,"argument-error"),Zo._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(lu),hu=function(e){Oe(n,e);var t=Ue(n);function n(){return Ne(this,n),t.call(this,"facebook.com")}return De(n,null,[{key:"credential",value:function(e){return Zo._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(MS){return null}}}]),n}(lu);hu.FACEBOOK_SIGN_IN_METHOD="facebook.com",hu.PROVIDER_ID="facebook.com";var du=function(e){Oe(n,e);var t=Ue(n);function n(){var e;return Ne(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return De(n,null,[{key:"credential",value:function(e,t){return Zo._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(MS){return null}}}]),n}(lu);du.GOOGLE_SIGN_IN_METHOD="google.com",du.PROVIDER_ID="google.com";var pu=function(e){Oe(n,e);var t=Ue(n);function n(){return Ne(this,n),t.call(this,"github.com")}return De(n,null,[{key:"credential",value:function(e){return Zo._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(MS){return null}}}]),n}(lu);pu.GITHUB_SIGN_IN_METHOD="github.com",pu.PROVIDER_ID="github.com";var vu=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return De(n,[{key:"_getIdTokenResponse",value:function(e){return Xo(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Xo(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Xo(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(To),mu=function(e){Oe(n,e);var t=Ue(n);function n(e){return Ne(this,n),Qi(e.startsWith("saml."),"argument-error"),t.call(this,e)}return De(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=vu.fromJSON(e);return Qi(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return vu._create(r,n)}catch(i){return null}}}]),n}(cu),yu=function(e){Oe(n,e);var t=Ue(n);function n(){return Ne(this,n),t.call(this,"twitter.com")}return De(n,null,[{key:"credential",value:function(e,t){return Zo._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(MS){return null}}}]),n}(lu);function gu(e,t){return ku.apply(this,arguments)}function ku(){return ku=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",la(t,"POST","/v1/accounts:signUp",aa(t,n)));case 1:case"end":return e.stop()}}),e)}))),ku.apply(this,arguments)}yu.TWITTER_SIGN_IN_METHOD="twitter.com",yu.PROVIDER_ID="twitter.com";var bu=function(){function e(t){Ne(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return De(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Ae(_e().mark((function t(n,r,i){var a,o,u,s,c=arguments;return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Va._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=wu(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Ae(_e().mark((function t(n,r,i){var a;return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=wu(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function wu(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function xu(){return xu=Ae(_e().mark((function e(t){var n,r,i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xo(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new bu({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,gu(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,bu._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),xu.apply(this,arguments)}var _u=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i,a){var o,u;return Ne(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(Me(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return De(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Mn);function Iu(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw _u._fromErrorAndOperation(e,n,t,r);throw n}))}function Eu(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Su(e,t){return Tu.apply(this,arguments)}function Tu(){return Tu=Ae(_e().mark((function e(t,n){var r,i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yn(t),e.next=3,Nu(!0,r,n);case 3:return e.t0=ya,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Eu(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Tu.apply(this,arguments)}function Cu(e,t){return Au.apply(this,arguments)}function Au(){return Au=Ae(_e().mark((function e(t,n){var r,i,a=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Ea,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",bu._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Au.apply(this,arguments)}function Nu(e,t,n){return Pu.apply(this,arguments)}function Pu(){return Pu=Ae(_e().mark((function e(t,n,r){var i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Na(n);case 2:i=Eu(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Qi(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)}))),Pu.apply(this,arguments)}function Du(e,t){return Ou.apply(this,arguments)}function Ou(){return Ou=Ae(_e().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Ea(t,Iu(i,a,n,t),r);case 6:return Qi((o=e.sent).idToken,i,"internal-error"),Qi(u=Ia(o.idToken),i,"internal-error"),s=u.sub,Qi(t.uid===s,i,"user-mismatch"),e.abrupt("return",bu._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&qi(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Ou.apply(this,arguments)}function Ru(e,t){return Lu.apply(this,arguments)}function Lu(){return Lu=Ae(_e().mark((function e(t,n){var r,i,a,o,u=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Iu(t,i,n);case 4:return a=e.sent,e.next=7,bu._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Lu.apply(this,arguments)}function Mu(e,t){return Fu.apply(this,arguments)}function Fu(){return Fu=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ru(xo(t),n));case 1:case"end":return e.stop()}}),e)}))),Fu.apply(this,arguments)}function Uu(e,t){return Vu.apply(this,arguments)}function Vu(){return(Vu=Ae(_e().mark((function e(t,n){var r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yn(t),e.next=3,Nu(!1,r,n.providerId);case 3:return e.abrupt("return",Cu(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ju(e,t){return zu.apply(this,arguments)}function zu(){return(zu=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Du(Yn(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bu(e,t){return qu.apply(this,arguments)}function qu(){return qu=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",la(t,"POST","/v1/accounts:signInWithCustomToken",aa(t,n)));case 1:case"end":return e.stop()}}),e)}))),qu.apply(this,arguments)}function Ku(){return Ku=Ae(_e().mark((function e(t,n){var r,i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xo(t),e.next=3,Bu(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,bu._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),Ku.apply(this,arguments)}var Gu=function(){function e(t,n){Ne(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return De(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Hu._fromServerResponse(e,t):"totpInfo"in t?Wu._fromServerResponse(e,t):qi(e,"internal-error")}}]),e}(),Hu=function(e){Oe(n,e);var t=Ue(n);function n(e){var r;return Ne(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return De(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Gu),Wu=function(e){Oe(n,e);var t=Ue(n);function n(e){return Ne(this,n),t.call(this,"totp",e)}return De(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Gu);function Qu(e,t,n){var r;Qi((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Qi("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Qi(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Qi(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function $u(){return $u=Ae(_e().mark((function e(t,n,r){var i,a,o,u;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=xo(t),o={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=11;break}return e.next=5,go(a,o,"getOobCode",!0);case 5:return u=e.sent,r&&Qu(a,u,r),e.next=9,jo(a,u);case 9:e.next=14;break;case 11:return r&&Qu(a,o,r),e.next=14,jo(a,o).catch(function(){var e=Ae(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,go(a,o,"getOobCode",!0);case 4:return n=e.sent,r&&Qu(a,n,r),e.next=8,jo(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),$u.apply(this,arguments)}function Yu(){return Yu=Ae(_e().mark((function e(t,n,r){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Co(Yn(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),Yu.apply(this,arguments)}function Xu(){return Xu=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Do(Yn(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),Xu.apply(this,arguments)}function Ju(e,t){return Zu.apply(this,arguments)}function Zu(){return Zu=Ae(_e().mark((function e(t,n){var r,i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yn(t),e.next=3,Co(r,{oobCode:n});case 3:i=e.sent,Qi(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Qi(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Qi(i.mfaInfo,r,"internal-error");case 13:Qi(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Gu._fromServerResponse(xo(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),Zu.apply(this,arguments)}function es(){return es=Ae(_e().mark((function e(t,n){var r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ju(Yn(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),es.apply(this,arguments)}function ts(e,t,n){return ns.apply(this,arguments)}function ns(){return ns=Ae(_e().mark((function e(t,n,r){var i,a,o,u,s,c,l;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=xo(t),o={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,go(a,o,"signUpPassword");case 5:s=e.sent,u=gu(a,s),e.next=10;break;case 9:u=gu(a,o).catch(function(){var e=Ae(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,go(a,o,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",gu(a,n));case 8:return e.abrupt("return",Promise.reject(t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,u.catch((function(e){return Promise.reject(e)}));case 12:return c=e.sent,e.next=15,bu._fromIdTokenResponse(a,"signIn",c);case 15:return l=e.sent,e.next=18,a._updateCurrentUser(l.user);case 18:return e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)}))),ns.apply(this,arguments)}function rs(){return rs=Ae(_e().mark((function e(t,n,r){var i,a,o,u,s;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(e,t){Qi(t.handleCodeInApp,a,"argument-error"),t&&Qu(a,e,t)},a=xo(t),o={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=12;break}return e.next=6,go(a,o,"getOobCode",!0);case 6:return s=e.sent,u(s,r),e.next=10,Bo(a,s);case 10:e.next=15;break;case 12:return u(o,r),e.next=15,Bo(a,o).catch(function(){var e=Ae(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,go(a,o,"getOobCode",!0);case 4:return n=e.sent,u(n,r),e.next=8,Bo(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)}))),rs.apply(this,arguments)}function is(){return is=Ae(_e().mark((function e(t,n,r){var i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Yn(t),Qi((a=su.credentialWithLink(n,r||Xi()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Mu(i,a));case 4:case"end":return e.stop()}}),e)}))),is.apply(this,arguments)}function as(e,t){return os.apply(this,arguments)}function os(){return os=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oa(t,"POST","/v1/accounts:createAuthUri",aa(t,n)));case 1:case"end":return e.stop()}}),e)}))),os.apply(this,arguments)}function us(){return us=Ae(_e().mark((function e(t,n){var r,i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ji()?Xi():"http://localhost",i={identifier:n,continueUri:r},e.next=4,as(Yn(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),us.apply(this,arguments)}function ss(){return(ss=Ae(_e().mark((function e(t,n){var r,i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yn(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Qu(r.auth,a,n),e.next=8,Uo(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cs(){return(cs=Ae(_e().mark((function e(t,n,r){var i,a,o,u;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Yn(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Qu(i.auth,o,r),e.next=8,Ko(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ls(e,t){return fs.apply(this,arguments)}function fs(){return fs=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oa(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),fs.apply(this,arguments)}function hs(){return(hs=Ae(_e().mark((function e(t,n){var r,i,a,o,u,s,c;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Yn(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Ea(a,ls(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ds(e,t,n){return ps.apply(this,arguments)}function ps(){return ps=Ae(_e().mark((function e(t,n,r){var i,a,o,u;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Ea(t,No(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),ps.apply(this,arguments)}var vs=De((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ne(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),ms=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i,a){var o;return Ne(this,n),(o=t.call(this,e,r,i)).username=a,o}return De(n)}(vs),ys=function(e){Oe(n,e);var t=Ue(n);function n(e,r){return Ne(this,n),t.call(this,e,"facebook.com",r)}return De(n)}(vs),gs=function(e){Oe(n,e);var t=Ue(n);function n(e,r){return Ne(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return De(n)}(ms),ks=function(e){Oe(n,e);var t=Ue(n);function n(e,r){return Ne(this,n),t.call(this,e,"google.com",r)}return De(n)}(vs),bs=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i){return Ne(this,n),t.call(this,e,"twitter.com",r,i)}return De(n)}(ms);function ws(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Ia(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new vs(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new ys(a,i);case"github.com":return new gs(a,i);case"google.com":return new ks(a,i);case"twitter.com":return new bs(a,i,e.screenName||null);case"custom":case"anonymous":return new vs(a,null);default:return new vs(a,r,i)}}(n)}var xs=function(){function e(t,n,r){Ne(this,e),this.type=t,this.credential=n,this.auth=r}return De(e,[{key:"toJSON",value:function(){return{multiFactorSession:Ee({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),_s=function(){function e(t,n,r){Ne(this,e),this.session=t,this.hints=n,this.signInResolver=r}return De(e,[{key:"resolveSignIn",value:function(){var e=Ae(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=xo(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Gu._fromServerResponse(r,e)}));Qi(i.mfaPendingCredential,r,"internal-error");var o=xs._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Ae(_e().mark((function e(t){var a,u,s;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,bu._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Qi(n.user,r,"internal-error"),e.abrupt("return",bu._forOperation(n.user,n.operationType,u));case 17:qi(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Is(e,t){return oa(e,"POST","/v2/accounts/mfaEnrollment:start",aa(e,t))}function Es(e,t){return oa(e,"POST","/v2/accounts/mfaEnrollment:start",aa(e,t))}function Ss(e,t){return oa(e,"POST","/v2/accounts/mfaEnrollment:finalize",aa(e,t))}function Ts(e,t){return oa(e,"POST","/v2/accounts/mfaEnrollment:withdraw",aa(e,t))}var Cs=function(){function e(t){var n=this;Ne(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Gu._fromServerResponse(t.auth,e)})))}))}return De(e,[{key:"getSession",value:function(){var e=Ae(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=xs,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Ae(_e().mark((function e(t,n){var r,i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Ea(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Ae(_e().mark((function e(t){var n,r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,Ea(this.user,Ts(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),As=new WeakMap;var Ns="__sak",Ps=function(){function e(t,n){Ne(this,e),this.storageRetriever=t,this.type=n}return De(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Ns,"1"),this.storage.removeItem(Ns),Promise.resolve(!0)):Promise.resolve(!1)}catch(MS){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Ds=function(e){Oe(n,e);var t=Ue(n);function n(){var e;return Ne(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Nn();return Qa(e)||eo(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=ro(),e._shouldAllowMigration=!0,e}return De(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);no()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Ae(_e().mark((function e(t,r){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xi(Re(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ae(_e().mark((function e(t){var r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xi(Re(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xi(Re(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Ps);Ds.type="LOCAL";var Os=Ds,Rs=function(e){Oe(n,e);var t=Ue(n);function n(){return Ne(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return De(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Ps);Rs.type="SESSION";var Ls=Rs;function Ms(e){return Promise.all(e.map(function(){var e=Ae(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Fs=function(){function e(t){Ne(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return De(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Ae(_e().mark((function e(t){var n,r,i,a,o,u,s,c;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Ms(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Us(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Fs.receivers=[];var Vs=function(){function e(t){Ne(this,e),this.target=t,this.handlers=new Set}return De(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Ae(_e().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Us("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function js(){return window}function zs(e){js().location.href=e}function Bs(){return"undefined"!==typeof js().WorkerGlobalScope&&"function"===typeof js().importScripts}function qs(){return Ks.apply(this,arguments)}function Ks(){return(Ks=Ae(_e().mark((function e(){var t;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Gs(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Hs="firebaseLocalStorageDb",Ws="firebaseLocalStorage",Qs="fbase_key",$s=function(){function e(t){Ne(this,e),this.request=t}return De(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Ys(e,t){return e.transaction([Ws],t?"readwrite":"readonly").objectStore(Ws)}function Xs(){var e=indexedDB.deleteDatabase(Hs);return new $s(e).toPromise()}function Js(){var e=indexedDB.open(Hs,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Ws,{keyPath:Qs})}catch(r){n(r)}})),e.addEventListener("success",Ae(_e().mark((function n(){var r;return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Ws)){n.next=12;break}return r.close(),n.next=5,Xs();case 5:return n.t0=t,n.next=8,Js();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Zs(e,t,n){return ec.apply(this,arguments)}function ec(){return ec=Ae(_e().mark((function e(t,n,r){var i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ys(t,!0).put((Ee(i={},Qs,n),Ee(i,"value",r),i)),e.abrupt("return",new $s(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),ec.apply(this,arguments)}function tc(e,t){return nc.apply(this,arguments)}function nc(){return nc=Ae(_e().mark((function e(t,n){var r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ys(t,!1).get(n),e.next=3,new $s(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),nc.apply(this,arguments)}function rc(e,t){var n=Ys(e,!0).delete(t);return new $s(n).toPromise()}var ic=function(){function e(){Ne(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return De(e,[{key:"_openDb",value:function(){var e=Ae(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Js();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Ae(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Ae(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Bs()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Ae(_e().mark((function e(){var t=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Fs._getInstance(Bs()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Ae(_e().mark((function e(n,r){var i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Ae(_e().mark((function e(){var t,n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qs();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Vs(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Gs()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Ae(_e().mark((function e(){var t;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Js();case 5:return t=e.sent,e.next=8,Zs(t,Ns,"1");case 8:return e.next=10,rc(t,Ns);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Ae(_e().mark((function e(t,n){var r=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Ae(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Zs(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ae(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return tc(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ae(_e().mark((function e(t){var n=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Ae(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return rc(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Ae(_e().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Ys(e,!1).getAll();return new $s(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=vn(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Ae(_e().mark((function t(){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();ic.type="LOCAL";var ac=ic;function oc(e,t){return oa(e,"POST","/v2/accounts/mfaSignIn:start",aa(e,t))}function uc(e,t){return oa(e,"POST","/v2/accounts/mfaSignIn:finalize",aa(e,t))}var sc=1e12,cc=function(){function e(t){Ne(this,e),this.auth=t,this.counter=sc,this._widgets=new Map}return De(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new lc(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||sc;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||sc;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Ae(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||sc,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),lc=function(){function e(t,n,r){var i=this;Ne(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Qi(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return De(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var fc=po("rcb"),hc=new ea(3e4,6e4),dc="https://www.google.com/recaptcha/api.js?",pc=function(){function e(){var t;Ne(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=js().grecaptcha)||void 0===t?void 0:t.render)}return De(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Qi(vc(n),e,"argument-error"),this.shouldResolveImmediately(n)&&co(js().grecaptcha)?Promise.resolve(js().grecaptcha):new Promise((function(r,i){var a=js().setTimeout((function(){i(Ki(e,"network-request-failed"))}),hc.get());js()[fc]=function(){js().clearTimeout(a),delete js()[fc];var o=js().grecaptcha;if(o&&co(o)){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Ki(e,"internal-error"))},ho("".concat(dc,"?").concat(Kn({onload:fc,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Ki(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=js().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function vc(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var mc=function(){function e(){Ne(this,e)}return De(e,[{key:"load",value:function(){var e=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new cc(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),yc="recaptcha",gc={theme:"light",type:"image"},kc=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},gc),r=arguments.length>2?arguments[2]:void 0;Ne(this,e),this.parameters=n,this.type=yc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=xo(r),this.isInvisible="invisible"===this.parameters.size,Qi("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Qi(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new mc:new pc,this.validateStartingState()}return De(e,[{key:"verify",value:function(){var e=Ae(_e().mark((function e(){var t,n,r,i=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Qi(!this.parameters.sitekey,this.auth,"argument-error"),Qi(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Qi("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=js()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Qi(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Ae(_e().mark((function e(){var t,n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Ae(_e().mark((function e(){var t;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qi(Ji()&&!Bs(),this.auth,"internal-error"),e.next=3,bc();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,ao(this.auth);case 8:Qi(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Qi(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function bc(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var wc=function(){function e(t,n){Ne(this,e),this.verificationId=t,this.onConfirmation=n}return De(e,[{key:"confirm",value:function(e){var t=ou._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function xc(){return xc=Ae(_e().mark((function e(t,n,r){var i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xo(t),e.next=3,Sc(i,n,Yn(r));case 3:return a=e.sent,e.abrupt("return",new wc(a,(function(e){return Mu(i,e)})));case 5:case"end":return e.stop()}}),e)}))),xc.apply(this,arguments)}function _c(e,t,n){return Ic.apply(this,arguments)}function Ic(){return(Ic=Ae(_e().mark((function e(t,n,r){var i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Yn(t),e.next=3,Nu(!1,i,"phone");case 3:return e.next=5,Sc(i.auth,n,Yn(r));case 5:return a=e.sent,e.abrupt("return",new wc(a,(function(e){return Uu(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ec(){return(Ec=Ae(_e().mark((function e(t,n,r){var i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Yn(t),e.next=3,Sc(i.auth,n,Yn(r));case 3:return a=e.sent,e.abrupt("return",new wc(a,(function(e){return ju(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sc(e,t,n){return Tc.apply(this,arguments)}function Tc(){return Tc=Ae(_e().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Qi("string"===typeof a,t,"argument-error"),Qi(r.type===yc,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Qi("enroll"===u.type,t,"internal-error"),e.next=13,Is(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Qi("signin"===u.type,t,"internal-error"),Qi(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,oc(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,eu(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Tc.apply(this,arguments)}function Cc(){return(Cc=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cu(Yn(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ac=function(){function e(t){Ne(this,e),this.providerId=e.PROVIDER_ID,this.auth=xo(t)}return De(e,[{key:"verifyPhoneNumber",value:function(e,t){return Sc(this.auth,e,Yn(t))}}],[{key:"credential",value:function(e,t){return ou._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?ou._fromTokenResponse(n,r):null}}]),e}();function Nc(e,t){return t?za(t):(Qi(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ac.PROVIDER_ID="phone",Ac.PHONE_SIGN_IN_METHOD="phone";var Pc=function(e){Oe(n,e);var t=Ue(n);function n(e){var r;return Ne(this,n),(r=t.call(this,"custom","custom")).params=e,r}return De(n,[{key:"_getIdTokenResponse",value:function(e){return Xo(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Xo(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Xo(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(To);function Dc(e){return Ru(e.auth,new Pc(e),e.bypassAuthState)}function Oc(e){var t=e.auth,n=e.user;return Qi(n,t,"internal-error"),Du(n,new Pc(e),e.bypassAuthState)}function Rc(e){return Lc.apply(this,arguments)}function Lc(){return Lc=Ae(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Qi(r=t.user,n,"internal-error"),e.abrupt("return",Cu(r,new Pc(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),Lc.apply(this,arguments)}var Mc=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Ne(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return De(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Ae(_e().mark((function t(n,r){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Ae(_e().mark((function e(t){var n,r,i,a,o,u,s;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Dc;case"linkViaPopup":case"linkViaRedirect":return Rc;case"reauthViaPopup":case"reauthViaRedirect":return Oc;default:qi(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Fc=new ea(2e3,1e4);function Uc(e,t,n){return Vc.apply(this,arguments)}function Vc(){return Vc=Ae(_e().mark((function e(t,n,r){var i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xo(t),Hi(t,n,cu),a=Nc(i,r),o=new qc(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Vc.apply(this,arguments)}function jc(){return jc=Ae(_e().mark((function e(t,n,r){var i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hi((i=Yn(t)).auth,n,cu),a=Nc(i.auth,r),o=new qc(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),jc.apply(this,arguments)}function zc(e,t,n){return Bc.apply(this,arguments)}function Bc(){return Bc=Ae(_e().mark((function e(t,n,r){var i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hi((i=Yn(t)).auth,n,cu),a=Nc(i.auth,r),o=new qc(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Bc.apply(this,arguments)}var qc=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i,a,o){var u;return Ne(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=Me(u),u}return De(n,[{key:"executeNotNull",value:function(){var e=Ae(_e().mark((function e(){var t;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Qi(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Ae(_e().mark((function e(){var t,n=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yi(1===this.filter.length,"Popup operations only handle one event"),t=Us(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Ki(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Ki(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Ki(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,Fc.get())}()}}]),n}(Mc);qc.currentPopupAction=null;var Kc=new Map,Gc=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ne(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return De(n,[{key:"execute",value:function(){var e=Ae(_e().mark((function e(){var t,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Kc.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Hc(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,xi(Re(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Kc.set(this.auth._key(),t);case 21:return this.bypassAuthState||Kc.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Ae(_e().mark((function e(t){var r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",xi(Re(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",xi(Re(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Ae(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Mc);function Hc(e,t){return Wc.apply(this,arguments)}function Wc(){return Wc=Ae(_e().mark((function e(t,n){var r,i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jc(n),i=Xc(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Wc.apply(this,arguments)}function Qc(e,t){return $c.apply(this,arguments)}function $c(){return $c=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xc(t)._set(Jc(n),"true"));case 1:case"end":return e.stop()}}),e)}))),$c.apply(this,arguments)}function Yc(e,t){Kc.set(e._key(),t)}function Xc(e){return za(e._redirectPersistence)}function Jc(e){return Ka("pendingRedirect",e.config.apiKey,e.name)}function Zc(e,t,n){return function(e,t,n){return el.apply(this,arguments)}(e,t,n)}function el(){return el=Ae(_e().mark((function e(t,n,r){var i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xo(t),Hi(t,n,cu),e.next=4,i._initializationPromise;case 4:return a=Nc(i,r),e.next=7,Qc(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)}))),el.apply(this,arguments)}function tl(e,t,n){return function(e,t,n){return nl.apply(this,arguments)}(e,t,n)}function nl(){return nl=Ae(_e().mark((function e(t,n,r){var i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hi((i=Yn(t)).auth,n,cu),e.next=4,i.auth._initializationPromise;case 4:return a=Nc(i.auth,r),e.next=7,Qc(a,i.auth);case 7:return e.next=9,cl(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)}))),nl.apply(this,arguments)}function rl(e,t,n){return function(e,t,n){return il.apply(this,arguments)}(e,t,n)}function il(){return il=Ae(_e().mark((function e(t,n,r){var i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hi((i=Yn(t)).auth,n,cu),e.next=4,i.auth._initializationPromise;case 4:return a=Nc(i.auth,r),e.next=7,Nu(!1,i,n.providerId);case 7:return e.next=9,Qc(a,i.auth);case 9:return e.next=11,cl(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)}))),il.apply(this,arguments)}function al(e,t){return ol.apply(this,arguments)}function ol(){return ol=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xo(t)._initializationPromise;case 2:return e.abrupt("return",ul(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),ol.apply(this,arguments)}function ul(e,t){return sl.apply(this,arguments)}function sl(){return sl=Ae(_e().mark((function e(t,n){var r,i,a,o,u,s=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=xo(t),a=Nc(i,n),o=new Gc(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),sl.apply(this,arguments)}function cl(e){return ll.apply(this,arguments)}function ll(){return(ll=Ae(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Us("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fl=function(){function e(t){Ne(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return De(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dl(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!dl(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ki(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(hl(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(hl(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function hl(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function dl(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function pl(e){return vl.apply(this,arguments)}function vl(){return vl=Ae(_e().mark((function e(t){var n,r=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",oa(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),vl.apply(this,arguments)}var ml=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yl=/^https?/;function gl(){return gl=Ae(_e().mark((function e(t){var n,r,i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,pl(t);case 4:n=e.sent,r=n.authorizedDomains,i=vn(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!kl(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:qi(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),gl.apply(this,arguments)}function kl(e){var t=Xi(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!yl.test(r))return!1;if(ml.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var bl=new ea(3e4,6e4);function wl(){var e=js().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Je(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var xl=null;function _l(e){return xl=xl||function(e){return new Promise((function(t,n){var r,i,a;function o(){wl(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){wl(),n(Ki(e,"network-request-failed"))},timeout:bl.get()})}if(null===(i=null===(r=js().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=js().gapi)||void 0===a?void 0:a.load)){var u=po("iframefcb");return js()[u]=function(){gapi.load?o():n(Ki(e,"network-request-failed"))},ho("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw xl=null,e}))}(e),xl}var Il=new ea(5e3,15e3),El={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Sl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Tl(e){var t=e.config;Qi(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?ta(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Kr},i=Sl.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Kn(r).slice(1))}function Cl(e){return Al.apply(this,arguments)}function Al(){return Al=Ae(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_l(t);case 2:return n=e.sent,Qi(r=js().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Tl(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:El,dontclear:!0},(function(e){return new Promise(function(){var n=Ae(_e().mark((function n(r,i){var a,o,u;return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){js().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Ki(t,"network-request-failed"),o=js().setTimeout((function(){i(a)}),Il.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Al.apply(this,arguments)}var Nl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Pl="_blank",Dl="http://localhost",Ol=function(){function e(t){Ne(this,e),this.window=t,this.associatedEvent=null}return De(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Rl(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},Nl),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Nn().toLowerCase();n&&(u=$a(c)?Pl:n),Wa(c)&&(t=t||Dl,s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=Ye(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(to(c)&&"_self"!==u)return Ll(t||"",u),new Ol(null);var f=window.open(t||"",u,l);Qi(f,e,"popup-blocked");try{f.focus()}catch(h){}return new Ol(f)}function Ll(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Ml=encodeURIComponent("fac");function Fl(e,t,n,r,i,a){return Ul.apply(this,arguments)}function Ul(){return Ul=Ae(_e().mark((function e(t,n,r,i,a,o){var u,s,c,l,f,h,d,p,v,m,y,g,k;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Qi(t.config.authDomain,t,"auth-domain-config-required"),Qi(t.config.apiKey,t,"invalid-api-key"),u={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:Kr,eventId:a},n instanceof cu)for(n.setDefaultLanguage(t.languageCode),u.providerId=n.providerId||"",zn(n.getCustomParameters())||(u.customParameters=JSON.stringify(n.getCustomParameters())),s=0,c=Object.entries(o||{});s<c.length;s++)l=Ye(c[s],2),f=l[0],h=l[1],u[f]=h;for(n instanceof lu&&(d=n.getScopes().filter((function(e){return""!==e}))).length>0&&(u.scopes=d.join(",")),t.tenantId&&(u.tid=t.tenantId),p=u,v=0,m=Object.keys(p);v<m.length;v++)y=m[v],void 0===p[y]&&delete p[y];return e.next=10,t._getAppCheckToken();case 10:return g=e.sent,k=g?"#".concat(Ml,"=").concat(encodeURIComponent(g)):"",e.abrupt("return","".concat(Vl(t),"?").concat(Kn(p).slice(1)).concat(k));case 13:case"end":return e.stop()}}),e)}))),Ul.apply(this,arguments)}function Vl(e){var t=e.config;return t.emulator?ta(t,"emulator/auth/handler"):"https://".concat(t.authDomain,"/").concat("__/auth/handler")}var jl="webStorageSupport",zl=function(){function e(){Ne(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ls,this._completeRedirectFn=ul,this._overrideRedirectResult=Yc}return De(e,[{key:"_openPopup",value:function(){var e=Ae(_e().mark((function e(t,n,r,i){var a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yi(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,Fl(t,n,r,Xi(),i);case 3:return o=e.sent,e.abrupt("return",Rl(t,o,Us()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Ae(_e().mark((function e(t,n,r,i){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,Fl(t,n,r,Xi(),i);case 4:return zs(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Yi(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Ae(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cl(t);case 2:return n=e.sent,r=new fl(t),n.register("authEvent",(function(e){return Qi(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(jl,{type:jl},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[jl];void 0!==i&&t(!!i),qi(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return gl.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return ro()||Qa()||eo()}}]),e}(),Bl=zl,ql=function(){function e(t){Ne(this,e),this.factorId=t}return De(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return $i("unexpected MultiFactorSessionType")}}}]),e}(),Kl=function(e){Oe(n,e);var t=Ue(n);function n(e){var r;return Ne(this,n),(r=t.call(this,"phone")).credential=e,r}return De(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return oa(e,"POST","/v2/accounts/mfaEnrollment:finalize",aa(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return oa(e,"POST","/v2/accounts/mfaSignIn:finalize",aa(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(ql),Gl=function(){function e(){Ne(this,e)}return De(e,null,[{key:"assertion",value:function(e){return Kl._fromCredential(e)}}]),e}();Gl.FACTOR_ID="phone";var Hl=function(){function e(){Ne(this,e)}return De(e,null,[{key:"assertionForEnrollment",value:function(e,t){return Wl._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return Wl._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=Ae(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qi("undefined"!==typeof(n=t).auth,"internal-error"),e.next=4,Es(n.auth,{idToken:n.credential,totpEnrollmentInfo:{}});case 4:return r=e.sent,e.abrupt("return",Ql._fromStartTotpMfaEnrollmentResponse(r,n.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();Hl.FACTOR_ID="totp";var Wl=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i){var a;return Ne(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return De(n,[{key:"_finalizeEnroll",value:function(){var e=Ae(_e().mark((function e(t,n,r){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qi("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",Ss(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=Ae(_e().mark((function e(t,n){var r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qi(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",uc(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(ql),Ql=function(){function e(t,n,r,i,a,o,u){Ne(this,e),this.sessionInfo=o,this.auth=u,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return De(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return($l(e)||$l(t))&&(r=!0),r&&($l(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),$l(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function $l(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var Yl="@firebase/auth",Xl="0.23.1",Jl=function(){function e(t){Ne(this,e),this.auth=t,this.internalListeners=new Map}return De(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Ae(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Qi(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var Zl;!function(e){var t;null===(t=Sn())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function ef(){return window}Zl="Browser",Fr(new Xn("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,u=o.apiKey,s=o.authDomain;Qi(u&&!u.includes(":"),"invalid-api-key",{appName:r.name}),Qi(!(null===s||void 0===s?void 0:s.includes(":")),"argument-error",{appName:r.name});var c={apiKey:u,authDomain:s,clientPlatform:Zl,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:io(Zl)},l=new wo(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(za);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Fr(new Xn("auth-internal",(function(e){return function(e){return new Jl(e)}(xo(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Yr(Yl,Xl,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Zl)),Yr(Yl,Xl,"esm2017");function tf(e,t,n){return nf.apply(this,arguments)}function nf(){return nf=Ae(_e().mark((function e(t,n,r){var i,a,o,u,s;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ef(),o=a.BuildInfo,Yi(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,cf(n.sessionId);case 4:return u=e.sent,s={},eo()?s.ibi=o.packageName:Xa()?s.apn=o.packageName:qi(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Fl(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),nf.apply(this,arguments)}function rf(){return rf=Ae(_e().mark((function e(t){var n,r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ef(),r=n.BuildInfo,i={},eo()?i.iosBundleId=r.packageName:Xa()?i.androidPackageName=r.packageName:qi(t,"operation-not-supported-in-this-environment"),e.next=5,pl(t,i);case 5:case"end":return e.stop()}}),e)}))),rf.apply(this,arguments)}function af(e){var t=ef().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function of(e,t,n){return uf.apply(this,arguments)}function uf(){return uf=Ae(_e().mark((function e(t,n,r){var i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ef(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Ki(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Xa()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),uf.apply(this,arguments)}function sf(e){var t,n,r,i,a,o,u,s,c,l,f=ef();Qi("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Qi("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Qi("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Qi("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Qi("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function cf(e){return lf.apply(this,arguments)}function lf(){return(lf=Ae(_e().mark((function e(t){var n,r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ff(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ff(e){if(Yi(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var hf=function(e){Oe(n,e);var t=Ue(n);function n(){var e;return Ne(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return De(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),xi(Re(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Ae(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(fl);function df(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:gf(),postBody:null,tenantId:e.tenantId,error:Ki(e,"no-auth-event")}}function pf(e,t){return kf()._set(bf(e),t)}function vf(e){return mf.apply(this,arguments)}function mf(){return mf=Ae(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kf()._get(bf(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,kf()._remove(bf(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),mf.apply(this,arguments)}function yf(e,t){var n,r,i=function(e){var t=wf(e),n=t.link?decodeURIComponent(t.link):void 0,r=wf(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return wf(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=wf(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Ki(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function gf(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function kf(){return za(Os)}function bf(e){return Ka("authEvent",e.config.apiKey,e.name)}function wf(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=He(t=n)||Xe(t)||Qe(t)||$e();r[0];return Gn(r.slice(1).join("?"))}var xf=function(){function e(){Ne(this,e),this._redirectPersistence=Ls,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ul,this._overrideRedirectResult=Yc}return De(e,[{key:"_initialize",value:function(){var e=Ae(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new hf(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){qi(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Ae(_e().mark((function e(t,n,r,i){var a,o,u,s;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sf(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Kc.clear(),e.next=10,this._originValidation(t);case 10:return o=df(t,r,i),e.next=13,pf(t,o);case 13:return e.next=15,tf(t,o,n);case 15:return u=e.sent,e.next=18,af(u);case 18:return s=e.sent,e.abrupt("return",of(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return rf.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=ef(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Ae(_e().mark((function n(){return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,vf(e);case 2:t.onEvent(If());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=Ae(_e().mark((function n(r){var i,a;return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,vf(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=yf(i,r.url)),t.onEvent(a||If());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");ef().handleOpenURL=function(){var e=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),_f=xf;function If(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ki("no-auth-event")}}function Ef(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Sf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn();return!("file:"!==Ef()&&"ionic:"!==Ef()&&"capacitor:"!==Ef()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Tf(){return Rn()&&11===(null===document||void 0===document?void 0:document.documentMode)}function Cf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn();return/Edge\/\d+/.test(e)}function Af(){try{var e=self.localStorage,t=Us();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn();return Tf()||Cf(e)}()||Ln()}catch(n){return Nf()&&Ln()}return!1}function Nf(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Pf(){return("http:"===Ef()||"https:"===Ef()||Dn()||Sf())&&!(On()||Pn())&&Af()&&!Nf()}function Df(){return Sf()&&"undefined"!==typeof document}function Of(){return Rf.apply(this,arguments)}function Rf(){return(Rf=Ae(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Df()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Lf={LOCAL:"local",NONE:"none",SESSION:"session"},Mf=Qi,Ff="persistence";function Uf(e,t){Mf(Object.values(Lf).includes(t),e,"invalid-persistence-type"),On()?Mf(t!==Lf.SESSION,e,"unsupported-persistence-type"):Pn()?Mf(t===Lf.NONE,e,"unsupported-persistence-type"):Nf()?Mf(t===Lf.NONE||t===Lf.LOCAL&&Ln(),e,"unsupported-persistence-type"):Mf(t===Lf.NONE||Af(),e,"unsupported-persistence-type")}function Vf(e){return jf.apply(this,arguments)}function jf(){return jf=Ae(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=zf(),r=Ka(Ff,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),jf.apply(this,arguments)}function zf(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Bf=Qi,qf=function(){function e(){Ne(this,e),this.browserResolver=za(Bl),this.cordovaResolver=za(_f),this.underlyingResolver=null,this._redirectPersistence=Ls,this._completeRedirectFn=ul,this._overrideRedirectResult=Yc}return De(e,[{key:"_initialize",value:function(){var e=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Ae(_e().mark((function e(t,n,r,i){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Ae(_e().mark((function e(t,n,r,i){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Df()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Bf(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Ae(_e().mark((function e(){var t;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Of();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Kf(e){return e.unwrap()}function Gf(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new Yf(e,function(e,t){var n,r=Yn(e),i=t;return Qi(t.customData.operationType,r,"argument-error"),Qi(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),_s._fromError(r,i)}(e,t));else if(r){var i=Hf(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Hf(e){var t=(e instanceof Mn?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Mn)&&"temporaryProof"in t&&"phoneNumber"in t)return Ac.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Ci)return null;switch(r){case Ti:n=du;break;case Ei:n=hu;break;case Si:n=pu;break;case Ai:n=yu;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?vu._create(r,u):Zo._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new fu(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Mn?n.credentialFromError(e):n.credentialFromResult(e)}function Wf(e,t){return t.catch((function(t){throw t instanceof Mn&&Gf(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Hf(t)),additionalUserInfo:ws(e),user:Xf.getOrCreate(r)}}))}function Qf(e,t){return $f.apply(this,arguments)}function $f(){return $f=Ae(_e().mark((function e(t,n){var r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Wf(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),$f.apply(this,arguments)}var Yf=function(){function e(t,n){Ne(this,e),this.resolver=n,this.auth=t.wrapped()}return De(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Wf(Kf(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Xf=function(){function e(t){Ne(this,e),this._delegate=t,this.multiFactor=function(e){var t=Yn(e);return As.has(t)||As.set(t,Cs._fromUser(t)),As.get(t)}(t)}return De(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wf(this.auth,Uu(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qf(this.auth,_c(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wf(this.auth,zc(this._delegate,t,qf)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vf(xo(this.auth));case 2:return e.abrupt("return",rl(this._delegate,t,qf));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wf(this.auth,ju(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Qf(this.auth,function(e,t,n){return Ec.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Wf(this.auth,function(e,t,n){return jc.apply(this,arguments)}(this._delegate,e,qf))}},{key:"reauthenticateWithRedirect",value:function(){var e=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vf(xo(this.auth));case 2:return e.abrupt("return",tl(this._delegate,t,qf));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return ss.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Su(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return ds(Yn(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return ds(Yn(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Cc.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return hs.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return cs.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Xf.USER_MAP=new WeakMap;var Jf=Qi,Zf=function(){function e(t,n){if(Ne(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Jf(r,"invalid-api-key",{appName:t.name}),Jf(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?qf:void 0;this._delegate=n.initialize({options:{persistence:th(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Fi),this.linkUnderlyingAuth()}return De(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Xf.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Io(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Xu.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Ju(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Yu.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wf(this._delegate,ts(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return us.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=uu.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Ae(_e().mark((function e(){var t;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jf(Pf(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,al(this._delegate,qf);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Wf(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){xo(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=eh(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=eh(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return rs.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return $u.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Ae(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Uf(this._delegate,t),e.t0=t,e.next=e.t0===Lf.SESSION?4:e.t0===Lf.LOCAL?6:e.t0===Lf.NONE?11:13;break;case 4:return n=Ls,e.abrupt("break",14);case 6:return e.next=8,za(ac)._isAvailable();case 8:return r=e.sent,n=r?ac:Os,e.abrupt("break",14);case 11:return n=qa,e.abrupt("break",14);case 13:return e.abrupt("return",qi("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Wf(this._delegate,function(e){return xu.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Wf(this._delegate,Mu(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Wf(this._delegate,function(e,t){return Ku.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Wf(this._delegate,function(e,t,n){return Mu(Yn(e),su.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Wf(this._delegate,function(e,t,n){return is.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Qf(this._delegate,function(e,t,n){return xc.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jf(Pf(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Wf(this._delegate,Uc(this._delegate,t,qf)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jf(Pf(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Vf(this._delegate);case 3:return e.abrupt("return",Zc(this._delegate,t,qf));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return es.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function eh(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Xf.getOrCreate(e))},error:t,complete:n}}function th(e,t){var n=function(e,t){var n=zf();if(!n)return[];var r=Ka(Ff,e,t);switch(n.getItem(r)){case Lf.NONE:return[qa];case Lf.LOCAL:return[ac,Ls];case Lf.SESSION:return[Ls];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(ac)||n.push(ac),"undefined"!==typeof window)for(var r=0,i=[Os,Ls];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(qa)||n.push(qa),n}Zf.Persistence=Lf;var nh=function(){function e(){Ne(this,e),this.providerId="phone",this._delegate=new Ac(Kf(bi.auth()))}return De(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Ac.credential(e,t)}}]),e}();nh.PHONE_SIGN_IN_METHOD=Ac.PHONE_SIGN_IN_METHOD,nh.PROVIDER_ID=Ac.PROVIDER_ID;var rh,ih=Qi,ah=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bi.app();Ne(this,e),ih(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new kc(t,n,i.auth()),this.type=this._delegate.type}return De(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(rh=bi).INTERNAL.registerComponent(new Xn("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Zf(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ni,PASSWORD_RESET:Pi,RECOVER_EMAIL:Di,REVERT_SECOND_FACTOR_ADDITION:Oi,VERIFY_AND_CHANGE_EMAIL:Ri,VERIFY_EMAIL:Li}},EmailAuthProvider:su,FacebookAuthProvider:hu,GithubAuthProvider:pu,GoogleAuthProvider:du,OAuthProvider:fu,SAMLAuthProvider:mu,PhoneAuthProvider:nh,PhoneMultiFactorGenerator:Gl,RecaptchaVerifier:ah,TwitterAuthProvider:yu,Auth:Zf,AuthCredential:To,Error:Mn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),rh.registerVersion("@firebase/auth-compat","0.4.1");var oh,uh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},sh={},ch=ch||{},lh=uh||self;function fh(){}function hh(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function dh(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ph="closure_uid_"+(1e9*Math.random()>>>0),vh=0;function mh(e,t,n){return e.call.apply(e.bind,arguments)}function yh(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function gh(e,t,n){return(gh=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?mh:yh).apply(null,arguments)}function kh(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function bh(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function wh(){this.s=this.s,this.o=this.o}wh.prototype.s=!1,wh.prototype.ra=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,ph)&&e[ph]||(e[ph]=++vh))},wh.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var xh=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function _h(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ih(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(hh(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Eh(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Eh.prototype.h=function(){this.defaultPrevented=!0};var Sh=function(){if(!lh.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{lh.addEventListener("test",fh,t),lh.removeEventListener("test",fh,t)}catch(n){}return e}();function Th(e){return/^[\s\xa0]*$/.test(e)}var Ch=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Ah(e,t){return e<t?-1:e>t?1:0}function Nh(){var e=lh.navigator;return e&&(e=e.userAgent)?e:""}function Ph(e){return-1!=Nh().indexOf(e)}function Dh(e){return Dh[" "](e),e}function Oh(e,t,n){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:e[t]=n(t)}Dh[" "]=fh;var Rh,Lh=Ph("Opera"),Mh=Ph("Trident")||Ph("MSIE"),Fh=Ph("Edge"),Uh=Fh||Mh,Vh=Ph("Gecko")&&!(-1!=Nh().toLowerCase().indexOf("webkit")&&!Ph("Edge"))&&!(Ph("Trident")||Ph("MSIE"))&&!Ph("Edge"),jh=-1!=Nh().toLowerCase().indexOf("webkit")&&!Ph("Edge");function zh(){var e=lh.document;return e?e.documentMode:void 0}e:{var Bh="",qh=function(){var e=Nh();return Vh?/rv:([^\);]+)(\)|;)/.exec(e):Fh?/Edge\/([\d\.]+)/.exec(e):Mh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):jh?/WebKit\/(\S+)/.exec(e):Lh?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(qh&&(Bh=qh?qh[1]:""),Mh){var Kh=zh();if(null!=Kh&&Kh>parseFloat(Bh)){Rh=String(Kh);break e}}Rh=Bh}var Gh,Hh={};if(lh.document&&Mh){var Wh=zh();Gh=Wh||(parseInt(Rh,10)||void 0)}else Gh=void 0;var Qh=Gh;function $h(e,t){if(Eh.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Vh){e:{try{Dh(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Yh[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&$h.$.h.call(this)}}bh($h,Eh);var Yh={2:"touch",3:"pen",4:"mouse"};$h.prototype.h=function(){$h.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Xh="closure_listenable_"+(1e6*Math.random()|0),Jh=0;function Zh(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Jh,this.fa=this.ia=!1}function ed(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function td(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function nd(e){var t={};for(var n in e)t[n]=e[n];return t}var rd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function id(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<rd.length;a++)n=rd[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ad(e){this.src=e,this.g={},this.h=0}function od(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=xh(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(ed(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ud(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}ad.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=ud(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Zh(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var sd="closure_lm_"+(1e6*Math.random()|0),cd={};function ld(e,t,n,r,i){if(r&&r.once)return hd(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)ld(e,t[a],n,r,i);return null}return n=kd(n),e&&e[Xh]?e.O(t,n,dh(r)?!!r.capture:!!r,i):fd(e,t,n,!1,r,i)}function fd(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=dh(i)?!!i.capture:!!i,u=yd(e);if(u||(e[sd]=u=new ad(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=md;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Sh||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(vd(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function hd(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)hd(e,t[a],n,r,i);return null}return n=kd(n),e&&e[Xh]?e.P(t,n,dh(r)?!!r.capture:!!r,i):fd(e,t,n,!0,r,i)}function dd(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)dd(e,t[a],n,r,i);else r=dh(r)?!!r.capture:!!r,n=kd(n),e&&e[Xh]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=ud(a=e.g[t],n,r,i))&&(ed(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=yd(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ud(t,n,r,i)),(n=-1<e?t[e]:null)&&pd(n))}function pd(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Xh])od(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(vd(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=yd(t))?(od(n,e),0==n.h&&(n.src=null,t[sd]=null)):ed(e)}}}function vd(e){return e in cd?cd[e]:cd[e]="on"+e}function md(e,t){if(e.fa)e=!0;else{t=new $h(t,this);var n=e.listener,r=e.la||e.src;e.ia&&pd(e),e=n.call(r,t)}return e}function yd(e){return(e=e[sd])instanceof ad?e:null}var gd="__closure_events_fn_"+(1e9*Math.random()>>>0);function kd(e){return"function"===typeof e?e:(e[gd]||(e[gd]=function(t){return e.handleEvent(t)}),e[gd])}function bd(){wh.call(this),this.i=new ad(this),this.S=this,this.J=null}function wd(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Eh(t,e);else if(t instanceof Eh)t.target=t.target||e;else{var i=t;id(t=new Eh(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=xd(o,r,!0,t)&&i}if(i=xd(o=t.g=e,r,!0,t)&&i,i=xd(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=xd(o=t.g=n[a],r,!1,t)&&i}function xd(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&od(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}bh(bd,wh),bd.prototype[Xh]=!0,bd.prototype.removeEventListener=function(e,t,n,r){dd(this,e,t,n,r)},bd.prototype.N=function(){if(bd.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ed(n[r]);delete t.g[e],t.h--}}this.J=null},bd.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},bd.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var _d=lh.JSON.stringify;function Id(){var e=Dd,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Ed,Sd=function(){function e(){Ne(this,e),this.h=this.g=null}return De(e,[{key:"add",value:function(e,t){var n=Td.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Td=new(function(){function e(t,n){Ne(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return De(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Cd}),(function(e){return e.reset()})),Cd=function(){function e(){Ne(this,e),this.next=this.g=this.h=null}return De(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Ad(e){lh.setTimeout((function(){throw e}),0)}function Nd(e,t){Ed||function(){var e=lh.Promise.resolve(void 0);Ed=function(){e.then(Od)}}(),Pd||(Ed(),Pd=!0),Dd.add(e,t)}var Pd=!1,Dd=new Sd;function Od(){for(var e;e=Id();){try{e.h.call(e.g)}catch(n){Ad(n)}var t=Td;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Pd=!1}function Rd(e,t){bd.call(this),this.h=e||1,this.g=t||lh,this.j=gh(this.qb,this),this.l=Date.now()}function Ld(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Md(e,t,n){if("function"===typeof e)n&&(e=gh(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=gh(e.handleEvent,e)}return 2147483647<Number(t)?-1:lh.setTimeout(e,t||0)}function Fd(e){e.g=Md((function(){e.g=null,e.i&&(e.i=!1,Fd(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}bh(Rd,bd),(oh=Rd.prototype).ga=!1,oh.T=null,oh.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),wd(this,"tick"),this.ga&&(Ld(this),this.start()))}},oh.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},oh.N=function(){Rd.$.N.call(this),Ld(this),delete this.g};var Ud=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return De(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Fd(this)}},{key:"N",value:function(){xi(Re(n.prototype),"N",this).call(this),this.g&&(lh.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(wh);function Vd(e){wh.call(this),this.h=e,this.g={}}bh(Vd,wh);var jd=[];function zd(e,t,n,r){Array.isArray(n)||(n&&(jd[0]=n.toString()),n=jd);for(var i=0;i<n.length;i++){var a=ld(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Bd(e){td(e.g,(function(e,t){this.g.hasOwnProperty(t)&&pd(e)}),e),e.g={}}function qd(){this.g=!0}function Kd(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return _d(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Vd.prototype.N=function(){Vd.$.N.call(this),Bd(this)},Vd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},qd.prototype.Ea=function(){this.g=!1},qd.prototype.info=function(){};var Gd={},Hd=null;function Wd(){return Hd=Hd||new bd}function Qd(e){Eh.call(this,Gd.Ta,e)}function $d(e){var t=Wd();wd(t,new Qd(t))}function Yd(e,t){Eh.call(this,Gd.STAT_EVENT,e),this.stat=t}function Xd(e){var t=Wd();wd(t,new Yd(t,e))}function Jd(e,t){Eh.call(this,Gd.Ua,e),this.size=t}function Zd(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return lh.setTimeout((function(){e()}),t)}Gd.Ta="serverreachability",bh(Qd,Eh),Gd.STAT_EVENT="statevent",bh(Yd,Eh),Gd.Ua="timingevent",bh(Jd,Eh);var ep={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},tp={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function np(){}function rp(e){return e.h||(e.h=e.i())}function ip(){}np.prototype.h=null;var ap,op={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function up(){Eh.call(this,"d")}function sp(){Eh.call(this,"c")}function cp(){}function lp(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Vd(this),this.P=hp,e=Uh?125:void 0,this.V=new Rd(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new fp}function fp(){this.i=null,this.g="",this.h=!1}bh(up,Eh),bh(sp,Eh),bh(cp,np),cp.prototype.g=function(){return new XMLHttpRequest},cp.prototype.i=function(){return{}},ap=new cp;var hp=45e3,dp={},pp={};function vp(e,t,n){e.L=1,e.v=Rp(Ap(t)),e.s=n,e.S=!0,mp(e,null)}function mp(e,t){e.G=Date.now(),bp(e),e.A=Ap(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Wp(n.i,"t",r),e.C=0,n=e.l.I,e.h=new fp,e.g=Qv(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Ud(gh(e.Pa,e,e.g),e.O)),zd(e.U,e.g,"readystatechange",e.nb),t=e.I?nd(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),$d(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function yp(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function gp(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=kp(e,n))==pp){4==t&&(e.o=4,Xd(14),i=!1),Kd(e.j,e.m,null,"[Incomplete Response]");break}if(r==dp){e.o=4,Xd(15),Kd(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Kd(e.j,e.m,r,null),Ep(e,r)}yp(e)&&r!=pp&&r!=dp&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Xd(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ca&&(e.ca=!0,(t=e.l).g==e&&t.ca&&!t.L&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),jv(t),t.L=!0,Xd(11))):(Kd(e.j,e.m,n,"[Invalid Chunked Response]"),Ip(e),_p(e))}function kp(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?pp:(n=Number(t.substring(n,r)),isNaN(n)?dp:(r+=1)+n>t.length?pp:(t=t.substr(r,n),e.C=r+n,t))}function bp(e){e.Y=Date.now()+e.P,wp(e,e.P)}function wp(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Zd(gh(e.lb,e),t)}function xp(e){e.B&&(lh.clearTimeout(e.B),e.B=null)}function _p(e){0==e.l.H||e.J||qv(e.l,e)}function Ip(e){xp(e);var t=e.M;t&&"function"==typeof t.ra&&t.ra(),e.M=null,Ld(e.V),Bd(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ra())}function Ep(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||tv(n.h,e)))if(!e.K&&tv(n.h,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Bv(n),Dv(n)}Vv(n),Xd(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.M&&0==n.A&&!n.v&&(n.v=Zd(gh(n.ib,n),6e3));if(1>=ev(n.h)&&n.na){try{n.na()}catch(a){}n.na=void 0}}else Gv(n,11)}else if((e.K||n.g==e)&&Bv(n),!Th(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.J=a[1],n.oa=a[2];var o=a[3];null!=o&&(n.qa=o,n.j.info("VER="+n.qa));var u=a[4];null!=u&&(n.Ga=u,n.j.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(nv(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,Op(r.G,r.F,h))}}n.H=3,n.l&&n.l.Ba(),n.ca&&(n.S=Date.now()-e.G,n.j.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=Wv(r,r.I?r.oa:null,r.Y),d.K){rv(r.h,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(xp(p),bp(p)),r.g=d}else Uv(r);0<n.i.length&&Rv(n)}else"stop"!=a[0]&&"close"!=a[0]||Gv(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Gv(n,7):Pv(n):"noop"!=a[0]&&n.l&&n.l.Aa(a),n.A=0)}$d()}catch(a){}}function Sp(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(hh(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.sa&&"function"==typeof e.sa)return e.sa();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(hh(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(hh(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(oh=lp.prototype).setTimeout=function(e){this.P=e},oh.nb=function(e){e=e.target;var t=this.M;t&&3==Ev(e)?t.l():this.Pa(e)},oh.Pa=function(e){try{if(e==this.g)e:{var t=Ev(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||Uh||this.g&&(this.h.h||this.g.ja()||Sv(this.g)))){this.J||4!=t||7==n||$d(),xp(this);var r=this.g.da();this.aa=r;t:if(yp(this)){var i=Sv(this.g);e="";var a=i.length,o=4==Ev(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ip(this),_p(this);var u="";break t}this.h.i=new lh.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.ba&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Th(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Xd(12),Ip(this),_p(this);break e}Kd(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ep(this,r)}this.S?(gp(this,t,u),Uh&&this.i&&3==t&&(zd(this.U,this.V,"tick",this.mb),this.V.start())):(Kd(this.j,this.m,u,null),Ep(this,u)),4==t&&Ip(this),this.i&&!this.J&&(4==t?qv(this.l,this):(this.i=!1,bp(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,Xd(12)):(this.o=0,Xd(13)),Ip(this),_p(this)}}}catch(t){}},oh.mb=function(){if(this.g){var e=Ev(this.g),t=this.g.ja();this.C<t.length&&(xp(this),gp(this,e,t),this.i&&4!=e&&bp(this))}},oh.cancel=function(){this.J=!0,Ip(this)},oh.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&($d(),Xd(17)),Ip(this),this.o=2,_p(this)):wp(this,this.Y-e)};var Tp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cp(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Cp){this.h=void 0!==t?t:e.h,Np(this,e.j),this.s=e.s,this.g=e.g,Pp(this,e.m),this.l=e.l,t=e.i;var n=new qp;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Dp(this,n),this.o=e.o}else e&&(n=String(e).match(Tp))?(this.h=!!t,Np(this,n[1]||"",!0),this.s=Lp(n[2]||""),this.g=Lp(n[3]||"",!0),Pp(this,n[4]),this.l=Lp(n[5]||"",!0),Dp(this,n[6]||"",!0),this.o=Lp(n[7]||"")):(this.h=!!t,this.i=new qp(null,this.h))}function Ap(e){return new Cp(e)}function Np(e,t,n){e.j=n?Lp(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Pp(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Dp(e,t,n){t instanceof qp?(e.i=t,function(e,t){t&&!e.j&&(Kp(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Gp(this,t),Wp(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Mp(t,zp)),e.i=new qp(t,e.h))}function Op(e,t,n){e.i.set(t,n)}function Rp(e){return Op(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Lp(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Mp(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Fp),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Fp(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Cp.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Mp(t,Up,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Mp(t,Up,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Mp(n,"/"==n.charAt(0)?jp:Vp,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Mp(n,Bp)),e.join("")};var Up=/[#\/\?@]/g,Vp=/[#\?:]/g,jp=/[#\?]/g,zp=/[#\?@]/g,Bp=/#/g;function qp(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Kp(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Gp(e,t){Kp(e),t=Qp(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Hp(e,t){return Kp(e),t=Qp(e,t),e.g.has(t)}function Wp(e,t,n){Gp(e,t),0<n.length&&(e.i=null,e.g.set(Qp(e,t),_h(n)),e.h+=n.length)}function Qp(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(oh=qp.prototype).add=function(e,t){Kp(this),this.i=null,e=Qp(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},oh.forEach=function(e,t){Kp(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},oh.sa=function(){Kp(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},oh.Z=function(e){Kp(this);var t=[];if("string"===typeof e)Hp(this,e)&&(t=t.concat(this.g.get(Qp(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},oh.set=function(e,t){return Kp(this),this.i=null,Hp(this,e=Qp(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},oh.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},oh.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var $p=De((function e(t,n){Ne(this,e),this.h=t,this.g=n}));function Yp(e){this.l=e||Jp,lh.PerformanceNavigationTiming?e=0<(e=lh.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(lh.g&&lh.g.Ka&&lh.g.Ka()&&lh.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Xp,Jp=10;function Zp(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ev(e){return e.h?1:e.g?e.g.size:0}function tv(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function nv(e,t){e.g?e.g.add(t):e.h=t}function rv(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function iv(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=vn(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return _h(e.i)}function av(){}function ov(){this.g=new av}function uv(e,t,n){var r=n||"";try{Sp(e,(function(e,n){var i=e;dh(e)&&(i=_d(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function sv(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function cv(e){this.l=e.fc||null,this.j=e.ob||!1}function lv(e,t){bd.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=fv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Yp.prototype.cancel=function(){if(this.i=iv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=vn(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},av.prototype.stringify=function(e){return lh.JSON.stringify(e,void 0)},av.prototype.parse=function(e){return lh.JSON.parse(e,void 0)},bh(cv,np),cv.prototype.g=function(){return new lv(this.l,this.j)},cv.prototype.i=(Xp={},function(){return Xp}),bh(lv,bd);var fv=0;function hv(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function dv(e){e.readyState=4,e.l=null,e.j=null,e.A=null,pv(e)}function pv(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(oh=lv.prototype).open=function(e,t){if(this.readyState!=fv)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,pv(this)},oh.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||lh).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},oh.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,dv(this)),this.readyState=fv},oh.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,pv(this)),this.g&&(this.readyState=3,pv(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof lh.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;hv(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},oh.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?dv(this):pv(this),3==this.readyState&&hv(this)}},oh.Za=function(e){this.g&&(this.response=this.responseText=e,dv(this))},oh.Ya=function(e){this.g&&(this.response=e,dv(this))},oh.ka=function(){this.g&&dv(this)},oh.setRequestHeader=function(e,t){this.v.append(e,t)},oh.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},oh.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(lv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var vv=lh.JSON.parse;function mv(e){bd.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=yv,this.L=this.M=!1}bh(mv,bd);var yv="",gv=/^https?$/i,kv=["POST","PUT"];function bv(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,wv(e),_v(e)}function wv(e){e.F||(e.F=!0,wd(e,"complete"),wd(e,"error"))}function xv(e){if(e.h&&"undefined"!=typeof ch&&(!e.C[1]||4!=Ev(e)||2!=e.da()))if(e.v&&4==Ev(e))Md(e.La,0,e);else if(wd(e,"readystatechange"),4==Ev(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(Tp)[1]||null;if(!a&&lh.self&&lh.self.location){var o=lh.self.location.protocol;a=o.substr(0,o.length-1)}i=!gv.test(a?a.toLowerCase():"")}t=i}if(t)wd(e,"complete"),wd(e,"success");else{e.m=6;try{var u=2<Ev(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.da()+"]",wv(e)}}finally{_v(e)}}}function _v(e,t){if(e.g){Iv(e);var n=e.g,r=e.C[0]?fh:null;e.g=null,e.C=null,t||wd(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Iv(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(lh.clearTimeout(e.A),e.A=null)}function Ev(e){return e.g?e.g.readyState:0}function Sv(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case yv:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Pm){return null}}function Tv(e){var t="";return td(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Cv(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Tv(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Op(e,t,n))}function Av(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Nv(e){this.Ga=0,this.i=[],this.j=new qd,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Av("failFast",!1,e),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Av("baseRetryDelayMs",5e3,e),this.hb=Av("retryDelaySeedMs",1e4,e),this.eb=Av("forwardChannelMaxRetries",2,e),this.xa=Av("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.K=void 0,this.I=e&&e.supportsCrossDomainXhr||!1,this.J="",this.h=new Yp(e&&e.concurrentRequestLimit),this.Ja=new ov,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.j.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function Pv(e){if(Ov(e),3==e.H){var t=e.W++,n=Ap(e.G);Op(n,"SID",e.J),Op(n,"RID",t),Op(n,"TYPE","terminate"),Mv(e,n),(t=new lp(e,e.j,t,void 0)).L=2,t.v=Rp(Ap(n)),n=!1,lh.navigator&&lh.navigator.sendBeacon&&(n=lh.navigator.sendBeacon(t.v.toString(),"")),!n&&lh.Image&&((new Image).src=t.v,n=!0),n||(t.g=Qv(t.l,null),t.g.ha(t.v)),t.G=Date.now(),bp(t)}Hv(e)}function Dv(e){e.g&&(jv(e),e.g.cancel(),e.g=null)}function Ov(e){Dv(e),e.u&&(lh.clearTimeout(e.u),e.u=null),Bv(e),e.h.cancel(),e.m&&("number"===typeof e.m&&lh.clearTimeout(e.m),e.m=null)}function Rv(e){Zp(e.h)||e.m||(e.m=!0,Nd(e.Na,e),e.C=0)}function Lv(e,t){var n;n=t?t.m:e.W++;var r=Ap(e.G);Op(r,"SID",e.J),Op(r,"RID",n),Op(r,"AID",e.V),Mv(e,r),e.o&&e.s&&Cv(r,e.o,e.s),n=new lp(e,e.j,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.i=t.F.concat(e.i)),t=Fv(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),nv(e.h,n),vp(n,r,t)}function Mv(e,t){e.ma&&td(e.ma,(function(e,n){Op(t,n,e)})),e.l&&Sp({},(function(e,n){Op(t,n,e)}))}function Fv(e,t,n){n=Math.min(e.i.length,n);var r=e.l?gh(e.l.Va,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{uv(l,o,"req"+c+"_")}catch(Bm){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.F=e,r}function Uv(e){e.g||e.u||(e.ba=1,Nd(e.Ma,e),e.A=0)}function Vv(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Zd(gh(e.Ma,e),Kv(e,e.A)),e.A++,!0)}function jv(e){null!=e.B&&(lh.clearTimeout(e.B),e.B=null)}function zv(e){e.g=new lp(e,e.j,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Ap(e.wa);Op(t,"RID","rpc"),Op(t,"SID",e.J),Op(t,"CI",e.M?"0":"1"),Op(t,"AID",e.V),Op(t,"TYPE","xmlhttp"),Mv(e,t),e.o&&e.s&&Cv(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.oa,n.L=1,n.v=Rp(Ap(t)),n.s=null,n.S=!0,mp(n,e)}function Bv(e){null!=e.v&&(lh.clearTimeout(e.v),e.v=null)}function qv(e,t){var n=null;if(e.g==t){Bv(e),jv(e),e.g=null;var r=2}else{if(!tv(e.h,t))return;n=t.F,rv(e.h,t),r=1}if(0!=e.H)if(e.ta=t.aa,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;wd(r=Wd(),new Jd(r,n)),Rv(e)}else Uv(e);else if(3==(i=t.o)||0==i&&0<e.ta||!(1==r&&function(e,t){return!(ev(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.F.concat(e.i),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Zd(gh(e.Na,e,t),Kv(e,e.C)),e.C++,!0))}(e,t)||2==r&&Vv(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Gv(e,5);break;case 4:Gv(e,10);break;case 3:Gv(e,6);break;default:Gv(e,2)}}function Kv(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.l||(n*=2),n*t}function Gv(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=gh(e.pb,e);n||(n=new Cp("//www.google.com/images/cleardot.gif"),lh.location&&"http"==lh.location.protocol||Np(n,"https"),Rp(n)),function(e,t){var n=new qd;if(lh.Image){var r=new Image;r.onload=kh(sv,n,r,"TestLoadImage: loaded",!0,t),r.onerror=kh(sv,n,r,"TestLoadImage: error",!1,t),r.onabort=kh(sv,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=kh(sv,n,r,"TestLoadImage: timeout",!1,t),lh.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Xd(2);e.H=0,e.l&&e.l.za(t),Hv(e),Ov(e)}function Hv(e){if(e.H=0,e.pa=[],e.l){var t=iv(e.h);0==t.length&&0==e.i.length||(Ih(e.pa,t),Ih(e.pa,e.i),e.h.i.length=0,_h(e.i),e.i.length=0),e.l.ya()}}function Wv(e,t,n){var r=n instanceof Cp?Ap(n):new Cp(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),Pp(r,r.m);else{var i=lh.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Cp(null,void 0);r&&Np(a,r),t&&(a.g=t),i&&Pp(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&Op(r,n,t),Op(r,"VER",e.qa),Mv(e,r),r}function Qv(e,t,n){if(t&&!e.I)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new mv(new cv({ob:!0})):new mv(e.va)).Oa(e.I),t}function $v(){}function Yv(){if(Mh&&!(10<=Number(Qh)))throw Error("Environmental error: no available transport.")}function Xv(e,t){bd.call(this),this.g=new Nv(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Th(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Th(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new em(this)}function Jv(e){up.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Zv(){sp.call(this),this.status=1}function em(e){this.g=e}function tm(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function nm(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function rm(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(oh=mv.prototype).Oa=function(e){this.M=e},oh.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ap.g(),this.C=this.u?rp(this.u):rp(ap),this.g.onreadystatechange=gh(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(u){return void bv(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=vn(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(d){o.e(d)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=lh.FormData&&e instanceof lh.FormData,!(0<=xh(kv,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=vn(n);try{for(c.s();!(s=c.n()).done;){var l=Ye(s.value,2),f=l[0],h=l[1];this.g.setRequestHeader(f,h)}}catch(d){c.e(d)}finally{c.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Iv(this),0<this.B&&((this.L=function(e){return Mh&&Oh(Hh,9,(function(){for(var e=0,t=Ch(String(Rh)).split("."),n=Ch("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Ah(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Ah(0==a[2].length,0==o[2].length)||Ah(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=gh(this.ua,this)):this.A=Md(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){bv(this,u)}},oh.ua=function(){"undefined"!=typeof ch&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,wd(this,"timeout"),this.abort(8))},oh.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,wd(this,"complete"),wd(this,"abort"),_v(this))},oh.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_v(this,!0)),mv.$.N.call(this)},oh.La=function(){this.s||(this.G||this.v||this.l?xv(this):this.kb())},oh.kb=function(){xv(this)},oh.da=function(){try{return 2<Ev(this)?this.g.status:-1}catch(Xp){return-1}},oh.ja=function(){try{return this.g?this.g.responseText:""}catch(Xp){return""}},oh.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),vv(t)}},oh.Ia=function(){return this.m},oh.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(oh=Nv.prototype).qa=8,oh.H=1,oh.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new lp(this,this.j,e,void 0),n=this.s;if(this.U&&(n?id(n=nd(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Fv(this,t,r),Op(i=Ap(this.G),"RID",e),Op(i,"CVER",22),this.F&&Op(i,"X-HTTP-Session-Id",this.F),Mv(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Tv(n)))+"&"+r:this.o&&Cv(i,this.o,n)),nv(this.h,t),this.bb&&Op(i,"TYPE","init"),this.P?(Op(i,"$req",r),Op(i,"SID","null"),t.ba=!0,vp(t,i,null)):vp(t,i,r),this.H=2}}else 3==this.H&&(e?Lv(this,e):0==this.i.length||Zp(this.h)||Lv(this))},oh.Ma=function(){if(this.u=null,zv(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var e=2*this.S;this.j.info("BP detection timer enabled: "+e),this.B=Zd(gh(this.jb,this),e)}},oh.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,Xd(10),Dv(this),zv(this))},oh.ib=function(){null!=this.v&&(this.v=null,Dv(this),Vv(this),Xd(19))},oh.pb=function(e){e?(this.j.info("Successfully pinged google.com"),Xd(2)):(this.j.info("Failed to ping google.com"),Xd(1))},(oh=$v.prototype).Ba=function(){},oh.Aa=function(){},oh.za=function(){},oh.ya=function(){},oh.Va=function(){},Yv.prototype.g=function(e,t){return new Xv(e,t)},bh(Xv,bd),Xv.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var e=this.g,t=this.l,n=this.h||void 0;Xd(0),e.Y=t,e.ma=n||{},e.M=e.aa,e.G=Wv(e,null,e.Y),Rv(e)},Xv.prototype.close=function(){Pv(this.g)},Xv.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=_d(e),e=n);t.i.push(new $p(t.fb++,e)),3==t.H&&Rv(t)},Xv.prototype.N=function(){this.g.l=null,delete this.j,Pv(this.g),delete this.g,Xv.$.N.call(this)},bh(Jv,up),bh(Zv,sp),bh(em,$v),em.prototype.Ba=function(){wd(this.g,"a")},em.prototype.Aa=function(e){wd(this.g,new Jv(e))},em.prototype.za=function(e){wd(this.g,new Zv)},em.prototype.ya=function(){wd(this.g,"b")},bh(tm,(function(){this.blockSize=-1})),tm.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},tm.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)nm(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){nm(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){nm(this,r),i=0;break}}this.h=i,this.i+=t},tm.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var im={};function am(e){return-128<=e&&128>e?Oh(im,e,(function(e){return new rm([0|e],0>e?-1:0)})):new rm([0|e],0>e?-1:0)}function om(e){if(isNaN(e)||!isFinite(e))return sm;if(0>e)return dm(om(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=um;return new rm(t,0)}var um=4294967296,sm=am(0),cm=am(1),lm=am(16777216);function fm(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function hm(e){return-1==e.h}function dm(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new rm(n,~e.h).add(cm)}function pm(e,t){return e.add(dm(t))}function vm(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function mm(e,t){this.g=e,this.h=t}function ym(e,t){if(fm(t))throw Error("division by zero");if(fm(e))return new mm(sm,sm);if(hm(e))return t=ym(dm(e),t),new mm(dm(t.g),dm(t.h));if(hm(t))return t=ym(e,dm(t)),new mm(dm(t.g),t.h);if(30<e.g.length){if(hm(e)||hm(t))throw Error("slowDivide_ only works with positive integers.");for(var n=cm,r=t;0>=r.X(e);)n=gm(n),r=gm(r);var i=km(n,1),a=km(r,1);for(r=km(r,2),n=km(n,2);!fm(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=km(r,1),n=km(n,1)}return t=pm(e,i.R(t)),new mm(i,t)}for(i=sm;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=om(n)).R(t);hm(o)||0<o.X(e);)o=(a=om(n-=r)).R(t);fm(a)&&(a=cm),i=i.add(a),e=pm(e,o)}return new mm(i,e)}function gm(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new rm(n,e.h)}function km(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new rm(i,e.h)}(oh=rm.prototype).ea=function(){if(hm(this))return-dm(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:um+r)*t,t*=um}return e},oh.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(fm(this))return"0";if(hm(this))return"-"+dm(this).toString(e);for(var t=om(Math.pow(e,6)),n=this,r="";;){var i=ym(n,t).g,a=((0<(n=pm(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(fm(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},oh.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},oh.X=function(e){return hm(e=pm(this,e))?-1:fm(e)?0:1},oh.abs=function(){return hm(this)?dm(this):this},oh.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new rm(n,-2147483648&n[n.length-1]?-1:0)},oh.R=function(e){if(fm(this)||fm(e))return sm;if(hm(this))return hm(e)?dm(this).R(dm(e)):dm(dm(this).R(e));if(hm(e))return dm(this.R(dm(e)));if(0>this.X(lm)&&0>e.X(lm))return om(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,vm(n,2*r+2*i),n[2*r+2*i+1]+=a*s,vm(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,vm(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,vm(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new rm(n,0)},oh.gb=function(e){return ym(this,e).h},oh.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new rm(n,this.h&e.h)},oh.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new rm(n,this.h|e.h)},oh.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new rm(n,this.h^e.h)},Yv.prototype.createWebChannel=Yv.prototype.g,Xv.prototype.send=Xv.prototype.u,Xv.prototype.open=Xv.prototype.m,Xv.prototype.close=Xv.prototype.close,ep.NO_ERROR=0,ep.TIMEOUT=8,ep.HTTP_ERROR=6,tp.COMPLETE="complete",ip.EventType=op,op.OPEN="a",op.CLOSE="b",op.ERROR="c",op.MESSAGE="d",bd.prototype.listen=bd.prototype.O,mv.prototype.listenOnce=mv.prototype.P,mv.prototype.getLastError=mv.prototype.Sa,mv.prototype.getLastErrorCode=mv.prototype.Ia,mv.prototype.getStatus=mv.prototype.da,mv.prototype.getResponseJson=mv.prototype.Wa,mv.prototype.getResponseText=mv.prototype.ja,mv.prototype.send=mv.prototype.ha,mv.prototype.setWithCredentials=mv.prototype.Oa,tm.prototype.digest=tm.prototype.l,tm.prototype.reset=tm.prototype.reset,tm.prototype.update=tm.prototype.j,rm.prototype.add=rm.prototype.add,rm.prototype.multiply=rm.prototype.R,rm.prototype.modulo=rm.prototype.gb,rm.prototype.compare=rm.prototype.X,rm.prototype.toNumber=rm.prototype.ea,rm.prototype.toString=rm.prototype.toString,rm.prototype.getBits=rm.prototype.D,rm.fromNumber=om,rm.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return dm(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=om(Math.pow(n,8)),i=sm,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=om(Math.pow(n,o)),i=i.R(o).add(om(u))):i=(i=i.R(r)).add(om(u))}return i};var bm=sh.createWebChannelTransport=function(){return new Yv},wm=sh.getStatEventTarget=function(){return Wd()},xm=sh.ErrorCode=ep,_m=sh.EventType=tp,Im=sh.Event=Gd,Em=sh.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Sm=sh.FetchXmlHttpFactory=cv,Tm=sh.WebChannel=ip,Cm=sh.XhrIo=mv,Am=sh.Md5=tm,Nm=sh.Integer=rm,Pm="@firebase/firestore",Dm=function(){function e(t){Ne(this,e),this.uid=t}return De(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Dm.UNAUTHENTICATED=new Dm(null),Dm.GOOGLE_CREDENTIALS=new Dm("google-credentials-uid"),Dm.FIRST_PARTY=new Dm("first-party-uid"),Dm.MOCK_USER=new Dm("mock-user");var Om="9.21.0",Rm=new sr("@firebase/firestore");function Lm(){return Rm.logLevel}function Mm(e){if(Rm.logLevel<=tr.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Vm);Rm.debug.apply(Rm,["Firestore (".concat(Om,"): ").concat(e)].concat(Je(i)))}}function Fm(e){if(Rm.logLevel<=tr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Vm);Rm.error.apply(Rm,["Firestore (".concat(Om,"): ").concat(e)].concat(Je(i)))}}function Um(e){if(Rm.logLevel<=tr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Vm);Rm.warn.apply(Rm,["Firestore (".concat(Om,"): ").concat(e)].concat(Je(i)))}}function Vm(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function jm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Om,") INTERNAL ASSERTION FAILED: ")+e;throw Fm(t),new Error(t)}function zm(e,t){e||jm()}function Bm(e,t){return e}var qm={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Km=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return De(n)}(Mn),Gm=De((function e(){var t=this;Ne(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Hm=De((function e(t,n){Ne(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Wm=function(){function e(){Ne(this,e)}return De(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Dm.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Qm=function(){function e(t){Ne(this,e),this.token=t,this.changeListener=null}return De(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),$m=function(){function e(t){Ne(this,e),this.t=t,this.currentUser=Dm.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return De(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Gm;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Gm,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Ae(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Mm("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Mm("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Gm)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Mm("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(zm("string"==typeof n.accessToken),new Hm(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return zm(null===e||"string"==typeof e),new Dm(e)}}]),e}(),Ym=function(){function e(t,n,r){Ne(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=Dm.FIRST_PARTY,this.g=new Map}return De(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),Xm=function(){function e(t,n,r){Ne(this,e),this.h=t,this.l=n,this.m=r}return De(e,[{key:"getToken",value:function(){return Promise.resolve(new Ym(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Dm.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Jm=De((function e(t){Ne(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Zm=function(){function e(t){Ne(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return De(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Mm("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,Mm("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Mm("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):Mm("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(zm("string"==typeof t.token),e.T=t.token,new Jm(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function ey(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var ty=function(){function e(){Ne(this,e)}return De(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=ey(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function ny(e,t){return e<t?-1:e>t?1:0}function ry(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function iy(e){return e+"\0"}var ay=function(){function e(t,n){if(Ne(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Km(qm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Km(qm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Km(qm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Km(qm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return De(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?ny(this.nanoseconds,e.nanoseconds):ny(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),oy=function(){function e(t){Ne(this,e),this.timestamp=t}return De(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new ay(0,0))}},{key:"max",value:function(){return new e(new ay(253402300799,999999999))}}]),e}(),uy=function(){function e(t,n,r){Ne(this,e),void 0===n?n=0:n>t.length&&jm(),void 0===r?r=t.length-n:r>t.length-n&&jm(),this.segments=t,this.offset=n,this.len=r}return De(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),sy=function(e){Oe(n,e);var t=Ue(n);function n(){return Ne(this,n),t.apply(this,arguments)}return De(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Km(qm.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Je(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(uy),cy=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ly=function(e){Oe(n,e);var t=Ue(n);function n(){return Ne(this,n),t.apply(this,arguments)}return De(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return cy.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Km(qm.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Km(qm.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Km(qm.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Km(qm.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(uy),fy=function(){function e(t){Ne(this,e),this.path=t}return De(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===sy.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(sy.fromString(t))}},{key:"fromName",value:function(t){return new e(sy.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(sy.emptyPath())}},{key:"comparator",value:function(e,t){return sy.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new sy(t.slice()))}}]),e}(),hy=De((function e(t,n,r,i){Ne(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function dy(e){return e.fields.find((function(e){return 2===e.kind}))}function py(e){return e.fields.filter((function(e){return 2!==e.kind}))}hy.UNKNOWN_ID=-1;var vy=De((function e(t,n){Ne(this,e),this.fieldPath=t,this.kind=n}));var my=function(){function e(t,n){Ne(this,e),this.sequenceNumber=t,this.offset=n}return De(e,null,[{key:"empty",value:function(){return new e(0,ky.min())}}]),e}();function yy(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=oy.fromTimestamp(1e9===r?new ay(n+1,0):new ay(n,r));return new ky(i,fy.empty(),t)}function gy(e){return new ky(e.readTime,e.key,-1)}var ky=function(){function e(t,n,r){Ne(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return De(e,null,[{key:"min",value:function(){return new e(oy.min(),fy.empty(),-1)}},{key:"max",value:function(){return new e(oy.max(),fy.empty(),-1)}}]),e}();function by(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=fy.comparator(e.documentKey,t.documentKey))?n:ny(e.largestBatchId,t.largestBatchId)}var wy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",xy=function(){function e(){Ne(this,e),this.onCommittedListeners=[]}return De(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function _y(e){return Iy.apply(this,arguments)}function Iy(){return(Iy=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===qm.FAILED_PRECONDITION&&t.message===wy){e.next=2;break}throw t;case 2:Mm("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ey=function(){function e(t){var n=this;Ne(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return De(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&jm(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=vn(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Sy=function(){function e(t,n){var r=this;Ne(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.R=new Gm,this.transaction.oncomplete=function(){r.R.resolve()},this.transaction.onabort=function(){n.error?r.R.reject(new Ay(t,n.error)):r.R.resolve()},this.transaction.onerror=function(e){var n=Ry(e.target.error);r.R.reject(new Ay(t,n))}}return De(e,[{key:"v",get:function(){return this.R.promise}},{key:"abort",value:function(e){e&&this.R.reject(e),this.aborted||(Mm("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Py(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Ay(n,t)}}}]),e}(),Ty=function(){function e(t,n,r){Ne(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(Nn())&&Fm("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return De(e,[{key:"O",value:function(){var e=Ae(_e().mark((function e(t){var n=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Mm("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Ay(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Km(qm.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Km(qm.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Ay(t,n))},i.onupgradeneeded=function(e){Mm("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.$(t,i.transaction,e.oldVersion,n.version).next((function(){Mm("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Ae(_e().mark((function e(t,n,r,i){var a,o,u,s,c=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=_e().mark((function e(){var n,u,s,l;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.O(t);case 4:return c.db=e.sent,n=Sy.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),Ey.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.v;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,Mm("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Mm("SimpleDb","Removing database:",e),Dy(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!Ln())return!1;if(e.C())return!0;var t=Nn(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Cy=function(){function e(t){Ne(this,e),this.L=t,this.q=!1,this.U=null}return De(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return Dy(this.L.delete())}}]),e}(),Ay=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,qm.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return De(n)}(Km);function Ny(e){return"IndexedDbTransactionError"===e.name}var Py=function(){function e(t){Ne(this,e),this.store=t}return De(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Mm("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Mm("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Dy(n)}},{key:"add",value:function(e){return Mm("SimpleDb","ADD",this.store.name,e,e),Dy(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Dy(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Mm("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Mm("SimpleDb","DELETE",this.store.name,e),Dy(this.store.delete(e))}},{key:"count",value:function(){return Mm("SimpleDb","COUNT",this.store.name),Dy(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Ey((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Ey((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){Mm("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"Z",value:function(e){var t=this.cursor({});return new Ey((function(n,r){t.onerror=function(e){var t=Ry(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new Ey((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Cy(i),o=t(i.primaryKey,i.value,a);if(o instanceof Ey){var u=o.catch((function(e){return a.done(),Ey.reject(e)}));n.push(u)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return Ey.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Dy(e){return new Ey((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Ry(e.target.error);n(t)}}))}var Oy=!1;function Ry(e){var t=Ty.S(Nn());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Km("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Oy||(Oy=!0,setTimeout((function(){throw r}),0)),r}}return e}var Ly=function(){function e(t,n){Ne(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return De(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;Mm("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,Ae(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Mm,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Ny(e.t4)){e.next=17;break}Mm("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,_y(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),My=function(){function e(t,n){Ne(this,e),this.localStore=t,this.persistence=n}return De(e,[{key:"nt",value:function(){var e=Ae(_e().mark((function e(){var t,n=this,r=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Ey.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Mm("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return Mm("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=gy(t);by(r,n)>0&&(n=r)})),new ky(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Fy=function(){function e(t,n){var r=this;Ne(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return De(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function Uy(e){return null==e}function Vy(e){return 0===e&&1/e==-1/0}function jy(e){return"number"==typeof e&&Number.isInteger(e)&&!Vy(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function zy(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=qy(t)),t=By(e.get(n),t);return qy(t)}function By(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function qy(e){return e+"\x01\x01"}function Ky(e){var t=e.length;if(zm(t>=2),2===t)return zm("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),sy.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&jm(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:jm()}a=o+2}return new sy(r)}Fy.ct=-1;var Gy=["userId","batchId"];function Hy(e,t){return[e,zy(t)]}function Wy(e,t,n){return[e,zy(t),n]}var Qy={},$y=["prefixPath","collectionGroup","readTime","documentId"],Yy=["prefixPath","collectionGroup","documentId"],Xy=["collectionGroup","readTime","prefixPath","documentId"],Jy=["canonicalId","targetId"],Zy=["targetId","path"],eg=["path","targetId"],tg=["collectionId","parent"],ng=["indexId","uid"],rg=["uid","sequenceNumber"],ig=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ag=["indexId","uid","orderedDocumentKey"],og=["userId","collectionPath","documentId"],ug=["userId","collectionPath","largestBatchId"],sg=["userId","collectionGroup","largestBatchId"],cg=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),lg=[].concat(Je(cg),["documentOverlays"]),fg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],hg=fg,dg=[].concat(hg,["indexConfiguration","indexState","indexEntries"]),pg=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this)).at=e,i.currentSequenceNumber=r,i}return De(n)}(xy);function vg(e,t){var n=Bm(e);return Ty.M(n.at,t)}function mg(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function yg(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function gg(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var kg=function(){function e(t,n){Ne(this,e),this.comparator=t,this.root=n||wg.EMPTY}return De(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,wg.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,wg.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new bg(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new bg(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new bg(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new bg(this.root,e,this.comparator,!0)}}]),e}(),bg=function(){function e(t,n,r,i){Ne(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return De(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),wg=function(){function e(t,n,r,i,a){Ne(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return De(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw jm();if(this.right.isRed())throw jm();var e=this.left.check();if(e!==this.right.check())throw jm();return e+(this.isRed()?0:1)}}]),e}();wg.EMPTY=null,wg.RED=!0,wg.BLACK=!1,wg.EMPTY=new(function(){function e(){Ne(this,e),this.size=0}return De(e,[{key:"key",get:function(){throw jm()}},{key:"value",get:function(){throw jm()}},{key:"color",get:function(){throw jm()}},{key:"left",get:function(){throw jm()}},{key:"right",get:function(){throw jm()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new wg(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var xg=function(){function e(t){Ne(this,e),this.comparator=t,this.data=new kg(this.comparator)}return De(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new _g(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new _g(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),_g=function(){function e(t){Ne(this,e),this.iter=t}return De(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Ig(e){return e.hasNext()?e.getNext():void 0}var Eg=function(){function e(t){Ne(this,e),this.fields=t,t.sort(ly.comparator)}return De(e,[{key:"unionWith",value:function(t){var n,r=new xg(ly.comparator),i=vn(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=vn(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=vn(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return ry(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Sg=function(e){Oe(n,e);var t=Ue(n);function n(){var e;return Ne(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return De(n)}(yn(Error));var Tg=function(e){function t(e){Ne(this,t),this.binaryString=e}return De(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return ny(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Sg("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Tg.EMPTY_BYTE_STRING=new Tg("");var Cg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ag(e){if(zm(!!e),"string"==typeof e){var t=0,n=Cg.exec(e);if(zm(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ng(e.seconds),nanos:Ng(e.nanos)}}function Ng(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Pg(e){return"string"==typeof e?Tg.fromBase64String(e):Tg.fromUint8Array(e)}function Dg(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Og(e){var t=e.mapValue.fields.__previous_value__;return Dg(t)?Og(t):t}function Rg(e){var t=Ag(e.mapValue.fields.__local_write_time__.timestampValue);return new ay(t.seconds,t.nanos)}var Lg=De((function e(t,n,r,i,a,o,u,s){Ne(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Mg=function(){function e(t,n){Ne(this,e),this.projectId=t,this.database=n||"(default)"}return De(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),Fg={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ug={nullValue:"NULL_VALUE"};function Vg(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Dg(e)?4:Zg(e)?9007199254740991:10:jm()}function jg(e,t){if(e===t)return!0;var n=Vg(e);if(n!==Vg(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Rg(e).isEqual(Rg(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Ag(e.timestampValue),r=Ag(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Pg(e.bytesValue).isEqual(Pg(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ng(e.geoPointValue.latitude)===Ng(t.geoPointValue.latitude)&&Ng(e.geoPointValue.longitude)===Ng(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ng(e.integerValue)===Ng(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Ng(e.doubleValue),r=Ng(t.doubleValue);return n===r?Vy(n)===Vy(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ry(e.arrayValue.values||[],t.arrayValue.values||[],jg);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(mg(n)!==mg(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!jg(n[i],r[i])))return!1;return!0}(e,t);default:return jm()}}function zg(e,t){return void 0!==(e.values||[]).find((function(e){return jg(e,t)}))}function Bg(e,t){if(e===t)return 0;var n=Vg(e),r=Vg(t);if(n!==r)return ny(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ny(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Ng(e.integerValue||e.doubleValue),r=Ng(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return qg(e.timestampValue,t.timestampValue);case 4:return qg(Rg(e),Rg(t));case 5:return ny(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Pg(e),r=Pg(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=ny(n[i],r[i]);if(0!==a)return a}return ny(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=ny(Ng(e.latitude),Ng(t.latitude));return 0!==n?n:ny(Ng(e.longitude),Ng(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Bg(n[i],r[i]);if(a)return a}return ny(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Fg.mapValue&&t===Fg.mapValue)return 0;if(e===Fg.mapValue)return 1;if(t===Fg.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=ny(r[o],a[o]);if(0!==u)return u;var s=Bg(n[r[o]],i[a[o]]);if(0!==s)return s}return ny(r.length,a.length)}(e.mapValue,t.mapValue);default:throw jm()}}function qg(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ny(e,t);var n=Ag(e),r=Ag(t),i=ny(n.seconds,r.seconds);return 0!==i?i:ny(n.nanos,r.nanos)}function Kg(e){return Gg(e)}function Gg(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Ag(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Pg(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,fy.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=vn(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Gg(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=vn(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Gg(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):jm();var t,n}function Hg(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Wg(e){return!!e&&"integerValue"in e}function Qg(e){return!!e&&"arrayValue"in e}function $g(e){return!!e&&"nullValue"in e}function Yg(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Xg(e){return!!e&&"mapValue"in e}function Jg(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return yg(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Jg(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Jg(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Zg(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function ek(e){return"nullValue"in e?Ug:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Hg(Mg.empty(),fy.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:jm()}function tk(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Hg(Mg.empty(),fy.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Fg:jm()}function nk(e,t){var n=Bg(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function rk(e,t){var n=Bg(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var ik=function(){function e(t){Ne(this,e),this.value=t}return De(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Xg(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jg(t)}},{key:"setAll",value:function(e){var t=this,n=ly.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Jg(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Xg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return jg(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Xg(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){yg(t,(function(t,n){return e[t]=n}));var r,i=vn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Jg(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function ak(e){var t=[];return yg(e.fields,(function(e,n){var r=new ly([e]);if(Xg(n)){var i=ak(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=vn(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Eg(t)}var ok=function(){function e(t,n,r,i,a,o,u){Ne(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return De(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(oy.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=ik.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=ik.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=oy.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,oy.min(),oy.min(),oy.min(),ik.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,oy.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,oy.min(),oy.min(),ik.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,oy.min(),oy.min(),ik.empty(),2)}}]),e}(),uk=De((function e(t,n){Ne(this,e),this.position=t,this.inclusive=n}));function sk(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?fy.comparator(fy.fromName(o.referenceValue),n.key):Bg(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function ck(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!jg(e.position[n],t.position[n]))return!1;return!0}var lk=De((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Ne(this,e),this.field=t,this.dir=n}));function fk(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var hk=De((function e(){Ne(this,e)})),dk=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i){var a;return Ne(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return De(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Bg(t,this.value)):null!==t&&Vg(this.value)===Vg(t)&&this.matchesComparison(Bg(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return jm()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new _k(e,t,r):"array-contains"===t?new Tk(e,r):"in"===t?new Ck(e,r):"not-in"===t?new Ak(e,r):"array-contains-any"===t?new Nk(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Ik(e,n):new Ek(e,n)}}]),n}(hk),pk=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this)).filters=e,i.op=r,i.ht=null,i}return De(n,[{key:"matches",value:function(e){return vk(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=vn(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(hk);function vk(e){return"and"===e.op}function mk(e){return"or"===e.op}function yk(e){return gk(e)&&vk(e)}function gk(e){var t,n=vn(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof pk)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function kk(e){if(e instanceof dk)return e.field.canonicalString()+e.op.toString()+Kg(e.value);if(yk(e))return e.filters.map((function(e){return kk(e)})).join(",");var t=e.filters.map((function(e){return kk(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function bk(e,t){return e instanceof dk?function(e,t){return t instanceof dk&&e.op===t.op&&e.field.isEqual(t.field)&&jg(e.value,t.value)}(e,t):e instanceof pk?function(e,t){return t instanceof pk&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&bk(n,t.filters[r])}),!0)}(e,t):void jm()}function wk(e,t){var n=e.filters.concat(t);return pk.create(n,e.op)}function xk(e){return e instanceof dk?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Kg(e.value))}(e):e instanceof pk?function(e){return e.op.toString()+" {"+e.getFilters().map(xk).join(" ,")+"}"}(e):"Filter"}var _k=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i){var a;return Ne(this,n),(a=t.call(this,e,r,i)).key=fy.fromName(i.referenceValue),a}return De(n,[{key:"matches",value:function(e){var t=fy.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(dk),Ik=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e,"in",r)).keys=Sk("in",r),i}return De(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(dk),Ek=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e,"not-in",r)).keys=Sk("not-in",r),i}return De(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(dk);function Sk(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return fy.fromName(e.referenceValue)}))}var Tk=function(e){Oe(n,e);var t=Ue(n);function n(e,r){return Ne(this,n),t.call(this,e,"array-contains",r)}return De(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Qg(t)&&zg(t.arrayValue,this.value)}}]),n}(dk),Ck=function(e){Oe(n,e);var t=Ue(n);function n(e,r){return Ne(this,n),t.call(this,e,"in",r)}return De(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&zg(this.value.arrayValue,t)}}]),n}(dk),Ak=function(e){Oe(n,e);var t=Ue(n);function n(e,r){return Ne(this,n),t.call(this,e,"not-in",r)}return De(n,[{key:"matches",value:function(e){if(zg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!zg(this.value.arrayValue,t)}}]),n}(dk),Nk=function(e){Oe(n,e);var t=Ue(n);function n(e,r){return Ne(this,n),t.call(this,e,"array-contains-any",r)}return De(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Qg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return zg(t.value.arrayValue,e)}))}}]),n}(dk),Pk=De((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Ne(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ft=null}));function Dk(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Pk(e,t,n,r,i,a,o)}function Ok(e){var t=Bm(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return kk(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Uy(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Kg(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Kg(e)})).join(",")),t.ft=n}return t.ft}function Rk(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!fk(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!bk(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ck(e.startAt,t.startAt)&&ck(e.endAt,t.endAt)}function Lk(e){return fy.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Mk(e,t){return e.filters.filter((function(e){return e instanceof dk&&e.field.isEqual(t)}))}function Fk(e,t,n){var r,i=Ug,a=!0,o=vn(Mk(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Ug,c=!0;switch(u.op){case"<":case"<=":s=ek(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Ug}nk({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];nk({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function Uk(e,t,n){var r,i=Fg,a=!0,o=vn(Mk(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Fg,c=!0;switch(u.op){case">=":case">":s=tk(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Fg}rk({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];rk({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Vk=De((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Ne(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.dt=null,this._t=null,this.startAt,this.endAt}));function jk(e,t,n,r,i,a,o,u){return new Vk(e,t,n,r,i,a,o,u)}function zk(e){return new Vk(e)}function Bk(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function qk(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Kk(e){var t,n=vn(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function Gk(e){return null!==e.collectionGroup}function Hk(e){var t=Bm(e);if(null===t.dt){t.dt=[];var n=Kk(t),r=qk(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new lk(n)),t.dt.push(new lk(ly.keyField(),"asc"));else{var i,a=!1,o=vn(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.dt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new lk(ly.keyField(),s))}}}return t.dt}function Wk(e){var t=Bm(e);if(!t._t)if("F"===t.limitType)t._t=Dk(t.path,t.collectionGroup,Hk(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=vn(Hk(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new lk(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new uk(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new uk(t.startAt.position,t.startAt.inclusive):null;t._t=Dk(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t._t}function Qk(e,t){t.getFirstInequalityField(),Kk(e);var n=e.filters.concat([t]);return new Vk(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function $k(e,t,n){return new Vk(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Yk(e,t){return Rk(Wk(e),Wk(t))&&e.limitType===t.limitType}function Xk(e){return"".concat(Ok(Wk(e)),"|lt:").concat(e.limitType)}function Jk(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return xk(e)})).join(", "),"]")),Uy(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Kg(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Kg(e)})).join(",")),"Target(".concat(t,")")}(Wk(e)),"; limitType=").concat(e.limitType,")")}function Zk(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):fy.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=vn(Hk(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=vn(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=sk(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Hk(e),t))&&!(e.endAt&&!function(e,t,n){var r=sk(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Hk(e),t))}(e,t)}function eb(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function tb(e){return function(t,n){var r,i=!1,a=vn(Hk(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=nb(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function nb(e,t,n){var r=e.field.isKeyField()?fy.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Bg(r,i):jm()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return jm()}}var rb=function(){function e(t,n){Ne(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return De(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=vn(n);try{for(i.s();!(r=i.n()).done;){var a=Ye(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){yg(this.inner,(function(t,n){var r,i=vn(n);try{for(i.s();!(r=i.n()).done;){var a=Ye(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return gg(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),ib=new kg(fy.comparator);function ab(){return ib}var ob=new kg(fy.comparator);function ub(){for(var e=ob,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function sb(e){var t=ob;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function cb(){return fb()}function lb(){return fb()}function fb(){return new rb((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var hb=new kg(fy.comparator),db=new xg(fy.comparator);function pb(){for(var e=db,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var vb=new xg(ny);function mb(){return vb}function yb(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vy(t)?"-0":t}}function gb(e){return{integerValue:""+e}}function kb(e,t){return jy(t)?gb(t):yb(e,t)}var bb=De((function e(){Ne(this,e),this._=void 0}));function wb(e,t,n){return e instanceof Ib?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Dg(t)&&(t=Og(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Eb?Sb(e,t):e instanceof Tb?Cb(e,t):function(e,t){var n=_b(e,t),r=Nb(n)+Nb(e.wt);return Wg(n)&&Wg(e.wt)?gb(r):yb(e.serializer,r)}(e,t)}function xb(e,t,n){return e instanceof Eb?Sb(e,t):e instanceof Tb?Cb(e,t):n}function _b(e,t){return e instanceof Ab?Wg(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Ib=function(e){Oe(n,e);var t=Ue(n);function n(){return Ne(this,n),t.apply(this,arguments)}return De(n)}(bb),Eb=function(e){Oe(n,e);var t=Ue(n);function n(e){var r;return Ne(this,n),(r=t.call(this)).elements=e,r}return De(n)}(bb);function Sb(e,t){var n,r=Pb(t),i=vn(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return jg(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Tb=function(e){Oe(n,e);var t=Ue(n);function n(e){var r;return Ne(this,n),(r=t.call(this)).elements=e,r}return De(n)}(bb);function Cb(e,t){var n,r=Pb(t),i=vn(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!jg(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Ab=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this)).serializer=e,i.wt=r,i}return De(n)}(bb);function Nb(e){return Ng(e.integerValue||e.doubleValue)}function Pb(e){return Qg(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Db=De((function e(t,n){Ne(this,e),this.field=t,this.transform=n}));var Ob=De((function e(t,n){Ne(this,e),this.version=t,this.transformResults=n})),Rb=function(){function e(t,n){Ne(this,e),this.updateTime=t,this.exists=n}return De(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Lb(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Mb=De((function e(){Ne(this,e)}));function Fb(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new $b(e.key,Rb.none()):new Bb(e.key,e.data,Rb.none());var n,r=e.data,i=ik.empty(),a=new xg(ly.comparator),o=vn(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new qb(e.key,i,new Eg(a.toArray()),Rb.none())}function Ub(e,t,n){e instanceof Bb?function(e,t,n){var r=e.value.clone(),i=Gb(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof qb?function(e,t,n){if(Lb(e.precondition,t)){var r=Gb(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Kb(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Vb(e,t,n,r){return e instanceof Bb?function(e,t,n,r){if(!Lb(e.precondition,t))return n;var i=e.value.clone(),a=Hb(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof qb?function(e,t,n,r){if(!Lb(e.precondition,t))return n;var i=Hb(e.fieldTransforms,r,t),a=t.data;return a.setAll(Kb(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Lb(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function jb(e,t){var n,r=null,i=vn(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=_b(a.transform,o||null);null!=u&&(null===r&&(r=ik.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function zb(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ry(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Eb&&t instanceof Eb||e instanceof Tb&&t instanceof Tb?ry(e.elements,t.elements,jg):e instanceof Ab&&t instanceof Ab?jg(e.wt,t.wt):e instanceof Ib&&t instanceof Ib}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Bb=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Ne(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return De(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Mb),qb=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Ne(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return De(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Mb);function Kb(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Gb(e,t,n){var r=new Map;zm(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,xb(o,u,n[i]))}return r}function Hb(e,t,n){var r,i=new Map,a=vn(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,wb(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Wb,Qb,$b=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return De(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Mb),Yb=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return De(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Mb),Xb=function(){function e(t,n,r,i){Ne(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return De(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Ub(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=vn(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Vb(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=vn(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=Vb(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=lb();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Fb(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(oy.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),pb())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&ry(this.mutations,e.mutations,(function(e,t){return zb(e,t)}))&&ry(this.baseMutations,e.baseMutations,(function(e,t){return zb(e,t)}))}}]),e}(),Jb=function(){function e(t,n,r,i){Ne(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return De(e,null,[{key:"from",value:function(t,n,r){zm(t.mutations.length===r.length);for(var i=hb,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Zb=function(){function e(t,n){Ne(this,e),this.largestBatchId=t,this.mutation=n}return De(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),ew=De((function e(t,n){Ne(this,e),this.count=t,this.unchangedNames=n}));function tw(e){switch(e){default:return jm();case qm.CANCELLED:case qm.UNKNOWN:case qm.DEADLINE_EXCEEDED:case qm.RESOURCE_EXHAUSTED:case qm.INTERNAL:case qm.UNAVAILABLE:case qm.UNAUTHENTICATED:return!1;case qm.INVALID_ARGUMENT:case qm.NOT_FOUND:case qm.ALREADY_EXISTS:case qm.PERMISSION_DENIED:case qm.FAILED_PRECONDITION:case qm.ABORTED:case qm.OUT_OF_RANGE:case qm.UNIMPLEMENTED:case qm.DATA_LOSS:return!0}}function nw(e){if(void 0===e)return Fm("GRPC error has no .code"),qm.UNKNOWN;switch(e){case Wb.OK:return qm.OK;case Wb.CANCELLED:return qm.CANCELLED;case Wb.UNKNOWN:return qm.UNKNOWN;case Wb.DEADLINE_EXCEEDED:return qm.DEADLINE_EXCEEDED;case Wb.RESOURCE_EXHAUSTED:return qm.RESOURCE_EXHAUSTED;case Wb.INTERNAL:return qm.INTERNAL;case Wb.UNAVAILABLE:return qm.UNAVAILABLE;case Wb.UNAUTHENTICATED:return qm.UNAUTHENTICATED;case Wb.INVALID_ARGUMENT:return qm.INVALID_ARGUMENT;case Wb.NOT_FOUND:return qm.NOT_FOUND;case Wb.ALREADY_EXISTS:return qm.ALREADY_EXISTS;case Wb.PERMISSION_DENIED:return qm.PERMISSION_DENIED;case Wb.FAILED_PRECONDITION:return qm.FAILED_PRECONDITION;case Wb.ABORTED:return qm.ABORTED;case Wb.OUT_OF_RANGE:return qm.OUT_OF_RANGE;case Wb.UNIMPLEMENTED:return qm.UNIMPLEMENTED;case Wb.DATA_LOSS:return qm.DATA_LOSS;default:return jm()}}(Qb=Wb||(Wb={}))[Qb.OK=0]="OK",Qb[Qb.CANCELLED=1]="CANCELLED",Qb[Qb.UNKNOWN=2]="UNKNOWN",Qb[Qb.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qb[Qb.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qb[Qb.NOT_FOUND=5]="NOT_FOUND",Qb[Qb.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qb[Qb.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qb[Qb.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qb[Qb.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qb[Qb.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qb[Qb.ABORTED=10]="ABORTED",Qb[Qb.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qb[Qb.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qb[Qb.INTERNAL=13]="INTERNAL",Qb[Qb.UNAVAILABLE=14]="UNAVAILABLE",Qb[Qb.DATA_LOSS=15]="DATA_LOSS";var rw=function(){function e(){Ne(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return De(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return iw}},{key:"getOrCreateInstance",value:function(){return null===iw&&(iw=new e),iw}}]),e}(),iw=null;function aw(){return new TextEncoder}var ow=new Nm([4294967295,4294967295],0);function uw(e){var t=aw().encode(e),n=new Am;return n.update(t),new Uint8Array(n.digest())}function sw(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Nm([n,r],0),new Nm([i,a],0)]}var cw=function(){function e(t,n,r){if(Ne(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new lw("Invalid padding: ".concat(n));if(r<0)throw new lw("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new lw("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new lw("Invalid padding when bitmap length is 0: ".concat(n));this.yt=8*t.length-n,this.It=Nm.fromNumber(this.yt)}return De(e,[{key:"Tt",value:function(e,t,n){var r=e.add(t.multiply(Nm.fromNumber(n)));return 1===r.compare(ow)&&(r=new Nm([r.getBits(0),r.getBits(1)],0)),r.modulo(this.It).toNumber()}},{key:"Et",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"At",value:function(e){if(0===this.yt)return!1;for(var t=Ye(sw(uw(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Tt(n,r,i);if(!this.Et(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.yt)for(var t=Ye(sw(uw(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Tt(n,r,i);this.Rt(a)}}},{key:"Rt",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),lw=function(e){Oe(n,e);var t=Ue(n);function n(){var e;return Ne(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return De(n)}(yn(Error)),fw=function(){function e(t,n,r,i,a){Ne(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return De(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,hw.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(oy.min(),i,new kg(ny),ab(),pb())}}]),e}(),hw=function(){function e(t,n,r,i,a){Ne(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return De(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,pb(),pb(),pb())}}]),e}(),dw=De((function e(t,n,r,i){Ne(this,e),this.vt=t,this.removedTargetIds=n,this.key=r,this.Pt=i})),pw=De((function e(t,n){Ne(this,e),this.targetId=t,this.bt=n})),vw=De((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Tg.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Ne(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),mw=function(){function e(){Ne(this,e),this.Vt=0,this.St=kw(),this.Dt=Tg.EMPTY_BYTE_STRING,this.Ct=!1,this.xt=!0}return De(e,[{key:"current",get:function(){return this.Ct}},{key:"resumeToken",get:function(){return this.Dt}},{key:"Nt",get:function(){return 0!==this.Vt}},{key:"kt",get:function(){return this.xt}},{key:"Mt",value:function(e){e.approximateByteSize()>0&&(this.xt=!0,this.Dt=e)}},{key:"Ot",value:function(){var e=pb(),t=pb(),n=pb();return this.St.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:jm()}})),new hw(this.Dt,this.Ct,e,t,n)}},{key:"$t",value:function(){this.xt=!1,this.St=kw()}},{key:"Ft",value:function(e,t){this.xt=!0,this.St=this.St.insert(e,t)}},{key:"Bt",value:function(e){this.xt=!0,this.St=this.St.remove(e)}},{key:"Lt",value:function(){this.Vt+=1}},{key:"qt",value:function(){this.Vt-=1}},{key:"Ut",value:function(){this.xt=!0,this.Ct=!0}}]),e}(),yw=function(){function e(t){Ne(this,e),this.Kt=t,this.Gt=new Map,this.Qt=ab(),this.jt=gw(),this.zt=new kg(ny)}return De(e,[{key:"Wt",value:function(e){var t,n=vn(e.vt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Pt&&e.Pt.isFoundDocument()?this.Ht(r,e.Pt):this.Jt(r,e.key,e.Pt)}}catch(u){n.e(u)}finally{n.f()}var i,a=vn(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Jt(o,e.key,e.Pt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Yt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Xt(n);switch(e.state){case 0:t.Zt(n)&&r.Mt(e.resumeToken);break;case 1:r.qt(),r.Nt||r.$t(),r.Mt(e.resumeToken);break;case 2:r.qt(),r.Nt||t.removeTarget(n);break;case 3:t.Zt(n)&&(r.Ut(),r.Mt(e.resumeToken));break;case 4:t.Zt(n)&&(t.te(n),r.Mt(e.resumeToken));break;default:jm()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Gt.forEach((function(e,r){n.Zt(r)&&t(r)}))}},{key:"ee",value:function(e){var t,n=e.targetId,r=e.bt.count,i=this.ne(n);if(i){var a=i.target;if(Lk(a))if(0===r){var o=new fy(a.path);this.Jt(n,o,ok.newNoDocument(o,oy.min()))}else zm(1===r);else{var u=this.se(n);if(u!==r){var s=this.ie(e,u);if(0!==s){this.te(n);var c=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.zt=this.zt.insert(n,c)}null===(t=rw.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,a,o,u,s,c={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(a=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(s=null===(u=null==l?void 0:l.bits)||void 0===u?void 0:u.padding)&&void 0!==s?s:0}),c}(s,u,e.bt))}}}}},{key:"ie",value:function(e,t){var n=e.bt,r=n.unchangedNames,i=n.count;if(!r||!r.bits)return 1;var a,o,u=r.bits,s=u.bitmap,c=void 0===s?"":s,l=u.padding,f=void 0===l?0:l,h=r.hashCount,d=void 0===h?0:h;try{a=Pg(c).toUint8Array()}catch(e){if(e instanceof Sg)return Um("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{o=new cw(a,f,d)}catch(e){return Um(e instanceof lw?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===o.yt?1:i!==t-this.re(e.targetId,o)?2:0}},{key:"re",value:function(e,t){var n=this,r=this.Kt.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){var a=n.Kt.oe(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());t.At(o)||(n.Jt(e,r,null),i++)})),i}},{key:"ue",value:function(e){var t=this,n=new Map;this.Gt.forEach((function(r,i){var a=t.ne(i);if(a){if(r.current&&Lk(a.target)){var o=new fy(a.target.path);null!==t.Qt.get(o)||t.ce(i,o)||t.Jt(i,o,ok.newNoDocument(o,e))}r.kt&&(n.set(i,r.Ot()),r.$t())}}));var r=pb();this.jt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.ne(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Qt.forEach((function(t,n){return n.setReadTime(e)}));var i=new fw(e,n,this.zt,this.Qt,r);return this.Qt=ab(),this.jt=gw(),this.zt=new kg(ny),i}},{key:"Ht",value:function(e,t){if(this.Zt(e)){var n=this.ce(e,t.key)?2:0;this.Xt(e).Ft(t.key,n),this.Qt=this.Qt.insert(t.key,t),this.jt=this.jt.insert(t.key,this.ae(t.key).add(e))}}},{key:"Jt",value:function(e,t,n){if(this.Zt(e)){var r=this.Xt(e);this.ce(e,t)?r.Ft(t,1):r.Bt(t),this.jt=this.jt.insert(t,this.ae(t).delete(e)),n&&(this.Qt=this.Qt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Gt.delete(e)}},{key:"se",value:function(e){var t=this.Xt(e).Ot();return this.Kt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Lt",value:function(e){this.Xt(e).Lt()}},{key:"Xt",value:function(e){var t=this.Gt.get(e);return t||(t=new mw,this.Gt.set(e,t)),t}},{key:"ae",value:function(e){var t=this.jt.get(e);return t||(t=new xg(ny),this.jt=this.jt.insert(e,t)),t}},{key:"Zt",value:function(e){var t=null!==this.ne(e);return t||Mm("WatchChangeAggregator","Detected inactive target",e),t}},{key:"ne",value:function(e){var t=this.Gt.get(e);return t&&t.Nt?null:this.Kt.he(e)}},{key:"te",value:function(e){var t=this;this.Gt.set(e,new mw),this.Kt.getRemoteKeysForTarget(e).forEach((function(n){t.Jt(e,n,null)}))}},{key:"ce",value:function(e,t){return this.Kt.getRemoteKeysForTarget(e).has(t)}}]),e}();function gw(){return new kg(fy.comparator)}function kw(){return new kg(fy.comparator)}var bw={asc:"ASCENDING",desc:"DESCENDING"},ww={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xw={and:"AND",or:"OR"},_w=De((function e(t,n){Ne(this,e),this.databaseId=t,this.useProto3Json=n}));function Iw(e,t){return e.useProto3Json||Uy(t)?t:{value:t}}function Ew(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Sw(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Tw(e,t){return Ew(e,t.toTimestamp())}function Cw(e){return zm(!!e),oy.fromTimestamp(function(e){var t=Ag(e);return new ay(t.seconds,t.nanos)}(e))}function Aw(e,t){return function(e){return new sy(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Nw(e){var t=sy.fromString(e);return zm(Zw(t)),t}function Pw(e,t){return Aw(e.databaseId,t.path)}function Dw(e,t){var n=Nw(t);if(n.get(1)!==e.databaseId.projectId)throw new Km(qm.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Km(qm.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new fy(Mw(n))}function Ow(e,t){return Aw(e.databaseId,t)}function Rw(e){var t=Nw(e);return 4===t.length?sy.emptyPath():Mw(t)}function Lw(e){return new sy(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Mw(e){return zm(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Fw(e,t,n){return{name:Pw(e,t),fields:n.value.mapValue.fields}}function Uw(e,t,n){var r=Dw(e,t.name),i=Cw(t.updateTime),a=t.createTime?Cw(t.createTime):oy.min(),o=new ik({mapValue:{fields:t.fields}}),u=ok.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function Vw(e,t){return"found"in t?function(e,t){zm(!!t.found),t.found.name,t.found.updateTime;var n=Dw(e,t.found.name),r=Cw(t.found.updateTime),i=t.found.createTime?Cw(t.found.createTime):oy.min(),a=new ik({mapValue:{fields:t.found.fields}});return ok.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){zm(!!t.missing),zm(!!t.readTime);var n=Dw(e,t.missing),r=Cw(t.readTime);return ok.newNoDocument(n,r)}(e,t):jm()}function jw(e,t){var n;if(t instanceof Bb)n={update:Fw(e,t.key,t.value)};else if(t instanceof $b)n={delete:Pw(e,t.key)};else if(t instanceof qb)n={update:Fw(e,t.key,t.data),updateMask:Jw(t.fieldMask)};else{if(!(t instanceof Yb))return jm();n={verify:Pw(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Ib)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Eb)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Tb)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ab)return{fieldPath:t.field.canonicalString(),increment:n.wt};throw jm()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Tw(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:jm()}(e,t.precondition)),n}function zw(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Rb.updateTime(Cw(e.updateTime)):void 0!==e.exists?Rb.exists(e.exists):Rb.none()}(t.currentDocument):Rb.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)zm("REQUEST_TIME"===t.setToServerValue),n=new Ib;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Eb(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Tb(i)}else"increment"in t?n=new Ab(e,t.increment):jm();var a=ly.fromServerFormat(t.fieldPath);return new Db(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Dw(e,t.update.name),a=new ik({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Eg(t.map((function(e){return ly.fromServerFormat(e)})))}(t.updateMask);return new qb(i,a,o,n,r)}return new Bb(i,a,n,r)}if(t.delete){var u=Dw(e,t.delete);return new $b(u,n)}if(t.verify){var s=Dw(e,t.verify);return new Yb(s,n)}return jm()}function Bw(e,t){return{documents:[Ow(e,t.path)]}}function qw(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Ow(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Ow(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Xw(pk.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:$w(e.field),direction:Hw(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=Iw(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Kw(e){var t=Rw(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){zm(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Gw(e);return t instanceof pk&&yk(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new lk(Yw(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Uy(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new uk(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new uk(n,t)}(n.endAt)),jk(t,i,u,o,s,"F",c,l)}function Gw(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Yw(e.unaryFilter.field);return dk.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Yw(e.unaryFilter.field);return dk.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Yw(e.unaryFilter.field);return dk.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Yw(e.unaryFilter.field);return dk.create(i,"!=",{nullValue:"NULL_VALUE"});default:return jm()}}(e):void 0!==e.fieldFilter?function(e){return dk.create(Yw(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return jm()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return pk.create(e.compositeFilter.filters.map((function(e){return Gw(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return jm()}}(e.compositeFilter.op))}(e):jm()}function Hw(e){return bw[e]}function Ww(e){return ww[e]}function Qw(e){return xw[e]}function $w(e){return{fieldPath:e.canonicalString()}}function Yw(e){return ly.fromServerFormat(e.fieldPath)}function Xw(e){return e instanceof dk?function(e){if("=="===e.op){if(Yg(e.value))return{unaryFilter:{field:$w(e.field),op:"IS_NAN"}};if($g(e.value))return{unaryFilter:{field:$w(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Yg(e.value))return{unaryFilter:{field:$w(e.field),op:"IS_NOT_NAN"}};if($g(e.value))return{unaryFilter:{field:$w(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$w(e.field),op:Ww(e.op),value:e.value}}}(e):e instanceof pk?function(e){var t=e.getFilters().map((function(e){return Xw(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Qw(e.op),filters:t}}}(e):jm()}function Jw(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Zw(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var ex=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:oy.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:oy.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Tg.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Ne(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return De(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),tx=De((function e(t){Ne(this,e),this.le=t}));function nx(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:rx(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Pw(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Ew(e,t.version.toTimestamp()),createTime:Ew(e,t.createTime.toTimestamp())}}(e.le,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ix(t.version)};else{if(!t.isUnknownDocument())return jm();r.unknownDocument={path:n.path.toArray(),version:ix(t.version)}}return r}function rx(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function ix(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ax(e){var t=new ay(e.seconds,e.nanoseconds);return oy.fromTimestamp(t)}function ox(e,t){for(var n=(t.baseMutations||[]).map((function(t){return zw(e.le,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return zw(e.le,t)})),u=ay.fromMillis(t.localWriteTimeMs);return new Xb(t.batchId,u,n,o)}function ux(e){var t,n,r=ax(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?ax(e.lastLimboFreeSnapshotVersion):oy.min();return void 0!==e.query.documents?(zm(1===(n=e.query).documents.length),t=Wk(zk(Rw(n.documents[0])))):t=function(e){return Wk(Kw(e))}(e.query),new ex(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,r,i,Tg.fromBase64String(e.resumeToken))}function sx(e,t){var n,r=ix(t.snapshotVersion),i=ix(t.lastLimboFreeSnapshotVersion);n=Lk(t.target)?Bw(e.le,t.target):qw(e.le,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Ok(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function cx(e){var t=Kw({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?$k(t,t.limit,"L"):t}function lx(e,t){return new Zb(t.largestBatchId,zw(e.le,t.overlayMutation))}function fx(e,t){var n=t.path.lastSegment();return[e,zy(t.path.popLast()),n]}function hx(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:ix(r.readTime),documentKey:zy(r.documentKey.path),largestBatchId:r.largestBatchId}}var dx=function(){function e(){Ne(this,e)}return De(e,[{key:"getBundleMetadata",value:function(e,t){return px(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:ax(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return px(e).put({bundleId:(n=t).id,createTime:ix(Cw(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return vx(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:cx(t.bundledQuery),readTime:ax(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return vx(e).put(function(e){return{name:e.name,readTime:ix(Cw(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function px(e){return vg(e,"bundles")}function vx(e){return vg(e,"namedQueries")}var mx=function(){function e(t,n){Ne(this,e),this.serializer=t,this.userId=n}return De(e,[{key:"getOverlay",value:function(e,t){var n=this;return yx(e).get(fx(this.userId,t)).next((function(e){return e?lx(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=cb();return Ey.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Zb(t,a);i.push(r.de(e,o))})),Ey.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(zy(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(yx(e).J("collectionPathOverlayIndex",i))})),Ey.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=cb(),a=zy(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return yx(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=vn(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=lx(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=cb(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return yx(e).X({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=lx(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"de",value:function(e,t){return yx(e).put(function(e,t,n){var r=Ye(fx(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:jw(e.le,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"fe",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function yx(e){return vg(e,"documentOverlays")}var gx=function(){function e(){Ne(this,e)}return De(e,[{key:"_e",value:function(e,t){this.we(e,t),t.me()}},{key:"we",value:function(e,t){if("nullValue"in e)this.ge(t,5);else if("booleanValue"in e)this.ge(t,10),t.ye(e.booleanValue?1:0);else if("integerValue"in e)this.ge(t,15),t.ye(Ng(e.integerValue));else if("doubleValue"in e){var n=Ng(e.doubleValue);isNaN(n)?this.ge(t,13):(this.ge(t,15),Vy(n)?t.ye(0):t.ye(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ge(t,20),"string"==typeof r?t.pe(r):(t.pe("".concat(r.seconds||"")),t.ye(r.nanos||0))}else if("stringValue"in e)this.Ie(e.stringValue,t),this.Te(t);else if("bytesValue"in e)this.ge(t,30),t.Ee(Pg(e.bytesValue)),this.Te(t);else if("referenceValue"in e)this.Ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ge(t,45),t.ye(i.latitude||0),t.ye(i.longitude||0)}else"mapValue"in e?Zg(e)?this.ge(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Te(t)):"arrayValue"in e?(this.ve(e.arrayValue,t),this.Te(t)):jm()}},{key:"Ie",value:function(e,t){this.ge(t,25),this.Pe(e,t)}},{key:"Pe",value:function(e,t){t.pe(e)}},{key:"Re",value:function(e,t){var n=e.fields||{};this.ge(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Ie(a,t),this.we(n[a],t)}}},{key:"ve",value:function(e,t){var n=e.values||[];this.ge(t,50);var r,i=vn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.we(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"Ae",value:function(e,t){var n=this;this.ge(t,37),fy.fromName(e).path.forEach((function(e){n.ge(t,60),n.Pe(e,t)}))}},{key:"ge",value:function(e,t){e.ye(t)}},{key:"Te",value:function(e){e.ye(2)}}]),e}();function kx(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function bx(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=kx(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}gx.be=new gx;var wx=function(){function e(){Ne(this,e),this.buffer=new Uint8Array(1024),this.position=0}return De(e,[{key:"Ve",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Se(n.value),n=t.next();this.De()}},{key:"Ce",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.xe(n.value),n=t.next();this.Ne()}},{key:"ke",value:function(e){var t,n=vn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Se(i);else if(i<2048)this.Se(960|i>>>6),this.Se(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Se(480|i>>>12),this.Se(128|63&i>>>6),this.Se(128|63&i);else{var a=r.codePointAt(0);this.Se(240|a>>>18),this.Se(128|63&a>>>12),this.Se(128|63&a>>>6),this.Se(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.De()}},{key:"Me",value:function(e){var t,n=vn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.xe(i);else if(i<2048)this.xe(960|i>>>6),this.xe(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.xe(480|i>>>12),this.xe(128|63&i>>>6),this.xe(128|63&i);else{var a=r.codePointAt(0);this.xe(240|a>>>18),this.xe(128|63&a>>>12),this.xe(128|63&a>>>6),this.xe(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ne()}},{key:"Oe",value:function(e){var t=this.$e(e),n=bx(t);this.Fe(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Be",value:function(e){var t=this.$e(e),n=bx(t);this.Fe(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Le",value:function(){this.qe(255),this.qe(255)}},{key:"Ue",value:function(){this.Ke(255),this.Ke(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Fe(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Ge",value:function(){return this.buffer.slice(0,this.position)}},{key:"$e",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Se",value:function(e){var t=255&e;0===t?(this.qe(0),this.qe(255)):255===t?(this.qe(255),this.qe(0)):this.qe(t)}},{key:"xe",value:function(e){var t=255&e;0===t?(this.Ke(0),this.Ke(255)):255===t?(this.Ke(255),this.Ke(0)):this.Ke(e)}},{key:"De",value:function(){this.qe(0),this.qe(1)}},{key:"Ne",value:function(){this.Ke(0),this.Ke(1)}},{key:"qe",value:function(e){this.Fe(1),this.buffer[this.position++]=e}},{key:"Ke",value:function(e){this.Fe(1),this.buffer[this.position++]=~e}},{key:"Fe",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),xx=function(){function e(t){Ne(this,e),this.Qe=t}return De(e,[{key:"Ee",value:function(e){this.Qe.Ve(e)}},{key:"pe",value:function(e){this.Qe.ke(e)}},{key:"ye",value:function(e){this.Qe.Oe(e)}},{key:"me",value:function(){this.Qe.Le()}}]),e}(),_x=function(){function e(t){Ne(this,e),this.Qe=t}return De(e,[{key:"Ee",value:function(e){this.Qe.Ce(e)}},{key:"pe",value:function(e){this.Qe.Me(e)}},{key:"ye",value:function(e){this.Qe.Be(e)}},{key:"me",value:function(){this.Qe.Ue()}}]),e}(),Ix=function(){function e(){Ne(this,e),this.Qe=new wx,this.je=new xx(this.Qe),this.ze=new _x(this.Qe)}return De(e,[{key:"seed",value:function(e){this.Qe.seed(e)}},{key:"We",value:function(e){return 0===e?this.je:this.ze}},{key:"Ge",value:function(){return this.Qe.Ge()}},{key:"reset",value:function(){this.Qe.reset()}}]),e}(),Ex=function(){function e(t,n,r,i){Ne(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return De(e,[{key:"He",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Sx(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Tx(e.arrayValue,t.arrayValue))?n:0!==(n=Tx(e.directionalValue,t.directionalValue))?n:fy.comparator(e.documentKey,t.documentKey)}function Tx(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Cx=function(){function e(t){Ne(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Je=t.orderBy,this.Ye=[];var n,r=vn(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Xe=i:this.Ye.push(i)}}catch(a){r.e(a)}finally{r.f()}}return De(e,[{key:"Ze",value:function(e){zm(e.collectionGroup===this.collectionId);var t=dy(e);if(void 0!==t&&!this.tn(t))return!1;for(var n=py(e),r=0,i=0;r<n.length&&this.tn(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Xe){var a=n[r];if(!this.en(this.Xe,a)||!this.nn(this.Je[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Je.length||!this.nn(this.Je[i++],o))return!1}return!0}},{key:"tn",value:function(e){var t,n=vn(this.Ye);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.en(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"en",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"nn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function Ax(e){var t,n;if(zm(e instanceof dk||e instanceof pk),e instanceof dk){if(e instanceof Ck){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return dk.create(e.field,"==",t)})))||[];return pk.create(r,"or")}return e}var i=e.filters.map((function(e){return Ax(e)}));return pk.create(i,e.op)}function Nx(e){if(0===e.getFilters().length)return[];var t=Rx(Ax(e));return zm(Ox(t)),Px(t)||Dx(t)?[t]:t.getFilters()}function Px(e){return e instanceof dk}function Dx(e){return e instanceof pk&&yk(e)}function Ox(e){return Px(e)||Dx(e)||function(e){if(e instanceof pk&&mk(e)){var t,n=vn(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!Px(r)&&!Dx(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function Rx(e){if(zm(e instanceof dk||e instanceof pk),e instanceof dk)return e;if(1===e.filters.length)return Rx(e.filters[0]);var t=e.filters.map((function(e){return Rx(e)})),n=pk.create(t,e.op);return Ox(n=Fx(n))?n:(zm(n instanceof pk),zm(vk(n)),zm(n.filters.length>1),n.filters.reduce((function(e,t){return Lx(e,t)})))}function Lx(e,t){var n;return zm(e instanceof dk||e instanceof pk),zm(t instanceof dk||t instanceof pk),n=e instanceof dk?t instanceof dk?function(e,t){return pk.create([e,t],"and")}(e,t):Mx(e,t):t instanceof dk?Mx(t,e):function(e,t){if(zm(e.filters.length>0&&t.filters.length>0),vk(e)&&vk(t))return wk(e,t.getFilters());var n=mk(e)?e:t,r=mk(e)?t:e,i=n.filters.map((function(e){return Lx(e,r)}));return pk.create(i,"or")}(e,t),Fx(n)}function Mx(e,t){if(vk(t))return wk(t,e.getFilters());var n=t.filters.map((function(t){return Lx(e,t)}));return pk.create(n,"or")}function Fx(e){if(zm(e instanceof dk||e instanceof pk),e instanceof dk)return e;var t=e.getFilters();if(1===t.length)return Fx(t[0]);if(gk(e))return e;var n=t.map((function(e){return Fx(e)})),r=[];return n.forEach((function(t){t instanceof dk?r.push(t):t instanceof pk&&(t.op===e.op?r.push.apply(r,Je(t.filters)):r.push(t))})),1===r.length?r[0]:pk.create(r,e.op)}var Ux=function(){function e(){Ne(this,e),this.sn=new Vx}return De(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.sn.add(t),Ey.resolve()}},{key:"getCollectionParents",value:function(e,t){return Ey.resolve(this.sn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Ey.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Ey.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Ey.resolve(null)}},{key:"getIndexType",value:function(e,t){return Ey.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Ey.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Ey.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Ey.resolve(ky.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Ey.resolve(ky.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Ey.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Ey.resolve()}}]),e}(),Vx=function(){function e(){Ne(this,e),this.index={}}return De(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new xg(sy.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new xg(sy.comparator)).toArray()}}]),e}(),jx=new Uint8Array(0),zx=function(){function e(t,n){Ne(this,e),this.user=t,this.databaseId=n,this.rn=new Vx,this.on=new rb((function(e){return Ok(e)}),(function(e,t){return Rk(e,t)})),this.uid=t.uid||""}return De(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.rn.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.rn.add(t)}));var a={collectionId:r,parent:zy(i)};return Bx(e).put(a)}return Ey.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[iy(t),""],!1,!0);return Bx(e).j(r).next((function(e){var r,i=vn(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Ky(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Kx(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=Gx(e);return a.next((function(e){o.put(hx(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Kx(e),r=Gx(e),i=qx(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=qx(e),i=!0,a=new Map;return Ey.forEach(this.un(t),(function(t){return n.cn(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=pb(),o=[];return Ey.forEach(a,(function(i,a){var u;Mm("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Ok(t)));var s=function(e,t){var n=dy(t);if(void 0===n)return null;var r,i=vn(Mk(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=vn(py(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=vn(Mk(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=vn(py(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Fk(e,o.fieldPath,e.startAt):Uk(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new uk(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=vn(py(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Uk(e,o.fieldPath,e.endAt):Fk(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new uk(r,i)}(a,i),h=n.an(i,a,l),d=n.an(i,a,f),p=n.hn(i,a,c),v=n.ln(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return Ey.forEach(v,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=fy.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Ey.resolve(null)}))}},{key:"un",value:function(e){var t=this.on.get(e);return t||(t=0===e.filters.length?[e]:Nx(pk.create(e.filters,"and")).map((function(t){return Dk(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.on.set(e,t),t)}},{key:"ln",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.fn(t[h/c]):jx,f=u.dn(e,s,n[h%c],r),d=u._n(e,s,i[h%c],a),p=o.map((function(t){return u.dn(e,s,t,!0)}));l.push.apply(l,Je(u.createRange(f,d,p)))},h=0;h<s;++h)f();return l}},{key:"dn",value:function(e,t,n,r){var i=new Ex(e,fy.empty(),t,n);return r?i:i.He()}},{key:"_n",value:function(e,t,n,r){var i=new Ex(e,fy.empty(),t,n);return r?i.He():i}},{key:"cn",value:function(e,t){var n=new Cx(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=vn(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Ze(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.un(t);return Ey.forEach(i,(function(t){return n.cn(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new xg(ly.comparator),r=!1,i=vn(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=vn(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=vn(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"wn",value:function(e,t){var n,r=new Ix,i=vn(py(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.We(a.kind);gx.be._e(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Ge()}},{key:"fn",value:function(e){var t=new Ix;return gx.be._e(e,t.We(0)),t.Ge()}},{key:"mn",value:function(e,t){var n=new Ix;return gx.be._e(Hg(this.databaseId,t),n.We(function(e){var t=py(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Ge()}},{key:"hn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Ix);var i,a=0,o=vn(py(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=vn(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.gn(t,s.fieldPath)&&Qg(c))r=this.yn(r,s,c);else{var h=f.We(s.kind);gx.be._e(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.pn(r)}},{key:"an",value:function(e,t,n){return this.hn(e,t,n.position)}},{key:"pn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Ge();return t}},{key:"yn",value:function(e,t,n){var r,i=Je(e),a=[],o=vn(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=vn(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Ix;f.seed(l.Ge()),gx.be._e(s,f.We(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"gn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof dk&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Kx(e),i=Gx(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return Ey.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new my(t.sequenceNumber,new ky(ax(t.readTime),new fy(Ky(t.documentKey)),t.largestBatchId)):my.empty(),r=e.fields.map((function(e){var t=Ye(e,2),n=t[0],r=t[1];return new vy(ly.fromServerFormat(n),r)}));return new hy(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:ny(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Kx(e),a=Gx(e);return this.In(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Ey.forEach(t,(function(t){return a.put(hx(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Ey.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Ey.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Ey.forEach(a,(function(r){return n.Tn(e,t,r).next((function(t){var a=n.En(i,r);return t.isEqual(a)?Ey.resolve():n.An(e,i,r,t,a)}))}))}))}))}},{key:"Rn",value:function(e,t,n,r){return qx(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.mn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"vn",value:function(e,t,n,r){return qx(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.mn(n,t.key),t.key.path.toArray()])}},{key:"Tn",value:function(e,t,n){var r=qx(e),i=new xg(Sx);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,t)])},(function(e,r){i=i.add(new Ex(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"En",value:function(e,t){var n=new xg(Sx),r=this.wn(t,e);if(null==r)return n;var i=dy(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Qg(a)){var o,u=vn(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Ex(t.indexId,e.key,this.fn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Ex(t.indexId,e.key,jx,r));return n}},{key:"An",value:function(e,t,n,r,i){var a=this;Mm("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Ig(a),s=Ig(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Ig(o)):l?(i(u),u=Ig(a)):(u=Ig(a),s=Ig(o))}}(r,i,Sx,(function(r){o.push(a.Rn(e,t,n,r))}),(function(r){o.push(a.vn(e,t,n,r))})),Ey.waitFor(o)}},{key:"In",value:function(e){var t=1;return Gx(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Sx(e,t)})).filter((function(e,t,n){return!t||0!==Sx(e,n[t-1])}));var r=[];r.push(e);var i,a=vn(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Sx(o,e),s=Sx(o,t);if(0===u)r[0]=e.He();else if(u>0&&s<0)r.push(o),r.push(o.He());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.Pn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,jx,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,jx,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"Pn",value:function(e,t){return Sx(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Hx)}},{key:"getMinOffset",value:function(e,t){var n=this;return Ey.mapArray(this.un(t),(function(t){return n.cn(e,t).next((function(e){return e||jm()}))})).next(Hx)}}]),e}();function Bx(e){return vg(e,"collectionParents")}function qx(e){return vg(e,"indexEntries")}function Kx(e){return vg(e,"indexConfiguration")}function Gx(e){return vg(e,"indexState")}function Hx(e){zm(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;by(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ky(t.readTime,t.documentKey,n)}var Wx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Qx=function(){function e(t,n,r){Ne(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return De(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function $x(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.X({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){zm(1===u)})));var c,l=[],f=vn(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Wy(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Ey.waitFor(a).next((function(){return l}))}function Yx(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw jm();t=e.noDocument}return JSON.stringify(t).length}Qx.DEFAULT_COLLECTION_PERCENTILE=10,Qx.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qx.DEFAULT=new Qx(41943040,Qx.DEFAULT_COLLECTION_PERCENTILE,Qx.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qx.DISABLED=new Qx(-1,0,0);var Xx=function(){function e(t,n,r,i){Ne(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.bn={}}return De(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zx(e).X({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=e_(e),o=Zx(e);return o.add({}).next((function(u){zm("number"==typeof u);var s,c=new Xb(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return jw(e.le,t)})),i=n.mutations.map((function(t){return jw(e.le,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new xg((function(e,t){return ny(e.canonicalString(),t.canonicalString())})),d=vn(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Wy(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Qy))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.bn[u]=c.keys()})),Ey.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Zx(e).get(t).next((function(e){return e?(zm(e.userId===n.userId),ox(n.serializer,e)):null}))}},{key:"Vn",value:function(e,t){var n=this;return this.bn[t]?Ey.resolve(this.bn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.bn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Zx(e).X({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(zm(t.batchId>=r),a=ox(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Zx(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Zx(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return ox(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Hy(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return e_(e).X({range:i},(function(r,i,o){var u=Ye(r,3),s=u[0],c=u[1],l=u[2],f=Ky(c);if(s===n.userId&&t.path.isEqual(f))return Zx(e).get(l).next((function(e){if(!e)throw jm();zm(e.userId===n.userId),a.push(ox(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new xg(ny),i=[];return t.forEach((function(t){var a=Hy(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=e_(e).X({range:o},(function(e,i,a){var o=Ye(e,3),u=o[0],s=o[1],c=o[2],l=Ky(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),Ey.waitFor(i).next((function(){return n.Sn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Hy(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new xg(ny);return e_(e).X({range:o},(function(e,t,a){var o=Ye(e,3),s=o[0],c=o[1],l=o[2],f=Ky(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.Sn(e,u)}))}},{key:"Sn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Zx(e).get(t).next((function(e){if(null===e)throw jm();zm(e.userId===n.userId),r.push(ox(n.serializer,e))})))})),Ey.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return $x(e.at,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Dn(t.batchId)})),Ey.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Dn",value:function(e){delete this.bn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Ey.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return e_(e).X({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Ky(e[1]);i.push(a)}else r.done()})).next((function(){zm(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Jx(e,this.userId,t)}},{key:"Cn",value:function(e){var t=this;return t_(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"fe",value:function(t,n,r,i){return zm(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Jx(e,t,n){var r=Hy(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return e_(e).X({range:a,Y:!0},(function(e,n,r){var a=Ye(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Zx(e){return vg(e,"mutations")}function e_(e){return vg(e,"documentMutations")}function t_(e){return vg(e,"mutationQueues")}var n_=function(){function e(t){Ne(this,e),this.xn=t}return De(e,[{key:"next",value:function(){return this.xn+=2,this.xn}}],[{key:"Nn",value:function(){return new e(0)}},{key:"kn",value:function(){return new e(-1)}}]),e}(),r_=function(){function e(t,n){Ne(this,e),this.referenceDelegate=t,this.serializer=n}return De(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Mn(e).next((function(n){var r=new n_(n.highestTargetId);return n.highestTargetId=r.next(),t.On(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Mn(e).next((function(e){return oy.fromTimestamp(new ay(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Mn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Mn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.On(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.$n(e,t).next((function(){return n.Mn(e).next((function(r){return r.targetCount+=1,n.Fn(t,r),n.On(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.$n(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return i_(e).delete(t.targetId)})).next((function(){return n.Mn(e)})).next((function(t){return zm(t.targetCount>0),t.targetCount-=1,n.On(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return i_(e).X((function(o,u){var s=ux(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Ey.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return i_(e).X((function(e,n){var r=ux(n);t(r)}))}},{key:"Mn",value:function(e){return a_(e).get("targetGlobalKey").next((function(e){return zm(null!==e),e}))}},{key:"On",value:function(e,t){return a_(e).put("targetGlobalKey",t)}},{key:"$n",value:function(e,t){return i_(e).put(sx(this.serializer,t))}},{key:"Fn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Mn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Ok(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return i_(e).X({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=ux(n);Rk(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=o_(e);return t.forEach((function(t){var o=zy(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Ey.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=o_(e);return Ey.forEach(t,(function(t){var a=zy(t.path);return Ey.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=o_(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=o_(e),i=pb();return r.X({range:n,Y:!0},(function(e,t,n){var r=Ky(e[1]),a=new fy(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=zy(t.path),r=IDBKeyRange.bound([n],[iy(n)],!1,!0),i=0;return o_(e).X({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=Ye(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"he",value:function(e,t){return i_(e).get(t).next((function(e){return e?ux(e):null}))}}]),e}();function i_(e){return vg(e,"targets")}function a_(e){return vg(e,"targetGlobal")}function o_(e){return vg(e,"targetDocuments")}function u_(e,t){var n=Ye(e,2),r=n[0],i=n[1],a=Ye(t,2),o=a[0],u=a[1],s=ny(r,o);return 0===s?ny(i,u):s}var s_=function(){function e(t){Ne(this,e),this.Bn=t,this.buffer=new xg(u_),this.Ln=0}return De(e,[{key:"qn",value:function(){return++this.Ln}},{key:"Un",value:function(e){var t=[e,this.qn()];if(this.buffer.size<this.Bn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();u_(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),c_=function(){function e(t,n,r){Ne(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Kn=null}return De(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}},{key:"stop",value:function(){this.Kn&&(this.Kn.cancel(),this.Kn=null)}},{key:"started",get:function(){return null!==this.Kn}},{key:"Gn",value:function(e){var t=this;Mm("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Kn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,Ae(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Kn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Ny(e.t0)){e.next=12;break}Mm("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,_y(e.t0);case 14:return e.next=16,t.Gn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),l_=function(){function e(t,n){Ne(this,e),this.Qn=t,this.params=n}return De(e,[{key:"calculateTargetCount",value:function(e,t){return this.Qn.jn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Ey.resolve(Fy.ct);var r=new s_(t);return this.Qn.forEachTarget(e,(function(e){return r.Un(e.sequenceNumber)})).next((function(){return n.Qn.zn(e,(function(e){return r.Un(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Qn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Qn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Mm("LruGarbageCollector","Garbage collection skipped; disabled"),Ey.resolve(Wx)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Mm("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Wx):n.Wn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Qn.getCacheSize(e)}},{key:"Wn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Mm("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Lm()<=tr.DEBUG&&Mm("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Ey.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function f_(e,t){return new l_(e,t)}var h_=function(){function e(t,n){Ne(this,e),this.db=t,this.garbageCollector=f_(this,n)}return De(e,[{key:"jn",value:function(e){var t=this.Hn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Hn",value:function(e){var t=0;return this.zn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"zn",value:function(e,t){return this.Jn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return d_(e,n)}},{key:"removeReference",value:function(e,t,n){return d_(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return d_(e,t)}},{key:"Yn",value:function(e,t){return function(e,t){var n=!1;return t_(e).Z((function(r){return Jx(e,r,t).next((function(e){return e&&(n=!0),Ey.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Jn(e,(function(o,u){if(u<=t){var s=n.Yn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,oy.min()),o_(e).delete([0,zy(o.path)])}))}));i.push(s)}})).next((function(){return Ey.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return d_(e,t)}},{key:"Jn",value:function(e,t){var n,r=o_(e),i=Fy.ct;return r.X({index:"documentTargetsIndex"},(function(e,r){var a=Ye(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Fy.ct&&t(new fy(Ky(n)),i),i=s,n=u):i=Fy.ct})).next((function(){i!==Fy.ct&&t(new fy(Ky(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function d_(e,t){return o_(e).put(function(e,t){return{targetId:0,path:zy(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var p_=function(){function e(){Ne(this,e),this.changes=new rb((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return De(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,ok.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Ey.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),v_=function(){function e(t){Ne(this,e),this.serializer=t}return De(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return k_(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return k_(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],rx(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Xn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=ok.newInvalidDocument(t);return k_(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(b_(t))},(function(e,i){r=n.Zn(t,i)})).next((function(){return r}))}},{key:"ts",value:function(e,t){var n=this,r={size:0,document:ok.newInvalidDocument(t)};return k_(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(b_(t))},(function(e,i){r={document:n.Zn(t,i),size:Yx(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=ab();return this.es(e,t,(function(e,t){var i=n.Zn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"ns",value:function(e,t){var n=this,r=ab(),i=new kg(fy.comparator);return this.es(e,t,(function(e,t){var a=n.Zn(e,t);r=r.insert(e,a),i=i.insert(e,Yx(t))})).next((function(){return{documents:r,ss:i}}))}},{key:"es",value:function(e,t,n){if(t.isEmpty())return Ey.resolve();var r=new xg(x_);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(b_(r.first()),b_(r.last())),a=r.getIterator(),o=a.getNext();return k_(e).X({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=fy.fromSegments([].concat(Je(t.prefixPath),[t.collectionGroup,t.documentId]));o&&x_(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G(b_(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),rx(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return k_(e).j(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=ab(),o=vn(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.Zn(fy.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(Zk(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=ab(),o=w_(t,n),u=w_(t,ky.max());return k_(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Zn(fy.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new y_(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return g_(e).get("remoteDocumentGlobalKey").next((function(e){return zm(!!e),e}))}},{key:"Xn",value:function(e,t){return g_(e).put("remoteDocumentGlobalKey",t)}},{key:"Zn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Uw(e.le,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=fy.fromSegments(t.noDocument.path),i=ax(t.noDocument.readTime);n=ok.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return jm();var a=fy.fromSegments(t.unknownDocument.path),o=ax(t.unknownDocument.version);n=ok.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new ay(e[0],e[1]);return oy.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(oy.min()))return n}return ok.newInvalidDocument(e)}}]),e}();function m_(e){return new v_(e)}var y_=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this)).rs=e,i.trackRemovals=r,i.os=new rb((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return De(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new xg((function(e,t){return ny(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.os.get(a);if(n.push(t.rs.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=nx(t.rs.serializer,o);i=i.add(a.path.popLast());var c=Yx(s);r+=c-u.size,n.push(t.rs.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=nx(t.rs.serializer,o.convertToNoDocument(oy.min()));n.push(t.rs.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.rs.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.rs.updateMetadata(e,r)),Ey.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.rs.ts(e,t).next((function(e){return n.os.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.rs.ns(e,t).next((function(e){var t=e.documents;return e.ss.forEach((function(e,r){n.os.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(p_);function g_(e){return vg(e,"remoteDocumentGlobal")}function k_(e){return vg(e,"remoteDocumentsV14")}function b_(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function w_(e,t){var n=t.documentKey.path.toArray();return[e,rx(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function x_(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=ny(n[a],r[a]))return i;return(i=ny(n.length,r.length))||((i=ny(n[n.length-2],r[r.length-2]))||ny(n[n.length-1],r[r.length-1]))}var __=De((function e(t,n){Ne(this,e),this.overlayedDocument=t,this.mutatedFields=n})),I_=function(){function e(t,n,r,i){Ne(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return De(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Vb(r.mutation,e,Eg.empty(),ay.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,pb()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pb(),i=cb();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=ub();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=cb();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,pb())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=ab(),a=fb(),o=fb();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof qb)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),Vb(o.mutation,t,o.mutation.getFieldMask(),ay.now())):a.set(t.key,Eg.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new __(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=fb(),i=new kg((function(e,t){return e-t})),a=pb();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=vn(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Eg.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||pb()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=lb();c.forEach((function(e){if(!a.has(e)){var n=Fb(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Ey.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return fy.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Gk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Ey.resolve(cb()),u=-1,s=a;return o.next((function(t){return Ey.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Ey.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,pb())})).next((function(e){return{batchId:u,changes:sb(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new fy(t)).next((function(e){var t=ub();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=ub();return this.indexManager.getCollectionParents(e,i).next((function(o){return Ey.forEach(o,(function(o){var u=function(e,t){return new Vk(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,ok.newInvalidDocument(r)))}));var n=ub();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&Vb(a.mutation,i,Eg.empty(),ay.now()),Zk(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),E_=function(){function e(t){Ne(this,e),this.serializer=t,this.us=new Map,this.cs=new Map}return De(e,[{key:"getBundleMetadata",value:function(e,t){return Ey.resolve(this.us.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.us.set(t.id,{id:(n=t).id,version:n.version,createTime:Cw(n.createTime)}),Ey.resolve()}},{key:"getNamedQuery",value:function(e,t){return Ey.resolve(this.cs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.cs.set(t.name,function(e){return{name:e.name,query:cx(e.bundledQuery),readTime:Cw(e.readTime)}}(t)),Ey.resolve()}}]),e}(),S_=function(){function e(){Ne(this,e),this.overlays=new kg(fy.comparator),this.hs=new Map}return De(e,[{key:"getOverlay",value:function(e,t){return Ey.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=cb();return Ey.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.de(e,t,i)})),Ey.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.hs.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.hs.delete(n)),Ey.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=cb(),i=t.length+1,a=new fy(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Ey.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new kg((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=cb(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=cb(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Ey.resolve(s)}},{key:"de",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.hs.get(r.largestBatchId).delete(n.key);this.hs.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Zb(t,n));var a=this.hs.get(t);void 0===a&&(a=pb(),this.hs.set(t,a)),this.hs.set(t,a.add(n.key))}}]),e}(),T_=function(){function e(){Ne(this,e),this.ls=new xg(C_.fs),this.ds=new xg(C_._s)}return De(e,[{key:"isEmpty",value:function(){return this.ls.isEmpty()}},{key:"addReference",value:function(e,t){var n=new C_(e,t);this.ls=this.ls.add(n),this.ds=this.ds.add(n)}},{key:"ws",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.gs(new C_(e,t))}},{key:"ys",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ps",value:function(e){var t=this,n=new fy(new sy([])),r=new C_(n,e),i=new C_(n,e+1),a=[];return this.ds.forEachInRange([r,i],(function(e){t.gs(e),a.push(e.key)})),a}},{key:"Is",value:function(){var e=this;this.ls.forEach((function(t){return e.gs(t)}))}},{key:"gs",value:function(e){this.ls=this.ls.delete(e),this.ds=this.ds.delete(e)}},{key:"Ts",value:function(e){var t=new fy(new sy([])),n=new C_(t,e),r=new C_(t,e+1),i=pb();return this.ds.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new C_(e,0),n=this.ls.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),C_=function(){function e(t,n){Ne(this,e),this.key=t,this.Es=n}return De(e,null,[{key:"fs",value:function(e,t){return fy.comparator(e.key,t.key)||ny(e.Es,t.Es)}},{key:"_s",value:function(e,t){return ny(e.Es,t.Es)||fy.comparator(e.key,t.key)}}]),e}(),A_=function(){function e(t,n){Ne(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.As=1,this.Rs=new xg(C_.fs)}return De(e,[{key:"checkEmpty",value:function(e){return Ey.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.As;this.As++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Xb(i,t,n,r);this.mutationQueue.push(a);var o,u=vn(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Rs=this.Rs.add(new C_(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Ey.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Ey.resolve(this.vs(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Ps(n),i=r<0?0:r;return Ey.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Ey.resolve(0===this.mutationQueue.length?-1:this.As-1)}},{key:"getAllMutationBatches",value:function(e){return Ey.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new C_(t,0),i=new C_(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],(function(e){var t=n.vs(e.Es);a.push(t)})),Ey.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new xg(ny);return t.forEach((function(e){var t=new C_(e,0),i=new C_(e,Number.POSITIVE_INFINITY);n.Rs.forEachInRange([t,i],(function(e){r=r.add(e.Es)}))})),Ey.resolve(this.bs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;fy.isDocumentKey(i)||(i=i.child(""));var a=new C_(new fy(i),0),o=new xg(ny);return this.Rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Es)),!0)}),a),Ey.resolve(this.bs(o))}},{key:"bs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.vs(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;zm(0===this.Vs(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Rs;return Ey.forEach(t.mutations,(function(i){var a=new C_(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Rs=r}))}},{key:"Dn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new C_(t,0),r=this.Rs.firstAfterOrEqual(n);return Ey.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Ey.resolve()}},{key:"Vs",value:function(e,t){return this.Ps(e)}},{key:"Ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"vs",value:function(e){var t=this.Ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),N_=function(){function e(t){Ne(this,e),this.Ss=t,this.docs=new kg(fy.comparator),this.size=0}return De(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ss(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Ey.resolve(n?n.document.mutableCopy():ok.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=ab();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():ok.newInvalidDocument(e))})),Ey.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=ab(),a=t.path,o=new fy(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||by(gy(l),n)<=0||(r.has(l.key)||Zk(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Ey.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){jm()}},{key:"Ds",value:function(e,t){return Ey.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new P_(this)}},{key:"getSize",value:function(e){return Ey.resolve(this.size)}}]),e}(),P_=function(e){Oe(n,e);var t=Ue(n);function n(e){var r;return Ne(this,n),(r=t.call(this)).rs=e,r}return De(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.rs.addEntry(e,i)):t.rs.removeEntry(r)})),Ey.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.rs.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.rs.getEntries(e,t)}}]),n}(p_),D_=function(){function e(t){Ne(this,e),this.persistence=t,this.Cs=new rb((function(e){return Ok(e)}),Rk),this.lastRemoteSnapshotVersion=oy.min(),this.highestTargetId=0,this.xs=0,this.Ns=new T_,this.targetCount=0,this.ks=n_.Nn()}return De(e,[{key:"forEachTarget",value:function(e,t){return this.Cs.forEach((function(e,n){return t(n)})),Ey.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Ey.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Ey.resolve(this.xs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.ks.next(),Ey.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.xs&&(this.xs=t),Ey.resolve()}},{key:"$n",value:function(e){this.Cs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.ks=new n_(t),this.highestTargetId=t),e.sequenceNumber>this.xs&&(this.xs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.$n(t),this.targetCount+=1,Ey.resolve()}},{key:"updateTargetData",value:function(e,t){return this.$n(t),Ey.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Cs.delete(t.target),this.Ns.ps(t.targetId),this.targetCount-=1,Ey.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Cs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Cs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Ey.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Ey.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Cs.get(t)||null;return Ey.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ns.ws(t,n),Ey.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ns.ys(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Ey.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ns.ps(t),Ey.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ns.Ts(t);return Ey.resolve(n)}},{key:"containsKey",value:function(e,t){return Ey.resolve(this.Ns.containsKey(t))}}]),e}(),O_=function(){function e(t,n){var r=this;Ne(this,e),this.Ms={},this.overlays={},this.Os=new Fy(0),this.$s=!1,this.$s=!0,this.referenceDelegate=t(this),this.Fs=new D_(this),this.indexManager=new Ux,this.remoteDocumentCache=new N_((function(e){return r.referenceDelegate.Bs(e)})),this.serializer=new tx(n),this.Ls=new E_(this.serializer)}return De(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.$s=!1,Promise.resolve()}},{key:"started",get:function(){return this.$s}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new S_,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ms[e.toKey()];return n||(n=new A_(t,this.referenceDelegate),this.Ms[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Fs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ls}},{key:"runTransaction",value:function(e,t,n){var r=this;Mm("MemoryPersistence","Starting transaction:",e);var i=new R_(this.Os.next());return this.referenceDelegate.qs(),n(i).next((function(e){return r.referenceDelegate.Us(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ks",value:function(e,t){return Ey.or(Object.values(this.Ms).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),R_=function(e){Oe(n,e);var t=Ue(n);function n(e){var r;return Ne(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return De(n)}(xy),L_=function(){function e(t){Ne(this,e),this.persistence=t,this.Gs=new T_,this.Qs=null}return De(e,[{key:"zs",get:function(){if(this.Qs)return this.Qs;throw jm()}},{key:"addReference",value:function(e,t,n){return this.Gs.addReference(n,t),this.zs.delete(n.toString()),Ey.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Gs.removeReference(n,t),this.zs.add(n.toString()),Ey.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.zs.add(t.toString()),Ey.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Gs.ps(t.targetId).forEach((function(e){return n.zs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.zs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"qs",value:function(){this.Qs=new Set}},{key:"Us",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ey.forEach(this.zs,(function(r){var i=fy.fromPath(r);return t.Ws(e,i).next((function(e){e||n.removeEntry(i,oy.min())}))})).next((function(){return t.Qs=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ws(e,t).next((function(e){e?n.zs.delete(t.toString()):n.zs.add(t.toString())}))}},{key:"Bs",value:function(e){return 0}},{key:"Ws",value:function(e,t){var n=this;return Ey.or([function(){return Ey.resolve(n.Gs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ks(e,t)}])}}],[{key:"js",value:function(t){return new e(t)}}]),e}(),M_=function(){function e(t){Ne(this,e),this.serializer=t}return De(e,[{key:"$",value:function(e,t,n,r){var i=this,a=new Sy("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Gy,{unique:!0}),e.createObjectStore("documentMutations")}(e),F_(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Ey.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),F_(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:oy.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Gy,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Ey.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Js(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ys(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Xs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Zs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ti(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:og});t.createIndex("collectionPathOverlayIndex",ug,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",sg,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:$y});t.createIndex("documentKeyIndex",Yy),t.createIndex("collectionGroupIndex",Xy)}(e)})).next((function(){return i.ei(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.ni(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:ng}).createIndex("sequenceNumberIndex",rg,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:ig}).createIndex("documentKeyIndex",ag,{unique:!1})}(e)}))),o}},{key:"Ys",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=Yx(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Js",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return Ey.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return Ey.forEach(r,(function(r){zm(r.userId===n.userId);var i=ox(t.serializer,r);return $x(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Xs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.X((function(n,i){var a=new sy(n),o=function(e){return[0,zy(e)]}(a);r.push(t.get(o).next((function(n){return n?Ey.resolve():function(n){return t.put({targetId:0,path:zy(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Ey.waitFor(r)}))}))}},{key:"Zs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:tg});var n=t.store("collectionParents"),r=new Vx,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:zy(i)})}};return t.store("remoteDocuments").X({Y:!0},(function(e,t){var n=new sy(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").X({Y:!0},(function(e,t){var n=Ye(e,3),r=(n[0],n[1]),a=(n[2],Ky(r));return i(a.popLast())}))}))}},{key:"ti",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,r){var i=ux(r),a=sx(t.serializer,i);return n.put(a)}))}},{key:"ei",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.X((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new fy(sy.fromString(i.document.name).popFirst(5)):i.noDocument?fy.fromSegments(i.noDocument.path):i.unknownDocument?fy.fromSegments(i.unknownDocument.path):jm()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Ey.waitFor(r)}))}},{key:"ni",value:function(e,t){var n=this,r=t.store("mutations"),i=m_(this.serializer),a=new O_(L_.js,this.serializer.le);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:pb();ox(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Ey.forEach(r,(function(e,r){var o=new Dm(r),u=mx.fe(n.serializer,o),s=a.getIndexManager(o),c=Xx.fe(o,n.serializer,s,a.referenceDelegate);return new I_(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new pg(t,Fy.ct),e).next()}))}))}}]),e}();function F_(e){e.createObjectStore("targetDocuments",{keyPath:Zy}).createIndex("documentTargetsIndex",eg,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Jy,{unique:!0}),e.createObjectStore("targetGlobal")}var U_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",V_=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(Ne(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.si=a,this.window=o,this.document=u,this.ii=c,this.ri=l,this.oi=f,this.Os=null,this.$s=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.ai=null,this.hi=Number.NEGATIVE_INFINITY,this.li=function(e){return Promise.resolve()},!e.D())throw new Km(qm.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new h_(this,i),this.fi=n+"main",this.serializer=new tx(s),this.di=new Ty(this.fi,this.oi,new M_(this.serializer)),this.Fs=new r_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=m_(this.serializer),this.Ls=new dx,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===l&&Fm("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return De(e,[{key:"start",value:function(){var e=this;return this.wi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Km(qm.FAILED_PRECONDITION,U_);return e.mi(),e.gi(),e.yi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Fs.getHighestSequenceNumber(t)}))})).then((function(t){e.Os=new Fy(t,e.ii)})).then((function(){e.$s=!0})).catch((function(t){return e.di&&e.di.close(),Promise.reject(t)}))}},{key:"pi",value:function(e){var t=this;return this.li=function(){var n=Ae(_e().mark((function n(r){return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.di.B(function(){var t=Ae(_e().mark((function t(n){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget(Ae(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.wi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"wi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return z_(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ii(t).next((function(t){t||(e.isPrimary=!1,e.si.enqueueRetryable((function(){return e.li(!1)})))}))})).next((function(){return e.Ti(t)})).next((function(n){return e.isPrimary&&!n?e.Ei(t).next((function(){return!1})):!!n&&e.Ai(t).next((function(){return!0}))}))})).catch((function(t){if(Ny(t))return Mm("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Mm("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.si.enqueueRetryable((function(){return e.li(t)})),e.isPrimary=t}))}},{key:"Ii",value:function(e){var t=this;return j_(e).get("owner").next((function(e){return Ey.resolve(t.Ri(e))}))}},{key:"vi",value:function(e){return z_(e).delete(this.clientId)}},{key:"Pi",value:function(){var e=Ae(_e().mark((function e(){var t,n,r,i,a=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.bi(this.hi,18e5)){e.next=6;break}return this.hi=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=vg(e,"clientMetadata");return t.j().next((function(e){var n=a.Vi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Ey.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._i){n=vn(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._i.removeItem(this.Si(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"yi",value:function(){var e=this;this.ai=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.wi().then((function(){return e.Pi()})).then((function(){return e.yi()}))}))}},{key:"Ri",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Ti",value:function(e){var t=this;return this.ri?Ey.resolve(!0):j_(e).get("owner").next((function(n){if(null!==n&&t.bi(n.leaseTimestampMs,5e3)&&!t.Di(n.ownerId)){if(t.Ri(n)&&t.networkEnabled)return!0;if(!t.Ri(n)){if(!n.allowTabSynchronization)throw new Km(qm.FAILED_PRECONDITION,U_);return!1}}return!(!t.networkEnabled||!t.inForeground)||z_(e).j().next((function(e){return void 0===t.Vi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Mm("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Ae(_e().mark((function e(){var t=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$s=!1,this.Ci(),this.ai&&(this.ai.cancel(),this.ai=null),this.xi(),this.Ni(),e.next=7,this.di.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new pg(e,Fy.ct);return t.Ei(n).next((function(){return t.vi(n)}))}));case 7:this.di.close(),this.ki();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vi",value:function(e,t){var n=this;return e.filter((function(e){return n.bi(e.updateTimeMs,t)&&!n.Di(e.clientId)}))}},{key:"Mi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return z_(t).j().next((function(t){return e.Vi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.$s}},{key:"getMutationQueue",value:function(e,t){return Xx.fe(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Fs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new zx(e,this.serializer.le.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return mx.fe(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.Ls}},{key:"runTransaction",value:function(e,t,n){var r=this;Mm("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.oi)?dg:14===i?hg:13===i?fg:12===i?lg:11===i?cg:void jm();return this.di.runTransaction(e,o,u,(function(i){return a=new pg(i,r.Os?r.Os.next():Fy.ct),"readwrite-primary"===t?r.Ii(a).next((function(e){return!!e||r.Ti(a)})).next((function(t){if(!t)throw Fm("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.si.enqueueRetryable((function(){return r.li(!1)})),new Km(qm.FAILED_PRECONDITION,wy);return n(a)})).next((function(e){return r.Ai(a).next((function(){return e}))})):r.Oi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Oi",value:function(e){var t=this;return j_(e).get("owner").next((function(e){if(null!==e&&t.bi(e.leaseTimestampMs,5e3)&&!t.Di(e.ownerId)&&!t.Ri(e)&&!(t.ri||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Km(qm.FAILED_PRECONDITION,U_)}))}},{key:"Ai",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return j_(e).put("owner",t)}},{key:"Ei",value:function(e){var t=this,n=j_(e);return n.get("owner").next((function(e){return t.Ri(e)?(Mm("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Ey.resolve()}))}},{key:"bi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Fm("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"mi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=function(){e.si.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.wi()}))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}},{key:"xi",value:function(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}},{key:"gi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=function(){t.Ci();var e=/(?:Version|Mobile)\/1[456]/;!Pn()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.si.enterRestrictedMode(!0),t.si.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ui))}},{key:"Ni",value:function(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}},{key:"Di",value:function(e){var t;try{var n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Si(e)));return Mm("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Fm("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ci",value:function(){if(this._i)try{this._i.setItem(this.Si(this.clientId),String(Date.now()))}catch(e){Fm("Failed to set zombie client id.",e)}}},{key:"ki",value:function(){if(this._i)try{this._i.removeItem(this.Si(this.clientId))}catch(e){}}},{key:"Si",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return Ty.D()}}]),e}();function j_(e){return vg(e,"owner")}function z_(e){return vg(e,"clientMetadata")}function B_(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var q_=function(){function e(t,n,r,i){Ne(this,e),this.targetId=t,this.fromCache=n,this.$i=r,this.Fi=i}return De(e,null,[{key:"Bi",value:function(t,n){var r,i=pb(),a=pb(),o=vn(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),K_=function(){function e(){Ne(this,e),this.Li=!1}return De(e,[{key:"initialize",value:function(e,t){this.qi=e,this.indexManager=t,this.Li=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ui(e,t).next((function(a){return a||i.Ki(e,t,r,n)})).next((function(n){return n||i.Gi(e,t)}))}},{key:"Ui",value:function(e,t){var n=this;if(Bk(t))return Ey.resolve(null);var r=Wk(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=$k(t,null,"F"),r=Wk(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=pb.apply(void 0,Je(i));return n.qi.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Qi(t,i);return n.ji(t,o,a,r.readTime)?n.Ui(e,$k(t,null,"F")):n.zi(e,o,t,r)}))}))})))}))}},{key:"Ki",value:function(e,t,n,r){var i=this;return Bk(t)||r.isEqual(oy.min())?this.Gi(e,t):this.qi.getDocuments(e,n).next((function(a){var o=i.Qi(t,a);return i.ji(t,o,n,r)?i.Gi(e,t):(Lm()<=tr.DEBUG&&Mm("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Jk(t)),i.zi(e,o,t,yy(r,-1)))}))}},{key:"Qi",value:function(e,t){var n=new xg(tb(e));return t.forEach((function(t,r){Zk(e,r)&&(n=n.add(r))})),n}},{key:"ji",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Gi",value:function(e,t){return Lm()<=tr.DEBUG&&Mm("QueryEngine","Using full collection scan to execute query:",Jk(t)),this.qi.getDocumentsMatchingQuery(e,t,ky.min())}},{key:"zi",value:function(e,t,n,r){return this.qi.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),G_=function(){function e(t,n,r,i){Ne(this,e),this.persistence=t,this.Wi=n,this.serializer=i,this.Hi=new kg(ny),this.Ji=new rb((function(e){return Ok(e)}),Rk),this.Yi=new Map,this.Xi=t.getRemoteDocumentCache(),this.Fs=t.getTargetCache(),this.Ls=t.getBundleCache(),this.Zi(r)}return De(e,[{key:"Zi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new I_(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Wi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Hi)}))}}]),e}();function H_(e,t,n,r){return new G_(e,t,n,r)}function W_(e,t){return Q_.apply(this,arguments)}function Q_(){return Q_=Ae(_e().mark((function e(t,n){var r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bm(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Zi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=pb(),s=vn(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=vn(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=vn(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=vn(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{tr:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Q_.apply(this,arguments)}function $_(e,t){var n=Bm(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Xi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Ey.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);zm(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=pb(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Y_(e){var t=Bm(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Fs.getLastRemoteSnapshotVersion(e)}))}function X_(e,t){var n=Bm(e),r=t.snapshotVersion,i=n.Hi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Xi.newChangeBuffer({trackRemovals:!0});i=n.Hi;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Fs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Fs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(Tg.EMPTY_BYTE_STRING,oy.min()).withLastLimboFreeSnapshotVersion(oy.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Fs.updateTargetData(e,c))}}));var u=ab(),s=pb();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(J_(e,a,t.documentUpdates).next((function(e){u=e.er,s=e.nr}))),!r.isEqual(oy.min())){var c=n.Fs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Fs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Ey.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Hi=i,e}))}function J_(e,t,n){var r=pb(),i=pb();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=ab();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(oy.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Mm("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{er:r,nr:i}}))}function Z_(e,t){var n=Bm(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function eI(e,t){var n=Bm(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Fs.getTargetData(e,t).next((function(i){return i?(r=i,Ey.resolve(r)):n.Fs.allocateTargetId(e).next((function(i){return r=new ex(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Fs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Hi.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Hi=n.Hi.insert(e.targetId,e),n.Ji.set(t,e.targetId)),e}))}function tI(e,t,n){return nI.apply(this,arguments)}function nI(){return nI=Ae(_e().mark((function e(t,n,r){var i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Bm(t),a=i.Hi.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Ny(e.t1)){e.next=12;break}throw e.t1;case 12:Mm("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Hi=i.Hi.remove(n),i.Ji.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),nI.apply(this,arguments)}function rI(e,t,n){var r=Bm(e),i=oy.min(),a=pb();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Bm(e),i=r.Ji.get(n);return void 0!==i?Ey.resolve(r.Hi.get(i)):r.Fs.getTargetData(t,n)}(r,e,Wk(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Fs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Wi.getDocumentsMatchingQuery(e,t,n?i:oy.min(),n?a:pb())})).next((function(e){return oI(r,eb(t),e),{documents:e,sr:a}}))}))}function iI(e,t){var n=Bm(e),r=Bm(n.Fs),i=n.Hi.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.he(e,t).next((function(e){return e?e.target:null}))}))}function aI(e,t){var n=Bm(e),r=n.Yi.get(t)||oy.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Xi.getAllFromCollectionGroup(e,t,yy(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return oI(n,t,e),e}))}function oI(e,t,n){var r=e.Yi.get(t)||oy.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Yi.set(t,r)}function uI(e,t,n,r){return sI.apply(this,arguments)}function sI(){return sI=Ae(_e().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Bm(t),o=pb(),u=ab(),s=vn(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.ir(l.metadata.name),l.document&&(o=o.add(f)),(h=n.rr(l)).setReadTime(n.ur(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Xi.newChangeBuffer({trackRemovals:!0}),e.next=7,eI(a,function(e){return Wk(zk(sy.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return J_(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Fs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Fs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.er,t.nr)})).next((function(){return t.er}))}))})));case 9:case"end":return e.stop()}}),e)}))),sI.apply(this,arguments)}function cI(e,t){return lI.apply(this,arguments)}function lI(){return lI=Ae(_e().mark((function e(t,n){var r,i,a,o=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:pb(),e.next=3,eI(t,Wk(cx(n.bundledQuery)));case 3:return i=e.sent,a=Bm(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Cw(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ls.saveNamedQuery(e,n);var o=i.withResumeToken(Tg.EMPTY_BYTE_STRING,t);return a.Hi=a.Hi.insert(o.targetId,o),a.Fs.updateTargetData(e,o).next((function(){return a.Fs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Fs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ls.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),lI.apply(this,arguments)}function fI(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function hI(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function dI(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var pI=function(){function e(t,n,r,i){Ne(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return De(e,[{key:"ar",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"cr",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Km(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Fm("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),vI=function(){function e(t,n,r){Ne(this,e),this.targetId=t,this.state=n,this.error=r}return De(e,[{key:"ar",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"cr",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Km(i.error.code,i.error.message))),a?new e(t,i.state,r):(Fm("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),mI=function(){function e(t,n){Ne(this,e),this.clientId=t,this.activeTargetIds=n}return De(e,null,[{key:"cr",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=mb(),o=0;i&&o<r.activeTargetIds.length;++o)i=jy(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Fm("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),yI=function(){function e(t,n){Ne(this,e),this.clientId=t,this.onlineState=n}return De(e,null,[{key:"cr",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Fm("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),gI=function(){function e(){Ne(this,e),this.activeTargetIds=mb()}return De(e,[{key:"hr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"lr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"ar",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),kI=function(){function e(t,n,r,i,a){Ne(this,e),this.window=t,this.si=n,this.persistenceKey=r,this.dr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.wr.bind(this),this.mr=new kg(ny),this.started=!1,this.gr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.yr=fI(this.persistenceKey,this.dr),this.pr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.mr=this.mr.insert(this.dr,new gI),this.Ir=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Tr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Er=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Ar=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}return De(e,[{key:"start",value:function(){var e=Ae(_e().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Mi();case 2:t=e.sent,n=vn(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.dr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(fI(this.persistenceKey,i)))&&(o=mI.cr(i,a))&&(this.mr=this.mr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.vr(),(u=this.storage.getItem(this.Ar))&&(s=this.Pr(u))&&this.br(s),c=vn(this.gr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.wr(f)}catch(d){c.e(d)}finally{c.f()}this.gr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.pr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Vr(this.mr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.mr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Sr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Sr(e,t,n),this.Dr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(dI(this.persistenceKey,e));if(n){var r=vI.cr(e,n);r&&(t=r.state)}}return this.Cr.hr(e),this.vr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Cr.lr(e),this.vr()}},{key:"isLocalQueryTarget",value:function(e){return this.Cr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(dI(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Nr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Dr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.kr(e)}},{key:"notifyBundleLoaded",value:function(e){this.Mr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.yr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Mm("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Mm("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Mm("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"wr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Mm("SharedClientState","EVENT",n.key,n.newValue),n.key===this.yr)return void Fm("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable(Ae(_e().mark((function e(){var r,i,a,o,u,s,c;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Ir.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Or(n.key),e.abrupt("return",t.$r(r,null));case 6:if(!(i=t.Fr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.$r(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Tr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Br(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Lr(a));case 16:e.next=41;break;case 18:if(!t.Er.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.qr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Ur(o));case 23:e.next=41;break;case 25:if(n.key!==t.Ar){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.Pr(n.newValue))){e.next=30;break}return e.abrupt("return",t.br(u));case 30:e.next=41;break;case 32:if(n.key!==t.pr){e.next=37;break}s=function(e){var t=Fy.ct;if(null!=e)try{var n=JSON.parse(e);zm("number"==typeof n),t=n}catch(e){Fm("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Fy.ct&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.Rr){e.next=41;break}return c=t.Kr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Gr(e)})));case 41:e.next=44;break;case 43:t.gr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Cr",get:function(){return this.mr.get(this.dr)}},{key:"vr",value:function(){this.setItem(this.yr,this.Cr.ar())}},{key:"Sr",value:function(e,t,n){var r=new pI(this.currentUser,e,t,n),i=hI(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ar())}},{key:"Dr",value:function(e){var t=hI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"kr",value:function(e){var t={clientId:this.dr,onlineState:e};this.storage.setItem(this.Ar,JSON.stringify(t))}},{key:"Nr",value:function(e,t,n){var r=dI(this.persistenceKey,e),i=new vI(e,t,n);this.setItem(r,i.ar())}},{key:"Mr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}},{key:"Or",value:function(e){var t=this.Ir.exec(e);return t?t[1]:null}},{key:"Fr",value:function(e,t){var n=this.Or(e);return mI.cr(n,t)}},{key:"Br",value:function(e,t){var n=this.Tr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return pI.cr(new Dm(i),r,t)}},{key:"qr",value:function(e,t){var n=this.Er.exec(e),r=Number(n[1]);return vI.cr(r,t)}},{key:"Pr",value:function(e){return yI.cr(e)}},{key:"Kr",value:function(e){return JSON.parse(e)}},{key:"Lr",value:function(){var e=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Qr(t.batchId,t.state,t.error));case 2:Mm("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ur",value:function(e){return this.syncEngine.jr(e.targetId,e.state,e.error)}},{key:"$r",value:function(e,t){var n=this,r=t?this.mr.insert(e,t):this.mr.remove(e),i=this.Vr(this.mr),a=this.Vr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.zr(o,u).then((function(){n.mr=r}))}},{key:"br",value:function(e){this.mr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Vr",value:function(e){var t=mb();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),bI=function(){function e(){Ne(this,e),this.Wr=new gI,this.Hr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return De(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Wr.hr(e),this.Hr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Hr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Wr.lr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Wr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Hr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Wr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Wr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Wr=new gI,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),wI=function(){function e(){Ne(this,e)}return De(e,[{key:"Jr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),xI=function(){function e(){var t=this;Ne(this,e),this.Yr=function(){return t.Xr()},this.Zr=function(){return t.eo()},this.no=[],this.so()}return De(e,[{key:"Jr",value:function(e){this.no.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Yr),window.removeEventListener("offline",this.Zr)}},{key:"so",value:function(){window.addEventListener("online",this.Yr),window.addEventListener("offline",this.Zr)}},{key:"Xr",value:function(){Mm("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=vn(this.no);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"eo",value:function(){Mm("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=vn(this.no);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),_I=null;function II(){return null===_I?_I=268435456+Math.round(2147483648*Math.random()):_I++,"0x"+_I.toString(16)}var EI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},SI=function(){function e(t){Ne(this,e),this.io=t.io,this.ro=t.ro}return De(e,[{key:"oo",value:function(e){this.uo=e}},{key:"co",value:function(e){this.ao=e}},{key:"onMessage",value:function(e){this.ho=e}},{key:"close",value:function(){this.ro()}},{key:"send",value:function(e){this.io(e)}},{key:"lo",value:function(){this.uo()}},{key:"fo",value:function(e){this.ao(e)}},{key:"_o",value:function(e){this.ho(e)}}]),e}(),TI="WebChannelConnection",CI=function(e){Oe(n,e);var t=Ue(n);function n(e){var r;return Ne(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return De(n,[{key:"Eo",value:function(e,t,n,r){var i=II();return new Promise((function(a,o){var u=new Cm;u.setWithCredentials(!0),u.listenOnce(_m.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case xm.NO_ERROR:var t=u.getResponseJson();Mm(TI,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case xm.TIMEOUT:Mm(TI,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Km(qm.DEADLINE_EXCEEDED,"Request time out"));break;case xm.HTTP_ERROR:var n=u.getStatus();if(Mm(TI,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(qm).indexOf(t)>=0?t:qm.UNKNOWN}(s.status);o(new Km(c,s.message))}else o(new Km(qm.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new Km(qm.UNAVAILABLE,"Connection failed."));break;default:jm()}}finally{Mm(TI,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);Mm(TI,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"Ro",value:function(e,t,n){var r=II(),i=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=bm(),o=wm(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new Sm({})),this.To(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var s=i.join("");Mm(TI,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(s),u);var c=a.createWebChannel(s,u),l=!1,f=!1,h=new SI({io:function(t){f?Mm(TI,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(l||(Mm(TI,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),l=!0),Mm(TI,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},ro:function(){return c.close()}}),d=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return d(c,Tm.EventType.OPEN,(function(){f||Mm(TI,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),d(c,Tm.EventType.CLOSE,(function(){f||(f=!0,Mm(TI,"RPC '".concat(e,"' stream ").concat(r," transport closed")),h.fo())})),d(c,Tm.EventType.ERROR,(function(t){f||(f=!0,Um(TI,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),h.fo(new Km(qm.UNAVAILABLE,"The operation could not be completed")))})),d(c,Tm.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];zm(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Mm(TI,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=Wb[e];if(void 0!==t)return nw(t)}(u),l=o.message;void 0===s&&(s=qm.INTERNAL,l="Unknown error status: "+u+" with message "+o.message),f=!0,h.fo(new Km(s,l)),c.close()}else Mm(TI,"RPC '".concat(e,"' stream ").concat(r," received:"),i),h._o(i)}})),d(o,Im.STAT_EVENT,(function(t){t.stat===Em.PROXY?Mm(TI,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Em.NOPROXY&&Mm(TI,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){h.lo()}),0),h}}]),n}(function(){function e(t){Ne(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.wo=n+"://"+t.host,this.mo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return De(e,[{key:"yo",get:function(){return!1}},{key:"po",value:function(e,t,n,r,i){var a=II(),o=this.Io(e,t);Mm("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this.To(u,r,i),this.Eo(e,o,u,n).then((function(t){return Mm("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Um("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"Ao",value:function(e,t,n,r,i,a){return this.po(e,t,n,r,i)}},{key:"To",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Om,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"Io",value:function(e,t){var n=EI[e];return"".concat(this.wo,"/v1/").concat(t,":").concat(n)}}]),e}());function AI(){return"undefined"!=typeof window?window:null}function NI(){return"undefined"!=typeof document?document:null}function PI(e){return new _w(e,!0)}var DI=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Ne(this,e),this.si=t,this.timerId=n,this.vo=r,this.Po=i,this.bo=a,this.Vo=0,this.So=null,this.Do=Date.now(),this.reset()}return De(e,[{key:"reset",value:function(){this.Vo=0}},{key:"Co",value:function(){this.Vo=this.bo}},{key:"xo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Vo+this.No()),r=Math.max(0,Date.now()-this.Do),i=Math.max(0,n-r);i>0&&Mm("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Vo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.So=this.si.enqueueAfterDelay(this.timerId,i,(function(){return t.Do=Date.now(),e()})),this.Vo*=this.Po,this.Vo<this.vo&&(this.Vo=this.vo),this.Vo>this.bo&&(this.Vo=this.bo)}},{key:"ko",value:function(){null!==this.So&&(this.So.skipDelay(),this.So=null)}},{key:"cancel",value:function(){null!==this.So&&(this.So.cancel(),this.So=null)}},{key:"No",value:function(){return(Math.random()-.5)*this.Vo}}]),e}(),OI=function(){function e(t,n,r,i,a,o,u,s){Ne(this,e),this.si=t,this.Mo=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.$o=0,this.Fo=null,this.Bo=null,this.stream=null,this.Lo=new DI(t,n)}return De(e,[{key:"qo",value:function(){return 1===this.state||5===this.state||this.Uo()}},{key:"Uo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Ko()}},{key:"stop",value:function(){var e=Ae(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.qo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Go",value:function(){this.state=0,this.Lo.reset()}},{key:"Qo",value:function(){var e=this;this.Uo()&&null===this.Fo&&(this.Fo=this.si.enqueueAfterDelay(this.Mo,6e4,(function(){return e.jo()})))}},{key:"zo",value:function(e){this.Wo(),this.stream.send(e)}},{key:"jo",value:function(){var e=Ae(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Uo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Wo",value:function(){this.Fo&&(this.Fo.cancel(),this.Fo=null)}},{key:"Ho",value:function(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"close",value:function(){var e=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Wo(),this.Ho(),this.Lo.cancel(),this.$o++,4!==t?this.Lo.reset():n&&n.code===qm.RESOURCE_EXHAUSTED?(Fm(n.toString()),Fm("Using maximum backoff delay to prevent overloading the backend."),this.Lo.Co()):n&&n.code===qm.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Jo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.co(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Jo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Yo(this.$o),n=this.$o;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=Ye(t,2),i=r[0],a=r[1];e.$o===n&&e.Xo(i,a)}),(function(n){t((function(){var t=new Km(qm.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Zo(t)}))}))}},{key:"Xo",value:function(e,t){var n=this,r=this.Yo(this.$o);this.stream=this.tu(e,t),this.stream.oo((function(){r((function(){return n.state=2,n.Bo=n.si.enqueueAfterDelay(n.Oo,1e4,(function(){return n.Uo()&&(n.state=3),Promise.resolve()})),n.listener.oo()}))})),this.stream.co((function(e){r((function(){return n.Zo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Ko",value:function(){var e=this;this.state=5,this.Lo.xo(Ae(_e().mark((function t(){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Zo",value:function(e){return Mm("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Yo",value:function(e){var t=this;return function(n){t.si.enqueueAndForget((function(){return t.$o===e?n():(Mm("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),RI=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i,a,o,u){var s;return Ne(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return De(n,[{key:"tu",value:function(e,t){return this.connection.Ro("Listen",e,t)}},{key:"onMessage",value:function(e){this.Lo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:jm()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(zm(void 0===t||"string"==typeof t),Tg.fromBase64String(t||"")):(zm(void 0===t||t instanceof Uint8Array),Tg.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?qm.UNKNOWN:nw(e.code);return new Km(t,e.message||"")}(o);n=new vw(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Dw(e,s.document.name),l=Cw(s.document.updateTime),f=s.document.createTime?Cw(s.document.createTime):oy.min(),h=new ik({mapValue:{fields:s.document.fields}}),d=ok.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new dw(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=Dw(e,m.document),g=m.readTime?Cw(m.readTime):oy.min(),k=ok.newNoDocument(y,g),b=m.removedTargetIds||[];n=new dw([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var x=Dw(e,w.document),_=w.removedTargetIds||[];n=new dw([],_,x,null)}else{if(!("filter"in t))return jm();t.filter;var I=t.filter;I.targetId;var E=I.count,S=void 0===E?0:E,T=I.unchangedNames,C=new ew(S,T),A=I.targetId;n=new pw(A,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return oy.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?oy.min():t.readTime?Cw(t.readTime):oy.min()}(e);return this.listener.eu(t,n)}},{key:"nu",value:function(e){var t={};t.database=Lw(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=Lk(r)?{documents:Bw(e,r)}:{query:qw(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Sw(e,t.resumeToken);var i=Iw(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(oy.min())>0){n.readTime=Ew(e,t.snapshotVersion.toTimestamp());var a=Iw(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return jm()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.zo(t)}},{key:"su",value:function(e){var t={};t.database=Lw(this.serializer),t.removeTarget=e,this.zo(t)}}]),n}(OI),LI=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i,a,o,u){var s;return Ne(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.iu=!1,s}return De(n,[{key:"ru",get:function(){return this.iu}},{key:"start",value:function(){this.iu=!1,this.lastStreamToken=void 0,xi(Re(n.prototype),"start",this).call(this)}},{key:"Jo",value:function(){this.iu&&this.ou([])}},{key:"tu",value:function(e,t){return this.connection.Ro("Write",e,t)}},{key:"onMessage",value:function(e){if(zm(!!e.streamToken),this.lastStreamToken=e.streamToken,this.iu){this.Lo.reset();var t=function(e,t){return e&&e.length>0?(zm(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Cw(e.updateTime):Cw(t);return n.isEqual(oy.min())&&(n=Cw(t)),new Ob(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Cw(e.commitTime);return this.listener.uu(n,t)}return zm(!e.writeResults||0===e.writeResults.length),this.iu=!0,this.listener.cu()}},{key:"au",value:function(){var e={};e.database=Lw(this.serializer),this.zo(e)}},{key:"ou",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return jw(t.serializer,e)}))};this.zo(n)}}]),n}(OI),MI=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i,a){var o;return Ne(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.hu=!1,o}return De(n,[{key:"lu",value:function(){if(this.hu)throw new Km(qm.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"po",value:function(e,t,n){var r=this;return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=Ye(i,2),o=a[0],u=a[1];return r.connection.po(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===qm.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Km(qm.UNKNOWN,e.toString())}))}},{key:"Ao",value:function(e,t,n,r){var i=this;return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=Ye(a,2),u=o[0],s=o[1];return i.connection.Ao(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===qm.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Km(qm.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.hu=!0}}]),n}(function(){return De((function e(){Ne(this,e)}))}());var FI=function(){function e(t,n){Ne(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.du=0,this._u=null,this.wu=!0}return De(e,[{key:"mu",value:function(){var e=this;0===this.du&&(this.gu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e._u=null,e.yu("Backend didn't respond within 10 seconds."),e.gu("Offline"),Promise.resolve()})))}},{key:"pu",value:function(e){"Online"===this.state?this.gu("Unknown"):(this.du++,this.du>=1&&(this.Iu(),this.yu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.gu("Offline")))}},{key:"set",value:function(e){this.Iu(),this.du=0,"Online"===e&&(this.wu=!1),this.gu(e)}},{key:"gu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"yu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.wu?(Fm(t),this.wu=!1):Mm("OnlineStateTracker",t)}},{key:"Iu",value:function(){null!==this._u&&(this._u.cancel(),this._u=null)}}]),e}(),UI=De((function e(t,n,r,i,a){var o=this;Ne(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Tu=[],this.Eu=new Map,this.Au=new Set,this.Ru=[],this.vu=a,this.vu.Jr((function(e){r.enqueueAndForget(Ae(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=$I(o),!e.t0){e.next=5;break}return Mm("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Ae(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Bm(t)).Au.add(4),e.next=4,zI(n);case 4:return n.Pu.set("Unknown"),n.Au.delete(4),e.next=8,VI(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.Pu=new FI(r,i)}));function VI(e){return jI.apply(this,arguments)}function jI(){return(jI=Ae(_e().mark((function e(t){var n,r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!$I(t)){e.next=18;break}n=vn(t.Ru),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function zI(e){return BI.apply(this,arguments)}function BI(){return(BI=Ae(_e().mark((function e(t){var n,r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=vn(t.Ru),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function qI(e,t){var n=Bm(e);n.Eu.has(t.targetId)||(n.Eu.set(t.targetId,t),QI(n)?WI(n):IE(n).Uo()&&GI(n,t))}function KI(e,t){var n=Bm(e),r=IE(n);n.Eu.delete(t),r.Uo()&&HI(n,t),0===n.Eu.size&&(r.Uo()?r.Qo():$I(n)&&n.Pu.set("Unknown"))}function GI(e,t){if(e.bu.Lt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(oy.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}IE(e).nu(t)}function HI(e,t){e.bu.Lt(t),IE(e).su(t)}function WI(e){e.bu=new yw({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},he:function(t){return e.Eu.get(t)||null},oe:function(){return e.datastore.serializer.databaseId}}),IE(e).start(),e.Pu.mu()}function QI(e){return $I(e)&&!IE(e).qo()&&e.Eu.size>0}function $I(e){return 0===Bm(e).Au.size}function YI(e){e.bu=void 0}function XI(e){return JI.apply(this,arguments)}function JI(){return(JI=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Eu.forEach((function(e,n){GI(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ZI(e,t){return eE.apply(this,arguments)}function eE(){return(eE=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:YI(t),QI(t)?(t.Pu.pu(n),WI(t)):t.Pu.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tE(e,t,n){return nE.apply(this,arguments)}function nE(){return nE=Ae(_e().mark((function e(t,n,r){var i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Pu.set("Online"),!(n instanceof vw&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Ae(_e().mark((function e(t,n){var r,i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=vn(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Eu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Eu.delete(o),t.bu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Mm("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,rE(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof dw?t.bu.Wt(n):n instanceof pw?t.bu.ee(n):t.bu.Yt(n),r.isEqual(oy.min())){e.next=29;break}return e.prev=14,e.next=17,Y_(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.bu.ue(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Eu.get(r);i&&e.Eu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.Eu.get(t);if(r){e.Eu.set(t,r.withResumeToken(Tg.EMPTY_BYTE_STRING,r.snapshotVersion)),HI(e,t);var i=new ex(r.target,t,n,r.sequenceNumber);GI(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Mm("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,rE(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),nE.apply(this,arguments)}function rE(e,t,n){return iE.apply(this,arguments)}function iE(){return(iE=Ae(_e().mark((function e(t,n,r){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ny(n)){e.next=2;break}throw n;case 2:return t.Au.add(1),e.next=5,zI(t);case 5:t.Pu.set("Offline"),r||(r=function(){return Y_(t.localStore)}),t.asyncQueue.enqueueRetryable(Ae(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mm("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.Au.delete(1),e.next=6,VI(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aE(e,t){return t().catch((function(n){return rE(e,n,t)}))}function oE(e){return uE.apply(this,arguments)}function uE(){return(uE=Ae(_e().mark((function e(t){var n,r,i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Bm(t),r=EE(n),i=n.Tu.length>0?n.Tu[n.Tu.length-1].batchId:-1;case 2:if(!sE(n)){e.next=19;break}return e.prev=3,e.next=6,Z_(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Tu.length&&r.Qo(),e.abrupt("break",19);case 10:i=a.batchId,cE(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,rE(n,e.t0);case 17:e.next=2;break;case 19:lE(n)&&fE(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function sE(e){return $I(e)&&e.Tu.length<10}function cE(e,t){e.Tu.push(t);var n=EE(e);n.Uo()&&n.ru&&n.ou(t.mutations)}function lE(e){return $I(e)&&!EE(e).qo()&&e.Tu.length>0}function fE(e){EE(e).start()}function hE(e){return dE.apply(this,arguments)}function dE(){return(dE=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:EE(t).au();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pE(e){return vE.apply(this,arguments)}function vE(){return(vE=Ae(_e().mark((function e(t){var n,r,i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=EE(t),r=vn(t.Tu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.ou(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mE(e,t,n){return yE.apply(this,arguments)}function yE(){return(yE=Ae(_e().mark((function e(t,n,r){var i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Tu.shift(),a=Jb.from(i,n,r),e.next=3,aE(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,oE(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gE(e,t){return kE.apply(this,arguments)}function kE(){return kE=Ae(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&EE(t).ru,!e.t0){e.next=4;break}return e.next=4,function(){var e=Ae(_e().mark((function e(t,n){var r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!tw(i=n.code)||i===qm.ABORTED){e.next=7;break}return r=t.Tu.shift(),EE(t).Go(),e.next=5,aE(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,oE(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:lE(t)&&fE(t);case 5:case"end":return e.stop()}}),e)}))),kE.apply(this,arguments)}function bE(e,t){return wE.apply(this,arguments)}function wE(){return(wE=Ae(_e().mark((function e(t,n){var r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Bm(t)).asyncQueue.verifyOperationInProgress(),Mm("RemoteStore","RemoteStore received new credentials"),i=$I(r),r.Au.add(3),e.next=6,zI(r);case 6:return i&&r.Pu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.Au.delete(3),e.next=12,VI(r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xE(e,t){return _E.apply(this,arguments)}function _E(){return(_E=Ae(_e().mark((function e(t,n){var r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Bm(t),!n){e.next=7;break}return r.Au.delete(2),e.next=5,VI(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.Au.add(2),e.next=12,zI(r);case 12:r.Pu.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function IE(e){return e.Vu||(e.Vu=function(e,t,n){var r=Bm(e);return r.lu(),new RI(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{oo:XI.bind(null,e),co:ZI.bind(null,e),eu:tE.bind(null,e)}),e.Ru.push(function(){var t=Ae(_e().mark((function t(n){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Vu.Go(),QI(e)?WI(e):e.Pu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Vu.stop();case 6:YI(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Vu}function EE(e){return e.Su||(e.Su=function(e,t,n){var r=Bm(e);return r.lu(),new LI(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{oo:hE.bind(null,e),co:gE.bind(null,e),cu:pE.bind(null,e),uu:mE.bind(null,e)}),e.Ru.push(function(){var t=Ae(_e().mark((function t(n){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Su.Go(),t.next=4,oE(e);case 4:t.next=9;break;case 6:return t.next=8,e.Su.stop();case 8:e.Tu.length>0&&(Mm("RemoteStore","Stopping write stream with ".concat(e.Tu.length," pending writes")),e.Tu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Su}var SE=function(){function e(t,n,r,i,a){Ne(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Gm,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return De(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Km(qm.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function TE(e,t){if(Fm("AsyncQueue","".concat(t,": ").concat(e)),Ny(e))return new Km(qm.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var CE=function(){function e(t){Ne(this,e),this.comparator=t?function(e,n){return t(e,n)||fy.comparator(e.key,n.key)}:function(e,t){return fy.comparator(e.key,t.key)},this.keyedMap=ub(),this.sortedSet=new kg(this.comparator)}return De(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),AE=function(){function e(){Ne(this,e),this.Du=new kg(fy.comparator)}return De(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Du.get(t);n?0!==e.type&&3===n.type?this.Du=this.Du.insert(t,e):3===e.type&&1!==n.type?this.Du=this.Du.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Du=this.Du.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Du=this.Du.remove(t):1===e.type&&2===n.type?this.Du=this.Du.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):jm():this.Du=this.Du.insert(t,e)}},{key:"Cu",value:function(){var e=[];return this.Du.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),NE=function(){function e(t,n,r,i,a,o,u,s,c){Ne(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return De(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yk(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,CE.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),PE=De((function e(){Ne(this,e),this.xu=void 0,this.listeners=[]})),DE=De((function e(){Ne(this,e),this.queries=new rb((function(e){return Xk(e)}),Yk),this.onlineState="Unknown",this.Nu=new Set}));function OE(e,t){return RE.apply(this,arguments)}function RE(){return RE=Ae(_e().mark((function e(t,n){var r,i,a,o,u;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Bm(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new PE),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.xu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=TE(e.t0,"Initialization of query '".concat(Jk(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.ku(r.onlineState),o.xu&&n.Mu(o.xu)&&VE(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),RE.apply(this,arguments)}function LE(e,t){return ME.apply(this,arguments)}function ME(){return ME=Ae(_e().mark((function e(t,n){var r,i,a,o,u;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Bm(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),ME.apply(this,arguments)}function FE(e,t){var n,r=Bm(e),i=!1,a=vn(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=vn(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Mu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.xu=o}}}catch(f){a.e(f)}finally{a.f()}i&&VE(r)}function UE(e,t,n){var r=Bm(e),i=r.queries.get(t);if(i){var a,o=vn(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function VE(e){e.Nu.forEach((function(e){e.next()}))}var jE=function(){function e(t,n,r){Ne(this,e),this.query=t,this.Ou=n,this.$u=!1,this.Fu=null,this.onlineState="Unknown",this.options=r||{}}return De(e,[{key:"Mu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=vn(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new NE(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.$u?this.Bu(e)&&(this.Ou.next(e),a=!0):this.Lu(e,this.onlineState)&&(this.qu(e),a=!0),this.Fu=e,a}},{key:"onError",value:function(e){this.Ou.error(e)}},{key:"ku",value:function(e){this.onlineState=e;var t=!1;return this.Fu&&!this.$u&&this.Lu(this.Fu,e)&&(this.qu(this.Fu),t=!0),t}},{key:"Lu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Uu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Bu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Fu&&this.Fu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"qu",value:function(e){e=NE.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.$u=!0,this.Ou.next(e)}}]),e}(),zE=function(){function e(t,n){Ne(this,e),this.Ku=t,this.byteLength=n}return De(e,[{key:"Gu",value:function(){return"metadata"in this.Ku}}]),e}(),BE=function(){function e(t){Ne(this,e),this.serializer=t}return De(e,[{key:"ir",value:function(e){return Dw(this.serializer,e)}},{key:"rr",value:function(e){return e.metadata.exists?Uw(this.serializer,e.document,!1):ok.newNoDocument(this.ir(e.metadata.name),this.ur(e.metadata.readTime))}},{key:"ur",value:function(e){return Cw(e)}}]),e}(),qE=function(){function e(t,n,r){Ne(this,e),this.Qu=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=KE(t)}return De(e,[{key:"ju",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Ku.namedQuery)this.queries.push(e.Ku.namedQuery);else if(e.Ku.documentMetadata){this.documents.push({metadata:e.Ku.documentMetadata}),e.Ku.documentMetadata.exists||++t;var n=sy.fromString(e.Ku.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Ku.document&&(this.documents[this.documents.length-1].document=e.Ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"zu",value:function(e){var t,n=new Map,r=new BE(this.serializer),i=vn(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.ir(a.metadata.name),s=vn(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||pb()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Ae(_e().mark((function e(){var t,n,r,i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uI(this.localStore,new BE(this.serializer),this.documents,this.Qu.id);case 2:t=e.sent,n=this.zu(this.documents),r=vn(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,cI(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Wu:this.collectionGroups,Hu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function KE(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var GE=De((function e(t){Ne(this,e),this.key=t})),HE=De((function e(t){Ne(this,e),this.key=t})),WE=function(){function e(t,n){Ne(this,e),this.query=t,this.Ju=n,this.Yu=null,this.hasCachedResults=!1,this.current=!1,this.Xu=pb(),this.mutatedKeys=pb(),this.Zu=tb(t),this.tc=new CE(this.Zu)}return De(e,[{key:"ec",get:function(){return this.Ju}},{key:"nc",value:function(e,t){var n=this,r=t?t.sc:new AE,i=t?t.tc:this.tc,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Zk(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.ic(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Zu(f,s)>0||c&&n.Zu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{tc:o,sc:r,ji:u,mutatedKeys:a}}},{key:"ic",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.tc;this.tc=e.tc,this.mutatedKeys=e.mutatedKeys;var a=e.sc.Cu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return jm()}};return n(e)-n(t)}(e.type,t.type)||r.Zu(e.doc,t.doc)})),this.rc(n);var o=t?this.oc():[],u=0===this.Xu.size&&this.current?1:0,s=u!==this.Yu;return this.Yu=u,0!==a.length||s?{snapshot:new NE(this.query,e.tc,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),uc:o}:{uc:o}}},{key:"ku",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tc:this.tc,sc:new AE,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{uc:[]}}},{key:"cc",value:function(e){return!this.Ju.has(e)&&!!this.tc.has(e)&&!this.tc.get(e).hasLocalMutations}},{key:"rc",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Ju=t.Ju.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Ju=t.Ju.delete(e)})),this.current=e.current)}},{key:"oc",value:function(){var e=this;if(!this.current)return[];var t=this.Xu;this.Xu=pb(),this.tc.forEach((function(t){e.cc(t.key)&&(e.Xu=e.Xu.add(t.key))}));var n=[];return t.forEach((function(t){e.Xu.has(t)||n.push(new HE(t))})),this.Xu.forEach((function(e){t.has(e)||n.push(new GE(e))})),n}},{key:"ac",value:function(e){this.Ju=e.sr,this.Xu=pb();var t=this.nc(e.documents);return this.applyChanges(t,!0)}},{key:"hc",value:function(){return NE.fromInitialDocuments(this.query,this.tc,this.mutatedKeys,0===this.Yu,this.hasCachedResults)}}]),e}(),QE=De((function e(t,n,r){Ne(this,e),this.query=t,this.targetId=n,this.view=r})),$E=De((function e(t){Ne(this,e),this.key=t,this.lc=!1})),YE=function(){function e(t,n,r,i,a,o){Ne(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.fc={},this.dc=new rb((function(e){return Xk(e)}),Yk),this._c=new Map,this.wc=new Set,this.mc=new kg(fy.comparator),this.gc=new Map,this.yc=new T_,this.Ic={},this.Tc=new Map,this.Ec=n_.kn(),this.onlineState="Unknown",this.Ac=void 0}return De(e,[{key:"isPrimaryClient",get:function(){return!0===this.Ac}}]),e}();function XE(e,t){return JE.apply(this,arguments)}function JE(){return JE=Ae(_e().mark((function e(t,n){var r,i,a,o,u,s;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=KS(t),!(o=r.dc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.hc(),e.next=15;break;case 6:return e.next=8,eI(r.localStore,Wk(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,ZE(r,n,i,"current"===s,u.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&qI(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),JE.apply(this,arguments)}function ZE(e,t,n,r,i){return eS.apply(this,arguments)}function eS(){return eS=Ae(_e().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Rc=function(e,n,r){return function(){var e=Ae(_e().mark((function e(t,n,r,i){var a,o,u;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.nc(r),e.t0=a.ji,!e.t0){e.next=6;break}return e.next=5,rI(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.nc(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(bS(t,n.targetId,u.uc),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,rI(t.localStore,n,!0);case 3:return o=e.sent,u=new WE(n,o.sr),s=u.nc(o.documents),c=hw.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),bS(t,r,l.uc),f=new QE(n,r,u),e.abrupt("return",(t.dc.set(n,f),t._c.has(r)?t._c.get(r).push(n):t._c.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),eS.apply(this,arguments)}function tS(e,t){return nS.apply(this,arguments)}function nS(){return(nS=Ae(_e().mark((function e(t,n){var r,i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Bm(t),i=r.dc.get(n),!((a=r._c.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r._c.set(i.targetId,a.filter((function(e){return!Yk(e,n)}))),void r.dc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,tI(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),KI(r.remoteStore,i.targetId),gS(r,i.targetId)})).catch(_y);case 9:e.next=14;break;case 11:return gS(r,i.targetId),e.next=14,tI(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rS(e,t,n){return iS.apply(this,arguments)}function iS(){return iS=Ae(_e().mark((function e(t,n,r){var i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=GS(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Bm(e),a=ay.now(),o=t.reduce((function(e,t){return e.add(t.key)}),pb());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=ab(),s=pb();return i.Xi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=vn(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=jb(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new qb(c.key,l,ak(l.value.mapValue),Rb.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:sb(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Ic[e.currentUser.toKey()];r||(r=new kg(ny)),r=r.insert(t,n),e.Ic[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,_S(i,a.changes);case 9:return e.next=11,oE(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=TE(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),iS.apply(this,arguments)}function aS(e,t){return oS.apply(this,arguments)}function oS(){return(oS=Ae(_e().mark((function e(t,n){var r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bm(t),e.prev=1,e.next=4,X_(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.gc.get(t);n&&(zm(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.lc=!0:e.modifiedDocuments.size>0?zm(n.lc):e.removedDocuments.size>0&&(zm(n.lc),n.lc=!1))})),e.next=8,_S(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,_y(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function uS(e,t,n){var r=Bm(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.dc.forEach((function(e,n){var r=n.view.ku(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Bm(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=vn(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.ku(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&VE(n)}(r.eventManager,t),i.length&&r.fc.eu(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function sS(e,t,n){return cS.apply(this,arguments)}function cS(){return cS=Ae(_e().mark((function e(t,n,r){var i,a,o,u,s,c;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Bm(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.gc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new kg(fy.comparator)).insert(o,ok.newNoDocument(o,oy.min())),s=pb().add(o),c=new fw(oy.min(),new Map,new kg(ny),u,s),e.next=9,aS(i,c);case 9:i.mc=i.mc.remove(o),i.gc.delete(n),xS(i),e.next=16;break;case 14:return e.next=16,tI(i.localStore,n,!1).then((function(){return gS(i,n,r)})).catch(_y);case 16:case"end":return e.stop()}}),e)}))),cS.apply(this,arguments)}function lS(e,t){return fS.apply(this,arguments)}function fS(){return(fS=Ae(_e().mark((function e(t,n){var r,i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bm(t),i=n.batch.batchId,e.prev=1,e.next=4,$_(r.localStore,n);case 4:return a=e.sent,yS(r,i,null),mS(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,_S(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,_y(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function hS(e,t,n){return dS.apply(this,arguments)}function dS(){return(dS=Ae(_e().mark((function e(t,n,r){var i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Bm(t),e.prev=1,e.next=4,function(e,t){var n=Bm(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return zm(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,yS(i,n,r),mS(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,_S(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,_y(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function pS(e,t){return vS.apply(this,arguments)}function vS(){return(vS=Ae(_e().mark((function e(t,n){var r,i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $I((r=Bm(t)).remoteStore)||Mm("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Bm(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Tc.get(i)||[]).push(n),r.Tc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=TE(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function mS(e,t){(e.Tc.get(t)||[]).forEach((function(e){e.resolve()})),e.Tc.delete(t)}function yS(e,t,n){var r=Bm(e),i=r.Ic[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Ic[r.currentUser.toKey()]=i}}function gS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=vn(e._c.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.dc.delete(a),n&&e.fc.vc(a,n)}}catch(o){i.e(o)}finally{i.f()}e._c.delete(t),e.isPrimaryClient&&e.yc.ps(t).forEach((function(t){e.yc.containsKey(t)||kS(e,t)}))}function kS(e,t){e.wc.delete(t.path.canonicalString());var n=e.mc.get(t);null!==n&&(KI(e.remoteStore,n),e.mc=e.mc.remove(t),e.gc.delete(n),xS(e))}function bS(e,t,n){var r,i=vn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof GE?(e.yc.addReference(a.key,t),wS(e,a)):a instanceof HE?(Mm("SyncEngine","Document no longer in limbo: "+a.key),e.yc.removeReference(a.key,t),e.yc.containsKey(a.key)||kS(e,a.key)):jm()}}catch(o){i.e(o)}finally{i.f()}}function wS(e,t){var n=t.key,r=n.path.canonicalString();e.mc.get(n)||e.wc.has(r)||(Mm("SyncEngine","New document in limbo: "+n),e.wc.add(r),xS(e))}function xS(e){for(;e.wc.size>0&&e.mc.size<e.maxConcurrentLimboResolutions;){var t=e.wc.values().next().value;e.wc.delete(t);var n=new fy(sy.fromString(t)),r=e.Ec.next();e.gc.set(r,new $E(n)),e.mc=e.mc.insert(n,r),qI(e.remoteStore,new ex(Wk(zk(n.path)),r,"TargetPurposeLimboResolution",Fy.ct))}}function _S(e,t,n){return IS.apply(this,arguments)}function IS(){return IS=Ae(_e().mark((function e(t,n,r){var i,a,o,u;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Bm(t),a=[],o=[],u=[],e.t0=i.dc.isEmpty(),e.t0){e.next=9;break}return i.dc.forEach((function(e,t){u.push(i.Rc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=q_.Bi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.fc.eu(a),e.next=9,function(){var e=Ae(_e().mark((function e(t,n){var r,i,a,o,u,s,c,l;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bm(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Ey.forEach(n,(function(t){return Ey.forEach(t.$i,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Ey.forEach(t.Fi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Ny(e.t0)){e.next=10;break}throw e.t0;case 10:Mm("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=vn(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Hi.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Hi=r.Hi.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),IS.apply(this,arguments)}function ES(e,t){return SS.apply(this,arguments)}function SS(){return(SS=Ae(_e().mark((function e(t,n){var r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Bm(t)).currentUser.isEqual(n)){e.next=11;break}return Mm("SyncEngine","User change. New user:",n.toKey()),e.next=5,W_(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Tc.forEach((function(e){e.forEach((function(e){e.reject(new Km(qm.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Tc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,_S(r,i.tr);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function TS(e,t){var n=Bm(e),r=n.gc.get(t);if(r&&r.lc)return pb().add(r.key);var i=pb(),a=n._c.get(t);if(!a)return i;var o,u=vn(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.dc.get(s);i=i.unionWith(c.view.ec)}}catch(l){u.e(l)}finally{u.f()}return i}function CS(e,t){return AS.apply(this,arguments)}function AS(){return(AS=Ae(_e().mark((function e(t,n){var r,i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bm(t),e.next=3,rI(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ac(i),e.abrupt("return",(r.isPrimaryClient&&bS(r,n.targetId,a.uc),a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function NS(e,t){return PS.apply(this,arguments)}function PS(){return(PS=Ae(_e().mark((function e(t,n){var r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bm(t),e.abrupt("return",aI(r.localStore,n).then((function(e){return _S(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function DS(e,t,n,r){return OS.apply(this,arguments)}function OS(){return OS=Ae(_e().mark((function e(t,n,r,i){var a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Bm(t),e.next=3,function(e,t){var n=Bm(e),r=Bm(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Vn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Ey.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,oE(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(yS(a,n,i||null),mS(a,n),function(e,t){Bm(Bm(e).mutationQueue).Dn(t)}(a.localStore,n)):jm();case 11:return e.next=13,_S(a,o);case 13:e.next=16;break;case 15:Mm("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),OS.apply(this,arguments)}function RS(e,t){return LS.apply(this,arguments)}function LS(){return(LS=Ae(_e().mark((function e(t,n){var r,i,a,o,u,s,c,l;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(KS(r=Bm(t)),GS(r),!0!==n||!0===r.Ac){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,MS(r,i.toArray());case 5:return a=e.sent,r.Ac=!0,e.next=9,xE(r.remoteStore,!0);case 9:o=vn(a);try{for(o.s();!(u=o.n()).done;)s=u.value,qI(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Ac){e.next=25;break}return c=[],l=Promise.resolve(),r._c.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return gS(r,t),tI(r.localStore,t,!0)})),KI(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,MS(r,c);case 21:return function(e){var t=Bm(e);t.gc.forEach((function(e,n){KI(t.remoteStore,n)})),t.yc.Is(),t.gc=new Map,t.mc=new kg(fy.comparator)}(r),r.Ac=!1,e.next=25,xE(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function MS(e,t,n){return FS.apply(this,arguments)}function FS(){return FS=Ae(_e().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Bm(t),a=[],o=[],u=vn(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i._c.get(c))||0===f.length){e.next=34;break}return e.next=11,eI(i.localStore,Wk(f[0]));case 11:l=e.sent,h=vn(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.dc.get(p),e.next=20,CS(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,iI(i.localStore,c);case 36:return y=e.sent,e.next=39,eI(i.localStore,y);case 39:return l=e.sent,e.next=42,ZE(i,US(y),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.fc.eu(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),FS.apply(this,arguments)}function US(e){return jk(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function VS(e){var t=Bm(e);return Bm(Bm(t.localStore).persistence).Mi()}function jS(e,t,n,r){return zS.apply(this,arguments)}function zS(){return zS=Ae(_e().mark((function e(t,n,r,i){var a,o,u,s;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Bm(t)).Ac){e.next=3;break}return e.abrupt("return",void Mm("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a._c.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,aI(a.localStore,eb(o[0]));case 10:return u=e.sent,s=fw.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Tg.EMPTY_BYTE_STRING),e.next=14,_S(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,tI(a.localStore,n,!0);case 17:return gS(a,n,i),e.abrupt("break",20);case 19:jm();case 20:case"end":return e.stop()}}),e)}))),zS.apply(this,arguments)}function BS(e,t,n){return qS.apply(this,arguments)}function qS(){return(qS=Ae(_e().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=KS(t)).Ac){e.next=45;break}a=vn(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i._c.has(u)){e.next=10;break}return Mm("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,iI(i.localStore,u);case 12:return s=e.sent,e.next=15,eI(i.localStore,s);case 15:return c=e.sent,e.next=18,ZE(i,US(s),c.targetId,!1,c.resumeToken);case 18:qI(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=vn(r),e.prev=30,h=_e().mark((function e(){var t;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i._c.has(t),!e.t0){e.next=5;break}return e.next=5,tI(i.localStore,t,!1).then((function(){KI(i.remoteStore,t),gS(i,t)})).catch(_y);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])})))).apply(this,arguments)}function KS(e){var t=Bm(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=aS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=TS.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=sS.bind(null,t),t.fc.eu=FE.bind(null,t.eventManager),t.fc.vc=UE.bind(null,t.eventManager),t}function GS(e){var t=Bm(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=lS.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=hS.bind(null,t),t}function HS(e,t,n){var r=Bm(e);(function(){var e=Ae(_e().mark((function e(t,n,r){var i,a,o,u,s;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Bm(e),r=Cw(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ls.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(KE(i)),a=new qE(i,t.localStore,n.serializer),e.next=15,n.Pc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.ju(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.Pc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,_S(t,s.Hu,void 0);case 31:return e.next=33,function(e,t){var n=Bm(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ls.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Wu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Um("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var WS=function(){function e(){Ne(this,e),this.synchronizeTabs=!1}return De(e,[{key:"initialize",value:function(){var e=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=PI(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return H_(this.persistence,new K_,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new O_(L_.js,this.serializer)}},{key:"createSharedClientState",value:function(e){return new bI}},{key:"terminate",value:function(){var e=Ae(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),QS=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i){var a;return Ne(this,n),(a=t.call(this)).bc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return De(n,[{key:"initialize",value:function(){var e=Ae(_e().mark((function e(t){var r=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xi(Re(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.bc.initialize(this,t);case 4:return e.next=6,GS(this.bc.syncEngine);case 6:return e.next=8,oE(this.bc.remoteStore);case 8:return e.next=10,this.persistence.pi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return H_(this.persistence,new K_,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new c_(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new My(t,this.persistence);return new Ly(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=B_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Qx.withCacheSize(this.cacheSizeBytes):Qx.DEFAULT;return new V_(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,AI(),NI(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new bI}}]),n}(WS),$S=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e,r,!1)).bc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return De(n,[{key:"initialize",value:function(){var e=Ae(_e().mark((function e(t){var r,i=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xi(Re(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.bc.syncEngine,e.t0=this.sharedClientState instanceof kI,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Qr:DS.bind(null,r),jr:jS.bind(null,r),zr:BS.bind(null,r),Mi:VS.bind(null,r),Gr:NS.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.pi(function(){var e=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,RS(i.bc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=AI();if(!kI.D(t))throw new Km(qm.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=B_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new kI(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(QS),YS=function(){function e(){Ne(this,e)}return De(e,[{key:"initialize",value:function(){var e=Ae(_e().mark((function e(t,n){var r=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return uS(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=ES.bind(null,this.syncEngine),e.next=12,xE(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new DE}},{key:"createDatastore",value:function(e){var t,n=PI(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new CI(t));return function(e,t,n,r){return new MI(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return uS(o.syncEngine,e,0)},a=xI.D()?new xI:new wI,new UI(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new YE(e,t,n,r,i,a);return o&&(u.Ac=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Ae(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Bm(t),Mm("RemoteStore","RemoteStore shutting down."),n.Au.add(5),e.next=5,zI(n);case 5:n.vu.shutdown(),n.Pu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function XS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Ae(_e().mark((function r(){var i;return _e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Ae(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var JS=function(){function e(t){Ne(this,e),this.observer=t,this.muted=!1}return De(e,[{key:"next",value:function(e){this.observer.next&&this.Vc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Vc(this.observer.error,e):Fm("Uncaught Error in snapshot listener:",e.toString())}},{key:"Sc",value:function(){this.muted=!0}},{key:"Vc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),ZS=function(){function e(t,n){var r=this;Ne(this,e),this.Dc=t,this.serializer=n,this.metadata=new Gm,this.buffer=new Uint8Array,this.Cc=new TextDecoder("utf-8"),this.xc().then((function(e){e&&e.Gu()?r.metadata.resolve(e.Ku.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Ku))))}),(function(e){return r.metadata.reject(e)}))}return De(e,[{key:"close",value:function(){return this.Dc.cancel()}},{key:"getMetadata",value:function(){var e=Ae(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Pc",value:function(){var e=Ae(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.xc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xc",value:function(){var e=Ae(_e().mark((function e(){var t,n,r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Nc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Cc.decode(t),r=Number(n),isNaN(r)&&this.kc("length string (".concat(n,") is not valid number")),e.next=9,this.Mc(r);case 9:return i=e.sent,e.abrupt("return",new zE(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Nc",value:function(){var e=Ae(_e().mark((function e(){var t,n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Oc()<0)){e.next=7;break}return e.next=3,this.$c();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Oc())<0&&this.kc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Mc",value:function(){var e=Ae(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.$c();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.kc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Cc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"kc",value:function(e){throw this.Dc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"$c",value:function(){var e=Ae(_e().mark((function e(){var t,n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Dc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),eT=function(){function e(t){Ne(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return De(e,[{key:"lookup",value:function(){var e=Ae(_e().mark((function e(t){var n,r=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Km(qm.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Ae(_e().mark((function e(t,n){var r,i,a,o,u,s;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bm(t),i=Lw(r.serializer)+"/documents",a={documents:n.map((function(e){return Pw(r.serializer,e)}))},e.next=5,r.Ao("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Vw(r.serializer,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());zm(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new $b(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Ae(_e().mark((function e(){var t,n=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=fy.fromPath(t);n.mutations.push(new Yb(r,n.precondition(r)))})),e.next=7,function(){var e=Ae(_e().mark((function e(t,n){var r,i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bm(t),i=Lw(r.serializer)+"/documents",a={writes:n.map((function(e){return jw(r.serializer,e)}))},e.next=3,r.po("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw jm();t=oy.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Km(qm.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(oy.min())?Rb.exists(!1):Rb.updateTime(t):Rb.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(oy.min()))throw new Km(qm.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rb.updateTime(t)}return Rb.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),tT=function(){function e(t,n,r,i,a){Ne(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Fc=r.maxAttempts,this.Lo=new DI(this.asyncQueue,"transaction_retry")}return De(e,[{key:"run",value:function(){this.Fc-=1,this.Bc()}},{key:"Bc",value:function(){var e=this;this.Lo.xo(Ae(_e().mark((function t(){var n,r;return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new eT(e.datastore),(r=e.Lc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.qc(t)}))}))})).catch((function(t){e.qc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Lc",value:function(e){try{var t=this.updateFunction(e);return!Uy(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"qc",value:function(e){var t=this;this.Fc>0&&this.Uc(e)?(this.Fc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Bc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Uc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!tw(t)}return!1}}]),e}(),nT=function(){function e(t,n,r,i){var a=this;Ne(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Dm.UNAUTHENTICATED,this.clientId=ty.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mm("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Mm("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return De(e,[{key:"getConfiguration",value:function(){var e=Ae(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Km(qm.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Gm;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Ae(_e().mark((function n(){var r;return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=TE(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function rT(e,t){return iT.apply(this,arguments)}function iT(){return iT=Ae(_e().mark((function e(t,n){var r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Mm("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,W_(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),iT.apply(this,arguments)}function aT(e,t){return oT.apply(this,arguments)}function oT(){return(oT=Ae(_e().mark((function e(t,n){var r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,sT(t);case 3:return r=e.sent,Mm("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return bE(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return bE(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uT(e){return"FirebaseError"===e.name?e.code===qm.FAILED_PRECONDITION||e.code===qm.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function sT(e){return cT.apply(this,arguments)}function cT(){return(cT=Ae(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return Mm("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,rT(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),uT(n=e.t0)){e.next=13;break}throw n;case 13:return Um("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,rT(t,new WS);case 16:e.next=21;break;case 18:return Mm("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,rT(t,new WS);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function lT(e){return fT.apply(this,arguments)}function fT(){return(fT=Ae(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return Mm("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,aT(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return Mm("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,aT(t,new YS);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hT(e){return sT(e).then((function(e){return e.persistence}))}function dT(e){return sT(e).then((function(e){return e.localStore}))}function pT(e){return lT(e).then((function(e){return e.remoteStore}))}function vT(e){return lT(e).then((function(e){return e.syncEngine}))}function mT(e){return lT(e).then((function(e){return e.datastore}))}function yT(e){return gT.apply(this,arguments)}function gT(){return(gT=Ae(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lT(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=XE.bind(null,n.syncEngine),r.onUnlisten=tS.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Gm;return e.asyncQueue.enqueueAndForget(Ae(_e().mark((function i(){return _e().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new JS({next:function(a){t.enqueueAndForget((function(){return LE(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Km(qm.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Km(qm.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new jE(zk(n.path),a,{includeMetadataChanges:!0,Uu:!0});return OE(e,o)},i.next=3,yT(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function bT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Gm;return e.asyncQueue.enqueueAndForget(Ae(_e().mark((function i(){return _e().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new JS({next:function(n){t.enqueueAndForget((function(){return LE(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Km(qm.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new jE(n,a,{includeMetadataChanges:!0,Uu:!0});return OE(e,o)},i.next=3,yT(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var wT=new Map;function xT(e,t,n){if(!n)throw new Km(qm.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function _T(e,t,n,r){if(!0===t&&!0===r)throw new Km(qm.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function IT(e){if(!fy.isDocumentKey(e))throw new Km(qm.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ET(e){if(fy.isDocumentKey(e))throw new Km(qm.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function ST(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":jm()}function TT(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Km(qm.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=ST(e);throw new Km(qm.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function CT(e,t){if(t<=0)throw new Km(qm.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var AT=function(){function e(t){var n;if(Ne(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Km(qm.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Km(qm.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}_T("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling||void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!1:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams}return De(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),NT=function(){function e(t,n,r,i){Ne(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new AT({}),this._settingsFrozen=!1}return De(e,[{key:"app",get:function(){if(!this._app)throw new Km(qm.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Km(qm.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new AT(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Wm;switch(e.type){case"firstParty":return new Xm(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Km(qm.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=wT.get(e);t&&(Mm("ComponentProvider","Removing Datastore"),wT.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function PT(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=TT(e,NT))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Um("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Dm.MOCK_USER;else{o=An(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Km(qm.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Dm(s)}e._authCredentials=new Qm(new Hm(o,u))}}var DT=function(){function e(t,n,r){Ne(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return De(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new RT(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),OT=function(){function e(t,n,r){Ne(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return De(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),RT=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i){var a;return Ne(this,n),(a=t.call(this,e,r,zk(i)))._path=i,a.type="collection",a}return De(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new DT(this.firestore,null,new fy(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(OT);function LT(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Yn(e),xT("collection","path",t),e instanceof NT){var a=sy.fromString.apply(sy,[t].concat(r));return ET(a),new RT(e,null,a)}if(!(e instanceof DT||e instanceof RT))throw new Km(qm.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(sy.fromString.apply(sy,[t].concat(r)));return ET(o),new RT(e.firestore,null,o)}function MT(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Yn(e),1===arguments.length&&(t=ty.A()),xT("doc","path",t),e instanceof NT){var a=sy.fromString.apply(sy,[t].concat(r));return IT(a),new DT(e,null,new fy(a))}if(!(e instanceof DT||e instanceof RT))throw new Km(qm.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(sy.fromString.apply(sy,[t].concat(r)));return IT(o),new DT(e.firestore,e instanceof RT?e.converter:null,new fy(o))}function FT(e,t){return e=Yn(e),t=Yn(t),(e instanceof DT||e instanceof RT)&&(t instanceof DT||t instanceof RT)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function UT(e,t){return e=Yn(e),t=Yn(t),e instanceof OT&&t instanceof OT&&e.firestore===t.firestore&&Yk(e._query,t._query)&&e.converter===t.converter}var VT=function(){function e(){var t=this;Ne(this,e),this.Kc=Promise.resolve(),this.Gc=[],this.Qc=!1,this.jc=[],this.zc=null,this.Wc=!1,this.Hc=!1,this.Jc=[],this.Lo=new DI(this,"async_queue_retry"),this.Yc=function(){var e=NI();e&&Mm("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Lo.ko()};var n=NI();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Yc)}return De(e,[{key:"isShuttingDown",get:function(){return this.Qc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Xc(),this.Zc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Qc){this.Qc=!0,this.Hc=e||!1;var t=NI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Yc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Xc(),this.Qc)return new Promise((function(){}));var n=new Gm;return this.Zc((function(){return t.Qc&&t.Hc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Gc.push(e),t.ta()}))}},{key:"ta",value:function(){var e=Ae(_e().mark((function e(){var t=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Gc.length){e.next=14;break}return e.prev=1,e.next=4,this.Gc[0]();case 4:this.Gc.shift(),this.Lo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Ny(e.t0)){e.next=12;break}throw e.t0;case 12:Mm("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Gc.length>0&&this.Lo.xo((function(){return t.ta()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(e){var t=this,n=this.Kc.then((function(){return t.Wc=!0,e().catch((function(e){t.zc=e,t.Wc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Fm("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Wc=!1,e}))}));return this.Kc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Xc(),this.Jc.indexOf(e)>-1&&(t=0);var i=SE.createAndSchedule(this,e,t,n,(function(e){return r.ea(e)}));return this.jc.push(i),i}},{key:"Xc",value:function(){this.zc&&jm()}},{key:"verifyOperationInProgress",value:function(){}},{key:"na",value:function(){var e=Ae(_e().mark((function e(){var t;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Kc,e.next=3,t;case 3:if(t!==this.Kc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sa",value:function(e){var t,n=vn(this.jc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ia",value:function(e){var t=this;return this.na().then((function(){t.jc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=vn(t.jc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.na()}))}},{key:"ra",value:function(e){this.Jc.push(e)}},{key:"ea",value:function(e){var t=this.jc.indexOf(e);this.jc.splice(t,1)}}]),e}();function jT(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=vn(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var zT=function(){function e(){Ne(this,e),this._progressObserver={},this._taskCompletionResolver=new Gm,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return De(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),BT=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i,a){var o;return Ne(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new VT,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return De(n,[{key:"_terminate",value:function(){return this._firestoreClient||KT(this),this._firestoreClient.terminate()}}]),n}(NT);function qT(e){return e._firestoreClient||KT(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function KT(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new Lg(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new nT(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function GT(e,t,n){var r=new Gm;return e.asyncQueue.enqueue(Ae(_e().mark((function i(){var a;return _e().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,rT(e,n);case 3:return i.next=5,aT(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),uT(a=i.t0)){i.next=13;break}throw a;case 13:Um("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function HT(e){return function(e){return e.asyncQueue.enqueue(Ae(_e().mark((function t(){var n,r;return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,hT(e);case 2:return n=t.sent,t.next=5,pT(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Bm(e);return t.Au.delete(0),VI(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(qT(e=TT(e,BT)))}function WT(e){return function(e){return e.asyncQueue.enqueue(Ae(_e().mark((function t(){var n,r;return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,hT(e);case 2:return n=t.sent,t.next=5,pT(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Ae(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Bm(t)).Au.add(0),e.next=4,zI(n);case 4:n.Pu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(qT(e=TT(e,BT)))}function QT(e,t){var n=qT(e=TT(e,BT)),r=new zT;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new ZS(e,t)}(function(e,t){if(e instanceof Uint8Array)return XS(e,t);if(e instanceof ArrayBuffer)return XS(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?aw().encode(e):e),t)}(n,PI(t));e.asyncQueue.enqueueAndForget(Ae(_e().mark((function t(){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=HS,t.next=3,vT(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function $T(e,t){return function(e,t){return e.asyncQueue.enqueue(Ae(_e().mark((function n(){return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Bm(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ls.getNamedQuery(e,t)}))},n.next=3,dT(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(qT(e=TT(e,BT)),t).then((function(t){return t?new OT(e,null,t.query):null}))}function YT(e){if(e._initialized||e._terminated)throw new Km(qm.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var XT=function(){function e(t){Ne(this,e),this._byteString=t}return De(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Tg.fromBase64String(t))}catch(t){throw new Km(qm.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Tg.fromUint8Array(t))}}]),e}(),JT=function(){function e(){Ne(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Km(qm.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ly(n)}return De(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var ZT=De((function e(t){Ne(this,e),this._methodName=t})),eC=function(){function e(t,n){if(Ne(this,e),!isFinite(t)||t<-90||t>90)throw new Km(qm.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Km(qm.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return De(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return ny(this._lat,e._lat)||ny(this._long,e._long)}}]),e}(),tC=/^__.*__$/,nC=function(){function e(t,n,r){Ne(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return De(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new qb(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bb(e,this.data,t,this.fieldTransforms)}}]),e}(),rC=function(){function e(t,n,r){Ne(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return De(e,[{key:"toMutation",value:function(e,t){return new qb(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function iC(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw jm()}}var aC=function(){function e(t,n,r,i,a,o){Ne(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.oa(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return De(e,[{key:"path",get:function(){return this.settings.path}},{key:"ua",get:function(){return this.settings.ua}},{key:"ca",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"aa",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ca({path:n,ha:!1});return r.la(e),r}},{key:"fa",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ca({path:n,ha:!1});return r.oa(),r}},{key:"da",value:function(e){return this.ca({path:void 0,ha:!0})}},{key:"_a",value:function(e){return EC(e,this.settings.methodName,this.settings.wa||!1,this.path,this.settings.ma)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"oa",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.la(this.path.get(e))}},{key:"la",value:function(e){if(0===e.length)throw this._a("Document fields must not be empty");if(iC(this.ua)&&tC.test(e))throw this._a('Document fields cannot begin and end with "__"')}}]),e}(),oC=function(){function e(t,n,r){Ne(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||PI(t)}return De(e,[{key:"ga",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new aC({ua:e,methodName:t,ma:n,path:ly.emptyPath(),ha:!1,wa:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function uC(e){var t=e._freezeSettings(),n=PI(e._databaseId);return new oC(e._databaseId,!!t.ignoreUndefinedProperties,n)}function sC(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ga(a.merge||a.mergeFields?2:0,t,n,i);wC("Data must be an object, but it was:",o,r);var u,s,c=kC(r,o);if(a.merge)u=new Eg(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=vn(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=xC(t,d,n);if(!o.contains(p))throw new Km(qm.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));SC(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new Eg(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new nC(new ik(c),u,s)}var cC=function(e){Oe(n,e);var t=Ue(n);function n(){return Ne(this,n),t.apply(this,arguments)}return De(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ua)throw 1===e.ua?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(ZT);function lC(e,t,n){return new aC({ua:3,ma:t.settings.ma,methodName:e._methodName,ha:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var fC=function(e){Oe(n,e);var t=Ue(n);function n(){return Ne(this,n),t.apply(this,arguments)}return De(n,[{key:"_toFieldTransform",value:function(e){return new Db(e.path,new Ib)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(ZT),hC=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e)).ya=r,i}return De(n,[{key:"_toFieldTransform",value:function(e){var t=lC(this,e,!0),n=this.ya.map((function(e){return gC(e,t)})),r=new Eb(n);return new Db(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(ZT),dC=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e)).ya=r,i}return De(n,[{key:"_toFieldTransform",value:function(e){var t=lC(this,e,!0),n=this.ya.map((function(e){return gC(e,t)})),r=new Tb(n);return new Db(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(ZT),pC=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e)).pa=r,i}return De(n,[{key:"_toFieldTransform",value:function(e){var t=new Ab(e.serializer,kb(e.serializer,this.pa));return new Db(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(ZT);function vC(e,t,n,r){var i=e.ga(1,t,n);wC("Data must be an object, but it was:",i,r);var a=[],o=ik.empty();yg(r,(function(e,r){var u=IC(t,e,n);r=Yn(r);var s=i.fa(u);if(r instanceof cC)a.push(u);else{var c=gC(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Eg(a);return new rC(o,u,i.fieldTransforms)}function mC(e,t,n,r,i,a){var o=e.ga(1,t,n),u=[xC(t,r,n)],s=[i];if(a.length%2!=0)throw new Km(qm.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(xC(t,a[c])),s.push(a[c+1]);for(var l=[],f=ik.empty(),h=u.length-1;h>=0;--h)if(!SC(l,u[h])){var d=u[h],p=s[h];p=Yn(p);var v=o.fa(d);if(p instanceof cC)l.push(d);else{var m=gC(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new Eg(l);return new rC(f,y,o.fieldTransforms)}function yC(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return gC(n,e.ga(r?4:3,t))}function gC(e,t){if(bC(e=Yn(e)))return wC("Unsupported field value:",t,e),kC(e,t);if(e instanceof ZT)return function(e,t){if(!iC(t.ua))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ha&&4!==t.ua)throw t._a("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=vn(e);try{for(a.s();!(n=a.n()).done;){var o=gC(n.value,t.da(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Yn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return kb(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=ay.fromDate(e);return{timestampValue:Ew(t.serializer,n)}}if(e instanceof ay){var r=new ay(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ew(t.serializer,r)}}if(e instanceof eC)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof XT)return{bytesValue:Sw(t.serializer,e._byteString)};if(e instanceof DT){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t._a("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Aw(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(ST(e)))}(e,t)}function kC(e,t){var n={};return gg(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):yg(e,(function(e,r){var i=gC(r,t.aa(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function bC(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ay||e instanceof eC||e instanceof XT||e instanceof DT||e instanceof ZT)}function wC(e,t,n){if(!bC(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=ST(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function xC(e,t,n){if((t=Yn(t))instanceof JT)return t._internalPath;if("string"==typeof t)return IC(e,t);throw EC("Field path arguments must be of type string or ",e,!1,void 0,n)}var _C=new RegExp("[~\\*/\\[\\]]");function IC(e,t,n){if(t.search(_C)>=0)throw EC("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return mn(JT,Je(t.split(".")))._internalPath}catch(r){throw EC("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function EC(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Km(qm.INVALID_ARGUMENT,u+e+s)}function SC(e,t){return e.some((function(e){return e.isEqual(t)}))}var TC=function(){function e(t,n,r,i,a){Ne(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return De(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new DT(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new CC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(AC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),CC=function(e){Oe(n,e);var t=Ue(n);function n(){return Ne(this,n),t.apply(this,arguments)}return De(n,[{key:"data",value:function(){return xi(Re(n.prototype),"data",this).call(this)}}]),n}(TC);function AC(e,t){return"string"==typeof t?IC(e,t):t instanceof JT?t._internalPath:t._delegate._internalPath}function NC(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Km(qm.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var PC=De((function e(){Ne(this,e)})),DC=function(e){Oe(n,e);var t=Ue(n);function n(){return Ne(this,n),t.apply(this,arguments)}return De(n)}(PC);function OC(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof PC&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof LC})).length,n=e.filter((function(e){return e instanceof RC})).length;if(t>1||t>0&&n>0)throw new Km(qm.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=vn(n);try{for(u.s();!(o=u.n()).done;){var s=o.value;e=s._apply(e)}}catch(c){u.e(c)}finally{u.f()}return e}var RC=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i){var a;return Ne(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return De(n,[{key:"_apply",value:function(e){var t=this._parse(e);return WC(e._query,t),new OT(e.firestore,e.converter,Qk(e._query,t))}},{key:"_parse",value:function(e){var t=uC(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Km(qm.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){HC(o,a);var s,c=[],l=vn(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(GC(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=GC(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||HC(o,a),u=yC(n,"where",o,"in"===a||"not-in"===a);return dk.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(DC);var LC=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return De(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:pk.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=vn(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;WC(r,a),r=Qk(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new OT(e.firestore,e.converter,Qk(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(PC);var MC=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return De(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Km(qm.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Km(qm.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new lk(t,n);return function(e,t){if(null===qk(e)){var n=Kk(e);null!==n&&QC(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new OT(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Vk(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(DC);var FC=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i){var a;return Ne(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return De(n,[{key:"_apply",value:function(e){return new OT(e.firestore,e.converter,$k(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(DC);var UC=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i){var a;return Ne(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return De(n,[{key:"_apply",value:function(e){var t=KC(e,this.type,this._docOrFields,this._inclusive);return new OT(e.firestore,e.converter,function(e,t){return new Vk(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(DC);function VC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return UC._create("startAt",t,!0)}function jC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return UC._create("startAfter",t,!1)}var zC=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i){var a;return Ne(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return De(n,[{key:"_apply",value:function(e){var t=KC(e,this.type,this._docOrFields,this._inclusive);return new OT(e.firestore,e.converter,function(e,t){return new Vk(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(DC);function BC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return zC._create("endBefore",t,!1)}function qC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return zC._create("endAt",t,!0)}function KC(e,t,n,r){if(n[0]=Yn(n[0]),n[0]instanceof TC)return function(e,t,n,r,i){if(!r)throw new Km(qm.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=vn(Hk(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Hg(t,r.key));else{var c=r.data.field(s.field);if(Dg(c))throw new Km(qm.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Km(qm.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new uk(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=uC(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Km(qm.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Km(qm.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Gk(e)&&-1!==c.indexOf("/"))throw new Km(qm.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(sy.fromString(c));if(!fy.isDocumentKey(l))throw new Km(qm.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new fy(l);u.push(Hg(t,f))}else{var h=yC(n,r,c);u.push(h)}}return new uk(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function GC(e,t,n){if("string"==typeof(n=Yn(n))){if(""===n)throw new Km(qm.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gk(t)&&-1!==n.indexOf("/"))throw new Km(qm.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(sy.fromString(n));if(!fy.isDocumentKey(r))throw new Km(qm.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Hg(e,new fy(r))}if(n instanceof DT)return Hg(e,n._key);throw new Km(qm.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(ST(n),"."))}function HC(e,t){if(!Array.isArray(e)||0===e.length)throw new Km(qm.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function WC(e,t){if(t.isInequality()){var n=Kk(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Km(qm.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=qk(e);null!==i&&QC(e,r,i)}var a=function(e,t){var n,r=vn(e);try{for(r.s();!(n=r.n()).done;){var i,a=vn(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new Km(qm.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Km(qm.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function QC(e,t,n){if(!n.isEqual(t))throw new Km(qm.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var $C=function(){function e(){Ne(this,e)}return De(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Vg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ng(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pg(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw jm()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return yg(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new eC(Ng(e.latitude),Ng(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Og(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Rg(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Ag(e);return new ay(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=sy.fromString(e);zm(Zw(n));var r=new Mg(n.get(1),n.get(3)),i=new fy(n.popFirst(5));return r.isEqual(t)||Fm("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function YC(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var XC=function(e){Oe(n,e);var t=Ue(n);function n(e){var r;return Ne(this,n),(r=t.call(this)).firestore=e,r}return De(n,[{key:"convertBytes",value:function(e){return new XT(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new DT(this.firestore,null,t)}}]),n}($C);var JC=function(){function e(t,n){Ne(this,e),this.hasPendingWrites=t,this.fromCache=n}return De(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),ZC=function(e){Oe(n,e);var t=Ue(n);function n(e,r,i,a,o,u){var s;return Ne(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return De(n,[{key:"exists",value:function(){return xi(Re(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new eA(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(AC("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(TC),eA=function(e){Oe(n,e);var t=Ue(n);function n(){return Ne(this,n),t.apply(this,arguments)}return De(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return xi(Re(n.prototype),"data",this).call(this,e)}}]),n}(ZC),tA=function(){function e(t,n,r,i){Ne(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new JC(i.hasPendingWrites,i.fromCache),this.query=r}return De(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new eA(n._firestore,n._userDataWriter,r.key,r,new JC(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Km(qm.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new eA(e._firestore,e._userDataWriter,t.doc.key,t.doc,new JC(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new eA(e._firestore,e._userDataWriter,t.doc.key,t.doc,new JC(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:nA(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function nA(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return jm()}}function rA(e,t){return e instanceof ZC&&t instanceof ZC?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof tA&&t instanceof tA&&e._firestore===t._firestore&&UT(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var iA=function(e){Oe(n,e);var t=Ue(n);function n(e){var r;return Ne(this,n),(r=t.call(this)).firestore=e,r}return De(n,[{key:"convertBytes",value:function(e){return new XT(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new DT(this.firestore,null,t)}}]),n}($C);function aA(e){e=TT(e,DT);var t=TT(e.firestore,BT),n=qT(t),r=new iA(t);return function(e,t){var n=new Gm;return e.asyncQueue.enqueueAndForget(Ae(_e().mark((function r(){return _e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Ae(_e().mark((function e(t,n,r){var i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Bm(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Km(qm.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=TE(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,dT(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new ZC(t,r,e._key,n,new JC(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function oA(e){e=TT(e,OT);var t=TT(e.firestore,BT),n=qT(t),r=new iA(t);return function(e,t){var n=new Gm;return e.asyncQueue.enqueueAndForget(Ae(_e().mark((function r(){return _e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Ae(_e().mark((function e(t,n,r){var i,a,o,u,s;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,rI(t,n,!0);case 3:i=e.sent,a=new WE(n,i.sr),o=a.nc(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=TE(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,dT(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new tA(t,r,e,n)}))}function uA(e,t,n){e=TT(e,DT);var r=TT(e.firestore,BT),i=YC(e.converter,t,n);return fA(r,[sC(uC(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Rb.none())])}function sA(e,t,n){e=TT(e,DT);for(var r=TT(e.firestore,BT),i=uC(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return fA(r,[("string"==typeof(t=Yn(t))||t instanceof JT?mC(i,"updateDoc",e._key,t,n,o):vC(i,"updateDoc",e._key,t)).toMutation(e._key,Rb.exists(!0))])}function cA(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Yn(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||jT(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(jT(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof DT)l=TT(e.firestore,BT),f=zk(e._key.path),c={next:function(t){n[s]&&n[s](hA(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=TT(e,OT);l=TT(p.firestore,BT),f=p._query;var v=new iA(l);c={next:function(e){n[s]&&n[s](new tA(l,v,p,e))},error:n[s+1],complete:n[s+2]},NC(e._query)}return function(e,t,n,r){var i=new JS(r),a=new jE(t,i,n);return e.asyncQueue.enqueueAndForget(Ae(_e().mark((function t(){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=OE,t.next=3,yT(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Sc(),e.asyncQueue.enqueueAndForget(Ae(_e().mark((function t(){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=LE,t.next=3,yT(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(qT(l),f,h,c)}function lA(e,t){return function(e,t){var n=new JS(t);return e.asyncQueue.enqueueAndForget(Ae(_e().mark((function t(){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Bm(e).Nu.add(t),t.next()},t.next=3,yT(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Sc(),e.asyncQueue.enqueueAndForget(Ae(_e().mark((function t(){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Bm(e).Nu.delete(t)},t.next=3,yT(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(qT(e=TT(e,BT)),jT(t)?t:{next:t})}function fA(e,t){return function(e,t){var n=new Gm;return e.asyncQueue.enqueueAndForget(Ae(_e().mark((function r(){return _e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=rS,r.next=3,vT(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(qT(e),t)}function hA(e,t,n){var r=n.docs.get(t._key),i=new iA(e);return new ZC(e,i,t._key,r,new JC(n.hasPendingWrites,n.fromCache),t.converter)}var dA={maxAttempts:5},pA=function(){function e(t,n){Ne(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=uC(t)}return De(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=vA(e,this._firestore),i=YC(r.converter,t,n),a=sC(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Rb.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=vA(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Yn(t))||t instanceof JT?mC(this._dataReader,"WriteBatch.update",i._key,t,n,o):vC(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Rb.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=vA(e,this._firestore);return this._mutations=this._mutations.concat(new $b(t._key,Rb.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Km(qm.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function vA(e,t){if((e=Yn(e)).firestore!==t)throw new Km(qm.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var mA=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e,r))._firestore=e,i}return De(n,[{key:"get",value:function(e){var t=this,r=vA(e,this._firestore),i=new iA(this._firestore);return xi(Re(n.prototype),"get",this).call(this,e).then((function(e){return new ZC(t._firestore,i,r._key,e._document,new JC(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){Ne(this,e),this._firestore=t,this._transaction=n,this._dataReader=uC(t)}return De(e,[{key:"get",value:function(e){var t=this,n=vA(e,this._firestore),r=new XC(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return jm();var i=e[0];if(i.isFoundDocument())return new TC(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new TC(t._firestore,r,n._key,null,n.converter);throw jm()}))}},{key:"set",value:function(e,t,n){var r=vA(e,this._firestore),i=YC(r.converter,t,n),a=sC(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=vA(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Yn(t))||t instanceof JT?mC(this._dataReader,"Transaction.update",i._key,t,n,o):vC(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=vA(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function yA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new hC("arrayUnion",t)}function gA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new dC("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Om=e}(Kr),Fr(new Xn("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new BT(new $m(e.getProvider("auth-internal")),new Zm(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Km(qm.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mg(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Yr(Pm,"3.11.0",e),Yr(Pm,"3.11.0","esm2017")}();function kA(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Km("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function bA(){if("undefined"===typeof Uint8Array)throw new Km("unimplemented","Uint8Arrays are not available in this environment.")}function wA(){if("undefined"==typeof atob)throw new Km("unimplemented","Blobs are unavailable in Firestore in this environment.")}var xA=function(){function e(t){Ne(this,e),this._delegate=t}return De(e,[{key:"toBase64",value:function(){return wA(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return bA(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return wA(),new e(XT.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return bA(),new e(XT.fromUint8Array(t))}}]),e}();function _A(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=vn(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var IA=function(){function e(){Ne(this,e)}return De(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){YT(e=TT(e,BT));var n=qT(e);if(n._uninitializedComponentsProvider)throw new Km(qm.FAILED_PRECONDITION,"SDK cache is already specified.");Um("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new YS;return GT(n,i,new QS(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){YT(e=TT(e,BT));var t=qT(e);if(t._uninitializedComponentsProvider)throw new Km(qm.FAILED_PRECONDITION,"SDK cache is already specified.");Um("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new YS;return GT(t,r,new $S(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Km(qm.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Gm;return e._queue.enqueueAndForgetEvenWhileRestricted(Ae(_e().mark((function n(){return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Ae(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ty.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Ty.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(B_(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),EA=function(){function e(t,n,r){var i=this;Ne(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Mg||(this._appCompat=t)}return De(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Um("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};PT(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return HT(this._delegate)}},{key:"disableNetwork",value:function(){return WT(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&_T("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){var t=new Gm;return e.asyncQueue.enqueueAndForget(Ae(_e().mark((function n(){return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=pS,n.next=3,vT(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(qT(TT(this._delegate,BT)))}},{key:"onSnapshotsInSync",value:function(e){return lA(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Km("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new VA(this,LT(this._delegate,e))}catch(t){throw PA(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new NA(this,MT(this._delegate,e))}catch(t){throw PA(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new MA(this,function(e,t){if(e=TT(e,NT),xT("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Km(qm.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new OT(e,null,function(e){return new Vk(sy.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw PA(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=TT(e,BT);var r=Object.assign(Object.assign({},dA),n);return function(e){if(e.maxAttempts<1)throw new Km(qm.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Gm;return e.asyncQueue.enqueueAndForget(Ae(_e().mark((function i(){var a;return _e().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,mT(e);case 2:a=i.sent,new tT(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(qT(e),(function(n){return t(new mA(e,n))}),r)}(this._delegate,(function(n){return e(new TA(t,n))}))}},{key:"batch",value:function(){var e=this;return qT(this._delegate),new CA(new pA(this._delegate,(function(t){return fA(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return QT(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return $T(this._delegate,e).then((function(e){return e?new MA(t,e):null}))}}]),e}(),SA=function(e){Oe(n,e);var t=Ue(n);function n(e){var r;return Ne(this,n),(r=t.call(this)).firestore=e,r}return De(n,[{key:"convertBytes",value:function(e){return new xA(new XT(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return NA.forKey(t,this.firestore,null)}}]),n}($C);var TA=function(){function e(t,n){Ne(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new SA(t)}return De(e,[{key:"get",value:function(e){var t=this,n=jA(e);return this._delegate.get(n).then((function(e){return new RA(t._firestore,new ZC(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=jA(e);return n?(kA("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=jA(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=jA(e);return this._delegate.delete(t),this}}]),e}(),CA=function(){function e(t){Ne(this,e),this._delegate=t}return De(e,[{key:"set",value:function(e,t,n){var r=jA(e);return n?(kA("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=jA(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=jA(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),AA=function(){function e(t,n,r){Ne(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return De(e,[{key:"fromFirestore",value:function(e,t){var n=new eA(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new LA(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new SA(t),n),i.set(n,a)),a}}]),e}();AA.INSTANCES=new WeakMap;var NA=function(){function e(t,n){Ne(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new SA(t)}return De(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new VA(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new VA(this.firestore,LT(this._delegate,e))}catch(t){throw PA(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Yn(e))instanceof DT&&FT(this._delegate,e)}},{key:"set",value:function(e,t){t=kA("DocumentReference.set",t);try{return t?uA(this._delegate,e,t):uA(this._delegate,e)}catch(n){throw PA(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?sA(this._delegate,e):sA.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw PA(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return fA(TT((e=this._delegate).firestore,BT),[new $b(e._key,Rb.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=DA(n),a=OA(n,(function(t){return new RA(e.firestore,new ZC(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return cA(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?aA(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=TT(e,DT);var t=TT(e.firestore,BT);return kT(qT(t),e._key,{source:"server"}).then((function(n){return hA(t,e,n)}))}(this._delegate):function(e){e=TT(e,DT);var t=TT(e.firestore,BT);return kT(qT(t),e._key).then((function(n){return hA(t,e,n)}))}(this._delegate)).then((function(e){return new RA(t.firestore,new ZC(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(AA.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Km("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new DT(n._delegate,r,new fy(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new DT(n._delegate,r,t))}}]),e}();function PA(e,t,n){return e.message=e.message.replace(t,n),e}function DA(e){var t,n=vn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!_A(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function OA(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=_A(e[0])?e[0]:_A(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var RA=function(){function e(t,n){Ne(this,e),this._firestore=t,this._delegate=n}return De(e,[{key:"ref",get:function(){return new NA(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return rA(this._delegate,e._delegate)}}]),e}(),LA=function(e){Oe(n,e);var t=Ue(n);function n(){return Ne(this,n),t.apply(this,arguments)}return De(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||jm(),t}}]),n}(RA),MA=function(){function e(t,n){Ne(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new SA(t)}return De(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,OC(this._delegate,function(e,t,n){var r=t,i=AC("where",e);return RC._create(i,r,n)}(t,n,r)))}catch(i){throw PA(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,OC(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=t,r=AC("orderBy",e);return MC._create(r,n)}(t,n)))}catch(r){throw PA(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,OC(this._delegate,(CT("limit",n=t),FC._create("limit",n,"F"))))}catch(r){throw PA(r,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,OC(this._delegate,(CT("limitToLast",n=t),FC._create("limitToLast",n,"L"))))}catch(r){throw PA(r,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,OC(this._delegate,VC.apply(void 0,arguments)))}catch(t){throw PA(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,OC(this._delegate,jC.apply(void 0,arguments)))}catch(t){throw PA(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,OC(this._delegate,BC.apply(void 0,arguments)))}catch(t){throw PA(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,OC(this._delegate,qC.apply(void 0,arguments)))}catch(t){throw PA(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return UT(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?oA(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=TT(e,OT);var t=TT(e.firestore,BT),n=qT(t),r=new iA(t);return bT(n,e._query,{source:"server"}).then((function(n){return new tA(t,r,e,n)}))}(this._delegate):function(e){e=TT(e,OT);var t=TT(e.firestore,BT),n=qT(t),r=new iA(t);return NC(e._query),bT(n,e._query).then((function(n){return new tA(t,r,e,n)}))}(this._delegate)).then((function(e){return new UA(t.firestore,new tA(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=DA(n),a=OA(n,(function(t){return new UA(e.firestore,new tA(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return cA(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(AA.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),FA=function(){function e(t,n){Ne(this,e),this._firestore=t,this._delegate=n}return De(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new LA(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),UA=function(){function e(t,n){Ne(this,e),this._firestore=t,this._delegate=n}return De(e,[{key:"query",get:function(){return new MA(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new LA(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new FA(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new LA(n._firestore,r))}))}},{key:"isEqual",value:function(e){return rA(this._delegate,e._delegate)}}]),e}(),VA=function(e){Oe(n,e);var t=Ue(n);function n(e,r){var i;return Ne(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return De(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new NA(this.firestore,e):null}},{key:"doc",value:function(e){try{return new NA(this.firestore,void 0===e?MT(this._delegate):MT(this._delegate,e))}catch(t){throw PA(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=TT(e.firestore,BT),r=MT(e),i=YC(e.converter,t);return fA(n,[sC(uC(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Rb.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new NA(t.firestore,e)}))}},{key:"isEqual",value:function(e){return FT(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(AA.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(MA);function jA(e){return TT(e,DT)}var zA=function(){function e(){Ne(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=mn(JT,n)}return De(e,[{key:"isEqual",value:function(e){return(e=Yn(e))instanceof JT&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(ly.keyField().canonicalString())}}]),e}(),BA=function(){function e(t){Ne(this,e),this._delegate=t}return De(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new fC("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new cC("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=yA.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=gA.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new pC("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),qA={Firestore:EA,GeoPoint:eC,Timestamp:ay,Blob:xA,Transaction:TA,WriteBatch:CA,DocumentReference:NA,DocumentSnapshot:RA,Query:MA,QueryDocumentSnapshot:LA,QuerySnapshot:UA,CollectionReference:VA,FieldPath:zA,FieldValue:BA,setLogLevel:function(e){var t;t=e,Rm.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Xn("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},qA)))}(e,(function(e,t){return new EA(e,t,new IA)})),e.registerVersion("@firebase/firestore-compat","0.3.8")}(bi);bi.initializeApp({apiKey:"AIzaSyAxVbB4LOfvUtDBZ0YIZ0A9WdSwZnvr7kg",authDomain:"crown-app-1153c.firebaseapp.com",projectId:"crown-app-1153c",storageBucket:"crown-app-1153c.appspot.com",messagingSenderId:"934436756936",appId:"1:934436756936:web:0bbba28d8ce52b5001b4fd",measurementId:"G-H98M3T5QZR"});var KA=function(){var e=Ae(_e().mark((function e(t,n){var r,i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return r=HA.doc("users/".concat(t.uid)),e.next=5,r.get();case 5:if(e.sent.exists){e.next=17;break}return i=t.displayName,a=t.email,o=new Date,e.prev=9,e.next=12,r.set(Te({displayName:i,email:a,createdAt:o},n));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.log("error creating user",e.t0.message);case 17:return e.abrupt("return",r);case 18:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t,n){return e.apply(this,arguments)}}(),GA=bi.auth(),HA=bi.firestore(),WA=new bi.auth.GoogleAuthProvider;WA.setCustomParameters({prompt:"select_account"});var QA=function(){return GA.signInWithPopup(WA)},$A=function(){return(0,St.jsxs)("div",{className:"cart-dropdown",children:[(0,St.jsx)("div",{className:"cart-items"}),(0,St.jsx)(Ft,{children:"GO TO CHECKOUT"})]})},YA=_t((function(e){return{currentUser:e.user.currentUser,hidden:e.cart.hidden}}))((function(e){var t=e.currentUser,n=e.hidden;return(0,St.jsxs)("div",{className:"header",children:[(0,St.jsx)(ke,{className:"logo-container",to:"/",children:(0,St.jsx)(sn,{className:"logo"})}),(0,St.jsxs)("div",{className:"options",children:[(0,St.jsx)(ke,{className:"option",to:"/shop",children:"SHOP"}),(0,St.jsx)(ke,{className:"option",to:"/",children:"CONTACT"}),t?(0,St.jsx)("div",{className:"option",onClick:function(){return GA.signOut()},children:"SIGN OUT"}):(0,St.jsx)(ke,{className:"option",to:"/signin",children:"SIGN IN"}),(0,St.jsx)(pn,{})]}),n?null:(0,St.jsx)($A,{})]})})),XA=["handleChange","label"],JA=function(e){var t=e.handleChange,n=e.label,r=Pt(e,XA);return(0,St.jsxs)("div",{className:"group",children:[(0,St.jsx)("input",Te({className:"form-input",onChange:t},r)),n?(0,St.jsx)("label",{className:"".concat(r.values?"shrink":""," form-input-lable"),children:n}):null]})},ZA=function(e){Oe(n,e);var t=Ue(n);function n(e){var r;return Ne(this,n),(r=t.call(this,e)).handleSubmit=function(){var e=Ae(_e().mark((function e(t){var n,i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=r.state,i=n.email,a=n.password,e.prev=2,e.next=5,GA.signInWithEmailAndPassword(i,a);case 5:r.setState({email:"",password:""}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),r.handleChange=function(e){var t=e.target,n=t.value,i=t.name;r.setState(Ee({},i,n))},r.state={email:"",password:""},r}return De(n,[{key:"render",value:function(){return(0,St.jsxs)("div",{className:"sign-in",children:[(0,St.jsx)("h2",{children:"I already have an account"}),(0,St.jsx)("span",{children:"Sign in with your email and password"}),(0,St.jsxs)("form",{onSubmit:this.handleSubmit,children:[(0,St.jsx)(JA,{name:"email",type:"email",handleChange:this.handleChange,value:this.state.email,label:"email",required:!0}),(0,St.jsx)(JA,{name:"password",type:"password",value:this.state.password,handleChange:this.handleChange,label:"password",required:!0}),(0,St.jsxs)("div",{className:"buttons",children:[(0,St.jsx)(Ft,{type:"submit",children:" Sign in "}),(0,St.jsx)(Ft,{onClick:QA,isGoogleSignIn:!0,children:"Sign in with Google"})]})]})]})}}]),n}(t.Component),eN=ZA,tN=function(e){Oe(n,e);var t=Ue(n);function n(){var e;return Ne(this,n),(e=t.call(this)).handleSubmit=function(){var t=Ae(_e().mark((function t(n){var r,i,a,o,u,s,c;return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),r=e.state,i=r.displayName,a=r.email,o=r.password,u=r.confirmPassword,o===u){t.next=5;break}return alert("passwords don't match"),t.abrupt("return");case 5:return t.prev=5,t.next=8,GA.createUserWithEmailAndPassword(a,o);case 8:return s=t.sent,c=s.user,t.next=12,KA(c,{displayName:i});case 12:e.setState({displayName:"",email:"",password:"",confirmPassword:""}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(5),console.error(t.t0);case 18:case"end":return t.stop()}}),t,null,[[5,15]])})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var n=t.target,r=n.name,i=n.value;e.setState(Ee({},r,i))},e.state={displayName:"",email:"",password:"",confirmPassword:""},e}return De(n,[{key:"render",value:function(){var e=this.state,t=e.displayName,n=e.email,r=e.password,i=e.confirmPassword;return(0,St.jsxs)("div",{className:"sign-up",children:[(0,St.jsx)("h2",{className:"title",children:"I do not have a account"}),(0,St.jsx)("span",{children:"Sign up with your email and password"}),(0,St.jsxs)("form",{className:"sign-up-form",onSubmit:this.handleSubmit,children:[(0,St.jsx)(JA,{type:"text",name:"displayName",value:t,onChange:this.handleChange,label:"Display Name",required:!0}),(0,St.jsx)(JA,{type:"email",name:"email",value:n,onChange:this.handleChange,label:"Email",required:!0}),(0,St.jsx)(JA,{type:"password",name:"password",value:r,onChange:this.handleChange,label:"Password",required:!0}),(0,St.jsx)(JA,{type:"password",name:"confirmPassword",value:i,onChange:this.handleChange,label:"Confirm Password",required:!0}),(0,St.jsx)(Ft,{type:"submit",children:"SIGN UP"})]})]})}}]),n}(t.Component),nN=tN,rN=function(){return(0,St.jsxs)("div",{className:"container",children:[(0,St.jsx)(eN,{}),(0,St.jsx)(nN,{})]})},iN="SET_CURRENT_USER",aN=function(e){Oe(n,e);var t=Ue(n);function n(){var e;Ne(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).unsubscribeFromAuth=null,e}return De(n,[{key:"componentDidMount",value:function(){var e=this.props.setCurrentUser;this.unsubscribeFromAuth=GA.onAuthStateChanged(function(){var t=Ae(_e().mark((function t(n){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=5;break}return t.next=3,KA(n);case 3:t.sent.onSnapshot((function(t){e(Te({id:t.id},t.data()))}));case 5:e(n);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromAuth()}},{key:"render",value:function(){var e=this;return(0,St.jsxs)("div",{children:[(0,St.jsx)(YA,{}),(0,St.jsxs)(he,{children:[(0,St.jsx)(oe,{exact:!0,path:"/",component:Nt}),(0,St.jsx)(oe,{path:"/shop",component:zt}),(0,St.jsx)(oe,{exact:!0,path:"/signin",render:function(){return e.props.currentUser?(0,St.jsx)(ne,{to:"/"}):(0,St.jsx)(rN,{})}})]})]})}}]),n}(t.Component),oN=_t((function(e){return{currentUser:e.user.currentUser}}),(function(e){return{setCurrentUser:function(t){return e(function(e){return{type:iN,payload:e}}(t))}}}))(aN);function uN(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var sN="function"===typeof Symbol&&Symbol.observable||"@@observable",cN=function(){return Math.random().toString(36).substring(7).split("").join(".")},lN={INIT:"@@redux/INIT"+cN(),REPLACE:"@@redux/REPLACE"+cN(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+cN()}};function fN(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function hN(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(uN(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(uN(1));return n(hN)(e,t)}if("function"!==typeof e)throw new Error(uN(2));var i=e,a=t,o=[],u=o,s=!1;function c(){u===o&&(u=o.slice())}function l(){if(s)throw new Error(uN(3));return a}function f(e){if("function"!==typeof e)throw new Error(uN(4));if(s)throw new Error(uN(5));var t=!0;return c(),u.push(e),function(){if(t){if(s)throw new Error(uN(6));t=!1,c();var n=u.indexOf(e);u.splice(n,1),o=null}}}function h(e){if(!fN(e))throw new Error(uN(7));if("undefined"===typeof e.type)throw new Error(uN(8));if(s)throw new Error(uN(9));try{s=!0,a=i(a,e)}finally{s=!1}for(var t=o=u,n=0;n<t.length;n++){(0,t[n])()}return e}function d(e){if("function"!==typeof e)throw new Error(uN(10));i=e,h({type:lN.REPLACE})}function p(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(uN(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[sN]=function(){return this},e}return h({type:lN.INIT}),(r={dispatch:h,subscribe:f,getState:l,replaceReducer:d})[sN]=p,r}function dN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var pN=n(896),vN=n.n(pN),mN={currentUser:null},yN=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mN,t=arguments.length>1?arguments[1]:void 0;return t.type===iN?Te(Te({},e),{},{currentUser:t.payload}):e},gN=function(e,t){return e.find((function(e){return e.id===t.id}))?e.map((function(e){return e.id===t.id?Te(Te({},e),{},{quantity:e.quantity+1}):e})):[].concat(Je(e),[Te(Te({},t),{},{quantity:1})])},kN={hidden:!0,cartItems:[]},bN=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kN,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Lt.TOGGLE_CART_HIDDEN:return Te(Te({},e),{},{hidden:!e.hidden});case Lt.ADD_ITEM:return Te(Te({},e),{},{cartItems:gN(e.cartItems,t.payload)});default:return e}},wN=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:lN.INIT}))throw new Error(uN(12));if("undefined"===typeof n(void 0,{type:lN.PROBE_UNKNOWN_ACTION()}))throw new Error(uN(13))}))}(n)}catch(u){a=u}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},u=0;u<o.length;u++){var s=o[u],c=n[s],l=e[s],f=c(l,t);if("undefined"===typeof f){t&&t.type;throw new Error(uN(14))}i[s]=f,r=r||f!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}({user:yN,cart:bN}),xN=[vN()],_N=hN(wN,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(uN(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=dN.apply(void 0,a)(n.dispatch),Te(Te({},n),{},{dispatch:r})}}}.apply(void 0,xN)),IN=_N;r.createRoot(document.getElementById("root")).render((0,St.jsx)(It,{store:IN,children:(0,St.jsx)(de,{children:(0,St.jsx)(oN,{})})}))}()}();
//# sourceMappingURL=main.a4a4b355.js.map